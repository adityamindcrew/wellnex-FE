(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{1865:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var a=s(3464),r=s(9509);let i=r.env.NEXT_API_URL;a.A.create({baseURL:i,headers:{"Content-Type":"application/json"}});let n=async e=>{if(!e.ok)throw Error((await e.json()).message||"Something went wrong");return e.json()};console.log(r.env.NEXT_API_URL,"process.env.NEXT_API_URL");let l={signup:async e=>n(await fetch("".concat(r.env.NEXT_API_URL,"/business/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),sendVerificationEmail:async(e,t)=>n(await fetch("".concat(i,"/business/sendVerificationEmail"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:t})})),verifyEmailByLink:async(e,t)=>n(await fetch("".concat(i,"/business/verifyEmailByLink"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({verificationToken:t,_id:e})})),uploadLogo:async(e,t,s)=>{let a=new FormData;a.append("logo",e),a.append("businessId",s);try{let e=await fetch("".concat(r.env.NEXT_API_URL,"/business/uploadBusinessLogo"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:a});if(413===e.status)throw Error("File size too large. Please use a smaller image (max 5MB).");let s=await e.json();if(!e.ok)throw Error(s.message||"Failed to upload logo");let i=s.logoUrl;return i&&!i.startsWith("https://wellnexai.com")&&(i="https://wellnexai.com".concat(i.startsWith("/")?"":"/").concat(i)),{...s,logoUrl:i}}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw Error("Network error. Please check your connection and try again.");throw e}},setThemeColor:async(e,t,s)=>{try{let a=s?JSON.stringify({themeColor:e,businessId:s}):JSON.stringify({themeColor:e}),i=await fetch("".concat(r.env.NEXT_API_URL,"/business/setBusinessThemeColor"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:a}),n=await i.json();if(!i.ok)throw Error(n.message||"Failed to set theme color");return n}catch(e){throw e}},addBusinessKeywords:async(e,t,s)=>{try{let a=await fetch("".concat(r.env.NEXT_API_URL,"/business/addBusinessKeywords"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({keywords:e,businessId:s,replace:!0})}),i=await a.json();if(!a.ok)throw Error(i.message||"Failed to add keywords");return i}catch(e){throw e}},signin:async(e,t)=>{let s=localStorage.getItem("businessId"),a={email:e,password:t};s&&(a.businessId=s);let i=await fetch("".concat(r.env.NEXT_API_URL,"/business/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await i.json();if(!i.ok||!n.status)throw Error(n.message||"Invalid email or password");return n},setupChatbot:async(e,t,s)=>{let a=await fetch("".concat(i,"/business/add-business-questions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({businessId:e,questions:t})});if(!a.ok)throw Error((await a.json()).message||"Failed to setup chatbot");return a.json()},forgotPassword:async e=>{try{let t=await fetch("".concat(i,"/business/forgotPassword"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to send reset password email");return s}catch(e){throw console.error("Error in forgotPassword API:",e),e}},resetPassword:async(e,t)=>{let s=await fetch("".concat(i,"/business/resetPassword"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})});if(!s.ok)throw Error((await s.json()).message||"Failed to reset password");return s.json()},checkVerificationStatus:async(e,t)=>{try{let s=await fetch("".concat(i,"/business/verify-status"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({businessId:e})}),a=await s.json();if(!s.ok)throw Error(a.message||"Failed to check verification status");return a}catch(e){throw console.error("Error checking verification status:",e),e}}}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(2596),r=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},5233:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var a=s(5155),r=s(9137),i=s.n(r),n=s(2115),l=s(1865),c=s(8449),o=s(6766),d=s(7213),m=s(7863),x=s(6474),u=s(4416),h=s(9852),f=s(7368),g=s(5855),b=s(5695),p=s(9509);let j=(0,f.c)("pk_test_51RWxeYKNtFSSZren07ctBc5KRh4LA2msrroYkJpDR27nEAycVYvPQXEpfeXTxOD5LJFLZ0SiMkz4oELE0XqRqVII00JhHtSzdo"),y=e=>new Promise((t,s)=>{let a=document.createElement("canvas"),r=a.getContext("2d"),i=new window.Image;i.onload=()=>{let{width:n,height:l}=i;n>l?n>800&&(l=800*l/n,n=800):l>800&&(n=800*n/l,l=800),a.width=n,a.height=l,r&&r.drawImage(i,0,0,n,l),a.toBlob(a=>{a?t(new File([a],e.name,{type:"image/png",lastModified:Date.now()})):s(Error("Failed to compress image"))},"image/png",.8)},i.onerror=()=>s(Error("Failed to load image")),i.src=URL.createObjectURL(e)});function w(e){let{onPaymentMethodCreated:t,isForChangeCard:s=!1}=e,r=(0,g.useStripe)(),i=(0,g.useElements)(),[l,c]=(0,n.useState)(""),[o,d]=(0,n.useState)(null),[m,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),f=async e=>{e.preventDefault(),d(null),x(!0);try{if(!r||!i)throw Error("Stripe not loaded");let e=i.getElement(g.CardNumberElement);if(!e)throw Error("Card element not found");let{error:s,paymentMethod:a}=await r.createPaymentMethod({type:"card",card:e,billing_details:{name:l}});if(s)throw Error(s.message||"Payment error");if(!(null==a?void 0:a.id))throw Error("Failed to create payment method");t(a.id)}catch(e){d(e instanceof Error?e.message:"Failed to create payment method")}finally{x(!1)}};return(0,a.jsxs)("form",{onSubmit:f,className:"bg-white rounded-2xl px-8 py-6 w-full max-w-[600px] flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"mb-1 font-semibold text-[#181D27] text-lg",children:"Payment"}),(0,a.jsx)("div",{className:"mb-4 text-sm text-[#535862]",children:"Card details."}),(0,a.jsxs)("div",{className:"flex w-full gap-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex-[6]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Name on card"}),(0,a.jsx)("input",{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",value:l,onChange:e=>c(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex-[4]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Expiry"}),(0,a.jsx)(g.CardExpiryElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"1.5","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]}),(0,a.jsxs)("div",{className:"flex w-full gap-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex-[6]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Card number"}),(0,a.jsx)(g.CardNumberElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]}),(0,a.jsxs)("div",{className:"flex-[4]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"CVV"}),(0,a.jsx)(g.CardCvcElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]})]}),o&&(0,a.jsx)("div",{className:"text-red-500 mt-3 text-base w-full text-center",children:o}),(0,a.jsx)("div",{className:"flex w-full mt-6 gap-3",children:(0,a.jsx)("button",{type:"submit",className:"flex-1 py-2.5 rounded-md bg-black text-white font-semibold text-base",disabled:m,children:m?"Processing...":s?"Add New Card":"Pay ".concat(u)})})]})}function v(){let e=(0,b.useRouter)(),[t,s]=(0,n.useState)("#987CF1"),[r,f]=(0,n.useState)(!1),[v,N]=(0,n.useState)(null),[S,k]=(0,n.useState)(null),[E,C]=(0,n.useState)(!1),[A,I]=(0,n.useState)(!1),[T,P]=(0,n.useState)(!1),[z,_]=(0,n.useState)(null),[F,O]=(0,n.useState)(""),[L,B]=(0,n.useState)(""),[R,J]=(0,n.useState)(null),[D,M]=(0,n.useState)(null),[U,X]=(0,n.useState)(null),[q,K]=(0,n.useState)(null),[W,H]=(0,n.useState)(null),[Y,V]=(0,n.useState)(!1),[G,Q]=(0,n.useState)("#987CF1"),$=(0,n.useRef)(null),[Z,ee]=(0,n.useState)(!1),[et,es]=(0,n.useState)(0),[ea,er]=(0,n.useState)(0),[ei,en]=(0,n.useState)(0),el=(0,n.useRef)(null),ec=(0,n.useRef)(null),[eo,ed]=(0,n.useState)({x:0,y:0}),[em,ex]=(0,n.useState)(0),[eu,eh]=(0,n.useState)(null),[ef,eg]=(0,n.useState)(!0),[eb,ep]=(0,n.useState)(!1),[ej,ey]=(0,n.useState)(!1),[ew,ev]=(0,n.useState)(!1),[eN,eS]=(0,n.useState)(""),[ek,eE]=(0,n.useState)([]),[eC,eA]=(0,n.useState)(null),[eI,eT]=(0,n.useState)(!1),[eP,ez]=(0,n.useState)(!1),[e_,eF]=(0,n.useState)(""),eO=(0,n.useCallback)(async()=>{try{if(!(await fetch("".concat(c.JR,"/business/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},credentials:"include"})).ok)throw Error("Logout failed");localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie="".concat(t.trim(),"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}),window.location.href="/signin"}catch(e){console.error("Logout error:",e),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie="".concat(t.trim(),"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}),window.location.href="/signin"}},[e]),eL=async()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t)return;let a=await fetch("".concat(c.JR,"/business/getBusinessDetail"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.replace(/['"]/g,""))},body:JSON.stringify({businessId:t})}),r=await a.json();console.log(r),r.data?(r.data.logo&&(X("".concat(p.env.NEXT_UPLOADS_URL,"/business-logos/").concat(r.data.logo)),localStorage.setItem("businessLogo","".concat(p.env.NEXT_UPLOADS_URL,"/business-logos/").concat(r.data.logo))),r.data.themeColor&&(s(r.data.themeColor),Q(r.data.themeColor),localStorage.setItem("themeColor",r.data.themeColor)),"paused"===r.data.subscriptionDetail.status?(P(!0),setTimeout(()=>{eO()},1e4)):"canceled"===r.data.subscriptionDetail.status&&I(!0)):("Error getting subscription details: No active subscription found"===r.message||"No active subscription found. Please subscribe to access dashboard features."===r.message)&&I(!0)}catch(e){console.error("Error fetching business details:",e)}},eB=async()=>{eg(!0);try{let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t){eg(!1);return}let s=await fetch("".concat(c.JR,"/subscription/status?businessId=").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e.replace(/['"]/g,""))}});if(!s.ok)throw Error("Failed to fetch subscription status");let a=await s.json();eh(a||null)}catch(e){eh(null)}finally{eg(!1)}};(0,n.useEffect)(()=>{eL(),eB()},[]),(0,n.useEffect)(()=>{if(!t)return;let e=(e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:Number.parseInt(t[1],16),g:Number.parseInt(t[2],16),b:Number.parseInt(t[3],16)}:{r:0,g:0,b:0}})(t);es(e.r),er(e.g),en(e.b)},[t]);let eR=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(N(null),s){if(!s.type.includes("png")){N("Please upload a PNG file only");return}if(s.size>5242880){N("File size must be less than ".concat(5,"MB. Current size: ").concat((s.size/1048576).toFixed(2),"MB"));return}try{let e=s;s.size>1048576&&(e=await y(s));let t=new FileReader;t.onload=t=>{var s;let a=null===(s=t.target)||void 0===s?void 0:s.result;K(a),localStorage.setItem("logoPreview",a),H(e),V(!0)},t.readAsDataURL(e)}catch(e){console.error("Error processing file:",e),N("Failed to process image. Please try again.")}}},eJ=async()=>{let e=null!==W,s=t!==G;if(!e&&!s){J("No changes to save"),setTimeout(()=>J(null),3e3);return}try{f(!0),N(null);let a=localStorage.getItem("token"),r=localStorage.getItem("businessId");if(!a||!r)throw Error("Authentication token or business ID not found");let i=!1;if(e&&W)try{let e=new FormData;e.append("logo",W),e.append("businessId",r);let t=await fetch("".concat(c.JR,"/business/uploadBusinessLogo"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:e});if(413===t.status)throw Error("File size too large. Please use a smaller image (max 5MB).");if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||"Failed to upload logo")}let s=localStorage.getItem("logoPreview");s&&(X(s),localStorage.setItem("businessLogo",s)),i=!0,J("Logo updated successfully")}catch(e){throw console.error("Logo upload error:",e),Error("Failed to upload logo")}if(s)try{await l.d.setThemeColor(t,a,r),localStorage.setItem("themeColor",t),Q(t),i=!0,J("Theme color updated successfully")}catch(e){throw console.error("Color update error:",e),Error("Failed to update theme color")}i&&(V(!1),H(null),ee(!1)),setTimeout(()=>J(null),3e3)}catch(e){N(e instanceof Error?e.message:"Failed to save changes")}finally{f(!1)}},eD=e=>{let t=e.target.value.startsWith("#")?e.target.value:"#".concat(e.target.value);(t.match(/^#([0-9A-F]{3}){1,2}$/i)||"#"===t)&&(s(t),N(null),V(!0))},eM=(e,t)=>{let a=Math.max(0,Math.min(255,Number.parseInt(t)||0));"r"===e&&es(a),"g"===e&&er(a),"b"===e&&en(a),s("#".concat(et.toString(16).padStart(2,"0")).concat(ea.toString(16).padStart(2,"0")).concat(ei.toString(16).padStart(2,"0"))),N(null),V(!0)},eU=(e,t,a)=>{let r=eX(360*a,100*e,(1-t)*50);es(r.r),er(r.g),en(r.b),s("#".concat(r.r.toString(16).padStart(2,"0")).concat(r.g.toString(16).padStart(2,"0")).concat(r.b.toString(16).padStart(2,"0")))},eX=(e,t,s)=>{let a,r,i;if(e/=360,s/=100,0==(t/=100))a=r=i=s;else{let n=(e,t,s)=>(s<0&&(s+=1),s>1&&(s-=1),s<1/6)?e+(t-e)*6*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e,l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;a=n(c,l,e+1/3),r=n(c,l,e),i=n(c,l,e-1/3)}return{r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*i)}},eq=async()=>{try{let e=await fetch("".concat(c.JR,"/subscription/cards"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch saved cards");let t=await e.json();eE(t),ev(!0)}catch(e){console.error("Error fetching saved cards:",e),k("Failed to fetch saved cards"),ey(!0)}},eK=async e=>{try{let t=await fetch("".concat(c.JR,"/subscription/renew-after-special-offer"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})});if(!t.ok)throw Error("Failed to renew subscription");await t.json(),ey(!1),ev(!1),eA(null),M("Your subscription has been renewed successfully!"),setTimeout(()=>M(null),3e3);let s=localStorage.getItem("token"),a=localStorage.getItem("businessId");if(s&&a){let e=await fetch("".concat(c.JR,"/subscription/status?businessId=").concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}});if(e.ok){let t=await e.json();eh(t||null)}}}catch(e){k(e.message),M(null)}},eW=async()=>{try{let e=await fetch("".concat(c.JR,"/subscription/check-special-offer"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to check special offer");let t=await e.json();t.hasSpecialOffer?(_(t.specialOfferPrice),O(t.message),B(t.currentPeriodEnd),eS(t.expiryDate||""),eF(t.reason||""),C(!0)):"already_used"===t.reason&&(O(t.message),eF(t.reason),C(!0))}catch(e){console.error("Error checking special offer:",e),k("Failed to check special offer")}},eH=async()=>{try{let e=await fetch("".concat(c.JR,"/subscription/apply-special-offer"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();if(!e.ok)throw Error(t.message||"Failed to create subscription");ep(!1),C(!1),eA(null),M("Subscription renewed! Offer applied for your next billing period."),setTimeout(()=>M(null),3e3),eB()}catch(e){console.error("Subscription error:",e),k(e.message||"An error occurred while processing your subscription?. Please try again."),ep(!1),M(null)}C(!1),M("Subscription renewed! Offer applied for your next billing period"),setTimeout(()=>M(null),3e3)},eY=async()=>{try{let e=await fetch("".concat(c.JR,"/subscription/cancel"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to cancel subscription");let t=await e.json();C(!1),M(t.message||"Your subscription has been cancelled"),eB()}catch(e){N(e.message)}},eV=async e=>{try{let t=await fetch("".concat(c.JR,"/subscription/apply-special-offer"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to create subscription");ep(!1),C(!1),eA(null),M("Your subscription has been renewed successfully!"),setTimeout(()=>M(null),3e3),eB()}catch(e){console.error("Subscription error:",e),k(e.message||"An error occurred while processing your subscription?. Please try again."),ep(!1),M(null)}},eG=async()=>{try{ez(!0),ep(!0)}catch(e){console.error("Error opening payment form:",e),k("Failed to open payment form")}},eQ=async e=>{try{let t=await fetch("".concat(c.JR,"/subscription/change-card"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})});if(!t.ok)throw Error("Failed to change payment card");await t.json(),eT(!1),ep(!1),eA(null),M("Payment card changed successfully!"),setTimeout(()=>M(null),3e3)}catch(e){console.error("Change card error:",e),k(e.message||"An error occurred while changing your payment card. Please try again."),eT(!1),ep(!1),M(null)}};return(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("h2",{className:"jsx-884d3352fe1274cc mb-4 text-xl font-semibold",children:"Platform Subscription"}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col gap-6 lg:flex-row lg:items-start lg:gap-8",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-full max-w-lg mx-auto lg:mx-0 lg:max-w-md rounded-lg border border-gray-200 bg-white p-4 sm:p-6 lg:p-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[ef?(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-center text-gray-500 py-4",children:"Loading subscription..."}):eu?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Subscription Status"}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium",children:[(null==eu?void 0:eu.status)?(null==eu?void 0:eu.status)==="active"&&(null==eu?void 0:eu.cancelAtPeriodEnd)?"Active":(null==eu?void 0:eu.status[0].toUpperCase())+(null==eu?void 0:eu.status.slice(1)):"N/A",eu.isSpecialOffer&&" (Special Offer)"]})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Start Date"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:(null==eu?void 0:eu.currentPeriodStart)?null==eu?void 0:eu.currentPeriodStart.slice(0,10):"N/A"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:(null==eu?void 0:eu.cancelAtPeriodEnd)||eu.isSpecialOffer?"End Date":"Next Renewal Date"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:(null==eu?void 0:eu.currentPeriodEnd)?null==eu?void 0:eu.currentPeriodEnd.slice(0,10):"N/A"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Email"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:(null==eu?void 0:eu.email)||"N/A"})]})]}):(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-center text-red-500 py-4",children:"No subscription data found."}),S&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-red-600 text-center bg-red-50 p-2 rounded-md",children:S}),D&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-green-600 text-center bg-green-50 p-2 rounded-md",children:D}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex gap-2 pt-2",children:[(0,a.jsx)(a.Fragment,{children:(null==eu?void 0:eu.cancelAtPeriodEnd)===!1?(0,a.jsx)("button",{onClick:eW,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Cancel Subscription"}):null}),(0,a.jsx)("button",{onClick:eG,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Change card details"}),(null==eu?void 0:eu.status)==="canceled"&&(0,a.jsx)("button",{onClick:eq,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Renew Subscription"})]})]})}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-full max-w-lg mx-auto lg:mx-0 lg:max-w-md rounded-lg border border-gray-200 bg-white p-4 sm:p-6 lg:p-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col sm:flex-row items-center gap-4",children:[(0,a.jsxs)("div",{onClick:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.click()},className:"jsx-884d3352fe1274cc relative h-12 w-12 rounded-full bg-gray-200 cursor-pointer overflow-hidden ",children:[q||U?(0,a.jsx)(o.default,{src:q||U||"",alt:"Business logo",fill:!0,className:"object-cover",unoptimized:!0,onError:e=>{console.error("Error loading logo:",e),N("Failed to load logo"),X(null),localStorage.removeItem("businessLogo")}}):(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex h-full w-full items-center justify-center",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsx)("input",{type:"file",ref:$,onChange:eR,accept:".png",className:"jsx-884d3352fe1274cc hidden"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium",children:"Change Logo (.png)"}),r&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs text-gray-500",children:"Uploading..."}),q&&!r&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs text-gray-500",children:"Preview"})]})]}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex flex-col sm:flex-row items-center gap-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center gap-2 mt-6",children:[(0,a.jsx)("div",{style:{backgroundColor:t||"#ffffff"},className:"jsx-884d3352fe1274cc h-10 w-10 shrink-0 rounded-md border"}),(0,a.jsx)(h.p,{type:"text",value:t,onChange:eD,className:"flex-1",placeholder:"#000000"}),(0,a.jsx)("button",{type:"button",onClick:()=>ee(!Z),className:"jsx-884d3352fe1274cc h-10 w-10 shrink-0 rounded-md border flex items-center justify-center",children:Z?(0,a.jsx)(m.A,{className:"h-4 w-4"}):(0,a.jsx)(x.A,{className:"h-4 w-4"})})]}),Z&&(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc relative mt-2 rounded-md border p-4",children:[(0,a.jsx)("div",{ref:el,style:{background:"linear-gradient(to bottom, rgba(255,255,255,1) 0%, rgba(0,0,0,1) 100%), \n                                  linear-gradient(to right, rgba(128,128,128,1) 0%, hsl(".concat(360*em,", 100%, 50%) 100%)"),backgroundBlendMode:"multiply"},onClick:e=>{if(!el.current)return;let t=el.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width,a=(e.clientY-t.top)/t.height;ed({x:Math.max(0,Math.min(1,s)),y:Math.max(0,Math.min(1,a))}),eU(Math.max(0,Math.min(1,s)),Math.max(0,Math.min(1,a)),em),N(null),V(!0)},className:"jsx-884d3352fe1274cc relative h-32 w-full cursor-pointer rounded-md",children:(0,a.jsx)("div",{style:{left:"".concat(100*eo.x,"%"),top:"".concat(100*eo.y,"%"),backgroundColor:t||"#ffffff"},className:"jsx-884d3352fe1274cc absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white"})}),(0,a.jsx)("div",{ref:ec,style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"},onClick:e=>{if(!ec.current)return;let t=ec.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width;ex(Math.max(0,Math.min(1,s))),eU(eo.x,eo.y,Math.max(0,Math.min(1,s))),N(null),V(!0)},className:"jsx-884d3352fe1274cc relative h-6 mt-2 cursor-pointer rounded-md",children:(0,a.jsx)("div",{style:{left:"".concat(100*em,"%")},className:"jsx-884d3352fe1274cc absolute top-0 h-full w-1 -translate-x-1/2 border-2 border-white"})}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc mt-2 grid grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"HEX"}),(0,a.jsx)(h.p,{value:t.replace("#",""),onChange:eD,className:"mt-1 text-center h-8",placeholder:"000000"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"R"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:et,onChange:e=>eM("r",e.target.value),className:"mt-1 text-center h-8"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"G"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:ea,onChange:e=>eM("g",e.target.value),className:"mt-1 text-center h-8"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"B"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:ei,onChange:e=>eM("b",e.target.value),className:"mt-1 text-center h-8"})]})]})]})]})}),v&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-red-600 text-center",children:v}),R&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-green-600 text-center",children:R}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex gap-2 pt-2 mt-4",children:[(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("logoPreview"),K(null),H(null),V(!0),ee(!1)},disabled:r,className:"jsx-884d3352fe1274cc rounded-md bg-black px-4 py-2 text-sm text-white disabled:opacity-50",children:"Reset"}),(0,a.jsx)("button",{onClick:eJ,disabled:r||!Y,className:"jsx-884d3352fe1274cc rounded-md bg-black px-4 py-2 text-sm text-white disabled:opacity-50",children:"Save Changes"})]})]})]}),E&&!eb&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-12 w-full max-w-md sm:max-w-lg mx-4 min-h-[280px] flex flex-col justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center mb-6 relative",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold flex-1",children:"already_used"===e_?"Cancel Subscription":"Special Offer"}),(0,a.jsx)("button",{onClick:()=>C(!1),style:{lineHeight:0},className:"jsx-884d3352fe1274cc absolute right-0 top-1 text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-4",children:F})]}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex justify-end mt-4",children:"already_used"===e_?(0,a.jsx)("button",{onClick:eY,className:"jsx-884d3352fe1274cc w-full px-4 py-2 text-white bg-black rounded-lg hover:bg-gray-800",children:"I want to cancel my subscription"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:eY,className:"jsx-884d3352fe1274cc px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"I want to cancel my subscription"}),(0,a.jsx)("button",{onClick:eH,className:"jsx-884d3352fe1274cc px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"Yes, I accept the offer"})]})})]})}),eb&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 w-full max-w-md sm:max-w-lg mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Payment Details"}),(0,a.jsx)("button",{onClick:()=>{ep(!1),ez(!1)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(g.Elements,{stripe:j,children:(0,a.jsx)(w,{onPaymentMethodCreated:eP?eQ:eV,isForChangeCard:eP})})]})}),ej&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold mb-4",children:"Renew Subscription"}),(0,a.jsx)("button",{onClick:()=>ey(!1),className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(g.Elements,{stripe:j,children:(0,a.jsx)(w,{onPaymentMethodCreated:eK})})]})}),ew&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Select Payment Method"}),(0,a.jsx)("button",{onClick:()=>{ev(!1),eA(null)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[ek.map(e=>(0,a.jsx)("div",{onClick:()=>eA(e.id),className:"jsx-884d3352fe1274cc "+"p-4 border rounded-lg cursor-pointer transition-all ".concat(eC===e.id?"border-black bg-gray-50":"border-gray-200"),children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:["visa"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M22.4 4.4H1.6C.7 4.4 0 5.1 0 6v12c0 .9.7 1.6 1.6 1.6h20.8c.9 0 1.6-.7 1.6-1.6V6c0-.9-.7-1.6-1.6-1.6z",fill:"#1A1F71",className:"jsx-884d3352fe1274cc"})}),"mastercard"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M12 4.4c-4.2 0-7.6 3.4-7.6 7.6s3.4 7.6 7.6 7.6 7.6-3.4 7.6-7.6-3.4-7.6-7.6-7.6z",fill:"#EB001B",className:"jsx-884d3352fe1274cc"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc font-medium",children:e.brand.charAt(0).toUpperCase()+e.brand.slice(1)}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm text-gray-500",children:["**** **** **** ",e.last4]})]})]}),eC===e.id&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-5 h-5 rounded-full border-2 border-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-3 h-3 rounded-full bg-black"})})]})},e.id)),(0,a.jsx)("button",{onClick:()=>{eC&&(ev(!1),eK(eC))},disabled:!eC,className:"jsx-884d3352fe1274cc w-full py-2 bg-black text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue with Selected Card"})]})]})}),A&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold mb-4",children:"No Active Subscription"}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-6",children:"You need an active subscription to access this feature. Please subscribe to continue using our platform."}),(0,a.jsx)("button",{onClick:()=>{localStorage.getItem("token")?(document.cookie="dashboardLock=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",I(!1),window.location.href="/payment/currencySelection"):window.location.href="/signin"},className:"jsx-884d3352fe1274cc px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Subscribe Now"}),(0,a.jsx)("button",{onClick:()=>eO(),className:"jsx-884d3352fe1274cc ml-5 px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Logout"})]})})}),T&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold mb-4",children:"No Active Subscription"}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-6",children:"Your subscription is paused. Please contact admin."})]})})}),eI&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Select Payment Method"}),(0,a.jsx)("button",{onClick:()=>{eT(!1),eA(null)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[ek.map(e=>(0,a.jsx)("div",{onClick:()=>eA(e.id),className:"jsx-884d3352fe1274cc "+"p-4 border rounded-lg cursor-pointer transition-all ".concat(eC===e.id?"border-black bg-gray-50":"border-gray-200"),children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:["visa"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M22.4 4.4H1.6C.7 4.4 0 5.1 0 6v12c0 .9.7 1.6 1.6 1.6h20.8c.9 0 1.6-.7 1.6-1.6V6c0-.9-.7-1.6-1.6-1.6z",fill:"#1A1F71",className:"jsx-884d3352fe1274cc"})}),"mastercard"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M12 4.4c-4.2 0-7.6 3.4-7.6 7.6s3.4 7.6 7.6 7.6 7.6-3.4 7.6-7.6-3.4-7.6-7.6-7.6z",fill:"#EB001B",className:"jsx-884d3352fe1274cc"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc font-medium",children:e.brand.charAt(0).toUpperCase()+e.brand.slice(1)}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm text-gray-500",children:["**** **** **** ",e.last4]})]})]}),eC===e.id&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-5 h-5 rounded-full border-2 border-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-3 h-3 rounded-full bg-black"})})]})},e.id)),(0,a.jsx)("button",{onClick:()=>{eC&&(eT(!1),eV(eC))},disabled:!eC,className:"jsx-884d3352fe1274cc w-full py-2 bg-black text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue with Selected Card"})]})]})}),(0,a.jsx)(i(),{id:"884d3352fe1274cc",children:".cancel-button.jsx-884d3352fe1274cc{margin-top:20px;padding:10px 20px;background-color:#f44336;color:white;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.cancel-button.jsx-884d3352fe1274cc:hover{background-color:#d32f2f}.success-message.jsx-884d3352fe1274cc{color:#2e7d32;padding:10px;margin:10px 0;border:1px solid#2e7d32;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background-color:#f1f8e9}.modal-overlay.jsx-884d3352fe1274cc{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:1000}.modal-content.jsx-884d3352fe1274cc{background:white;padding:24px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;max-width:400px;width:90%}.modal-content.jsx-884d3352fe1274cc h3.jsx-884d3352fe1274cc{margin:0 0 16px 0;color:#333}.modal-content.jsx-884d3352fe1274cc p.jsx-884d3352fe1274cc{margin:0 0 24px 0;color:#666}.modal-actions.jsx-884d3352fe1274cc{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;gap:12px}.modal-button.jsx-884d3352fe1274cc{padding:8px 16px;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;font-size:14px;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.modal-button.cancel.jsx-884d3352fe1274cc{background-color:#e0e0e0;color:#333}.modal-button.confirm.jsx-884d3352fe1274cc{background-color:#2196F3;color:white}.modal-button.jsx-884d3352fe1274cc:hover{opacity:.9}"})]})}},5435:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var a=s(5155),r=s(2115),i=s(4616),n=s(4416),l=s(5196),c=s(9917),o=s(2525),d=s(9509);function m(){let[e,t]=(0,r.useState)([]),[s,m]=(0,r.useState)(!0),[x,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[p,j]=(0,r.useState)(null),[y,w]=(0,r.useState)(null),[v,N]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1),[E,C]=(0,r.useState)(""),[A,I]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),z=(0,r.useRef)(null),[_,F]=(0,r.useState)(200),O=async()=>{try{let e=localStorage.getItem("token"),s=localStorage.getItem("businessId"),a=await fetch("".concat(d.env.NEXT_API_URL,"/business/getKeywords"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:s})});if(!a.ok)throw Error("Failed to fetch keywords");let r=await a.json();if(!r.status||200!==r.code)throw Error(r.message||"Failed to fetch keywords");let i=r.data;if(!Array.isArray(i))throw Error("Invalid response format: expected an array of keywords");let n=i.map(e=>({id:e._id,name:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(n)}catch(e){u(e instanceof Error?e.message:"An error occurred")}finally{m(!1)}};(0,r.useEffect)(()=>{O()},[]),(0,r.useEffect)(()=>{if(x){let e=setTimeout(()=>u(null),2e3);return()=>clearTimeout(e)}},[x]),(0,r.useEffect)(()=>{y&&z.current&&F(z.current.offsetWidth+24)},[v,y]);let L=e=>{j(e),b(!0)},B=async()=>{if(p)try{let e;f(!0);let t=localStorage.getItem("token"),s=localStorage.getItem("businessId");if(!t)throw Error("Authentication token not found");let a=await fetch("".concat(d.env.NEXT_API_URL,"/business/deleteKeyword"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.trim())},body:JSON.stringify({keywordId:p,businessId:s})}),r=await a.text();try{e=JSON.parse(r)}catch(e){throw Error("Invalid JSON response: ".concat(r))}if(!e.status||200!==e.code)throw Error(e.message||"Failed to delete keyword");await O(),b(!1),j(null)}catch(e){console.error("Delete error:",e),u(e instanceof Error?e.message:"Failed to delete keyword")}finally{f(!1)}},R=e=>{w(e.id),N(e.name)},J=async()=>{if(y&&v.trim())try{let e;k(!0);let t=localStorage.getItem("token"),s=localStorage.getItem("businessId");if(!t)throw Error("Authentication token not found");let a=await fetch("".concat(d.env.NEXT_API_URL,"/business/updateOneKeyword"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.trim())},body:JSON.stringify({keywords:{_id:y,name:v.trim()},businessId:s})}),r=await a.text();try{e=JSON.parse(r)}catch(e){throw Error("Invalid JSON response: ".concat(r))}if(!e.status||200!==e.code)throw Error(e.message||"Failed to update keyword");await O(),w(null),N("")}catch(e){console.error("Update error:",e),u(e instanceof Error?e.message:"Failed to update keyword")}finally{k(!1)}},D=()=>{w(null),N("")},M=async()=>{if(E.trim()){if(e.some(e=>e.name.toLowerCase()===E.trim().toLowerCase())){u("Keyword already exists"),C("");return}try{I(!0),u(null);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t)throw Error("Authentication token or business ID not found");let s=await fetch("".concat(d.env.NEXT_API_URL,"/business/addBusinessKeywords"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.trim())},body:JSON.stringify({keywords:[{name:E.trim()}],businessId:t,replace:!1})}),a=await s.json();if(!a.status||200!==a.code){u(a.message||"Keyword already exists");return}await O(),C(""),P(!1)}catch(e){u(e instanceof Error?e.message:"Keyword already exists")}finally{I(!1)}}};return s?(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-8",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[x&&(0,a.jsx)("div",{className:"text-center text-red-600 py-2",children:x}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Keywords"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Keywords"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.length<10&&(T?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:E,onChange:e=>C(e.target.value),placeholder:"Enter keyword",className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8",disabled:A}),(0,a.jsx)("button",{onClick:()=>{P(!1),C("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(n.A,{size:14})})]}),(0,a.jsxs)("button",{onClick:M,disabled:A||!E.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:[(0,a.jsx)(i.A,{size:16}),A?"Adding...":"Add keyword"]})]}):(0,a.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white",children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add Keyword"})]}))})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Keywords"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),y===e.id?(0,a.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{ref:z,className:"invisible absolute whitespace-pre px-2 py-1 border border-transparent text-base font-normal",style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"},"aria-hidden":"true",children:v||e.name}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1] overflow-x-auto whitespace-nowrap",style:{width:"".concat(Math.max(_,100),"px"),minWidth:"100px",maxWidth:"100%"},disabled:S}),(0,a.jsxs)("div",{className:"flex gap-2 sm:gap-2",children:[(0,a.jsx)("button",{onClick:J,disabled:S,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(l.A,{size:18})}),(0,a.jsx)("button",{onClick:D,disabled:S,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(n.A,{size:18})})]})]}):(0,a.jsx)("div",{className:"flex-1 min-w-0 break-words whitespace-normal",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Last Edited:"}),(0,a.jsx)("div",{className:"w-32 text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"w-20",children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>R(e),disabled:S,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>L(e.id),disabled:h||S,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})})]})]},e.id))]})]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Keyword"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this keyword? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{b(!1),j(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:h,children:"Cancel"}),(0,a.jsx)("button",{onClick:B,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:h,children:h?"Deleting...":"Delete"})]})]})})]})}},5558:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var a=s(5155),r=s(2115),i=s(4416),n=s(4616),l=s(5196),c=s(9917),o=s(2525),d=s(9509);function m(){let[e,t]=(0,r.useState)([]),[s,m]=(0,r.useState)(!0),[x,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[p,j]=(0,r.useState)(null),[y,w]=(0,r.useState)(null),[v,N]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1),[E,C]=(0,r.useState)(!1),[A,I]=(0,r.useState)(""),[T,P]=(0,r.useState)(!1),z=(0,r.useRef)(null),[_,F]=(0,r.useState)(0);(0,r.useEffect)(()=>{(async()=>{m(!0),u(null);try{let e=localStorage.getItem("businessId"),s=localStorage.getItem("token");if(!e||!s){u("Missing businessId or token"),m(!1);return}let a=await fetch("".concat(d.env.NEXT_API_URL,"/business/get-questions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({businessId:e})});if(a){let e=((await a.json()).data||[]).map(e=>({id:e._id,text:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(e)}else throw Error("Failed to fetch questions")}catch(e){u(e.message||"Failed to fetch questions")}finally{m(!1)}})()},[]),(0,r.useEffect)(()=>{z.current&&y&&F(z.current.offsetWidth)},[v,y]);let O=e=>{j(e),f(!0)},L=async()=>{if(p){b(!0);try{let s=localStorage.getItem("businessId"),a=localStorage.getItem("token");if(!s||!a){u("Missing businessId or token"),b(!1);return}if(!(await fetch("".concat(d.env.NEXT_API_URL,"/business/delete-question"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.trim())},body:JSON.stringify({businessId:s,questionId:p})})).ok)throw Error("Failed to delete question");t(e.filter(e=>e.id!==p)),f(!1),j(null)}catch(e){u(e.message||"Failed to delete question")}finally{b(!1)}}},B=e=>{w(e.id),N(e.text)},R=async()=>{if(y&&v.trim())try{k(!0);let s=localStorage.getItem("token"),a=localStorage.getItem("businessId");if(!s||!a)throw Error("Missing businessId or token");if(!(await fetch("".concat(d.env.NEXT_API_URL,"/business/update-one-question"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({businessId:a,questions:{_id:y,name:v.trim()}})})).ok)throw Error("Failed to update question");t(e.map(e=>e.id===y?{...e,text:v.trim()}:e)),w(null),N("")}catch(e){u(e.message||"Failed to update question")}finally{k(!1)}},J=()=>{w(null),N("")},D=async()=>{if(!A.trim()){u("Please enter a question");return}if(e.length>=5){u("Maximum 5 questions allowed");return}C(!0),u(null);try{var s,a;let e=localStorage.getItem("businessId"),r=localStorage.getItem("token");if(!e||!r)throw Error("Missing businessId or token");let i=await fetch("".concat(d.env.NEXT_API_URL,"/business/add-business-questions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({businessId:e,questions:[{name:A.trim()}]})}),n=await i.json();if(!i.ok)throw Error(n.message||"Failed to add question");let l={id:(null===(a=n.data)||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:s._id)||Date.now().toString(),text:A.trim(),createdAt:new Date().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1};t(e=>[...e,l]),I(""),P(!1);let c=await fetch("".concat(d.env.NEXT_API_URL,"/business/get-questions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({businessId:e})}),o=await c.json();if(c.ok){let e=(o.data||[]).map(e=>({id:e._id,text:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(e)}}catch(e){u(e.message||"Failed to add question")}finally{C(!1),P(!1)}};return(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Questions"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Questions"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:T?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:A,onChange:e=>I(e.target.value),placeholder:"Enter new question",className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8"}),(0,a.jsx)("button",{onClick:()=>P(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(i.A,{size:16})})]}),(0,a.jsxs)("button",{onClick:D,disabled:E||!A.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:[(0,a.jsx)(n.A,{size:16}),(0,a.jsx)("span",{children:E?"Adding...":"Add Question"})]})]}):(0,a.jsxs)("button",{onClick:()=>{P(!0),I("")},disabled:e.length>=5,className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50 disabled:cursor-not-allowed",title:e.length>=5?"Maximum 5 questions allowed":"",children:[(0,a.jsx)(n.A,{size:16}),(0,a.jsx)("span",{children:"Add Question"})]})})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[s&&(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading questions..."}),x&&(0,a.jsx)("div",{className:"text-center py-4 text-red-500",children:x}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Questions"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:grid sm:grid-cols-[1fr_auto_auto_auto] items-start sm:items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),y===e.id?(0,a.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0 w-full",children:[(0,a.jsx)("span",{ref:z,className:"invisible absolute whitespace-pre px-2 py-1 border border-transparent text-base font-normal",style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"},"aria-hidden":"true",children:v||e.text}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1] w-full min-w-0",disabled:S,style:{width:"".concat(Math.max(_,200),"px"),minWidth:200,maxWidth:"100%"}}),(0,a.jsxs)("div",{className:"flex gap-2 sm:gap-2",children:[(0,a.jsx)("button",{onClick:R,disabled:S,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(l.A,{size:18})}),(0,a.jsx)("button",{onClick:J,disabled:S,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(i.A,{size:18})})]})]}):(0,a.jsx)("div",{className:"flex-1 break-words w-full",children:e.text})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center w-full",children:[(0,a.jsx)("span",{className:"text-gray-500 block sm:hidden",children:"Last Edited:"}),(0,a.jsx)("div",{className:"text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center w-full",children:[(0,a.jsx)("span",{className:"text-gray-500 block sm:hidden",children:"Status:"}),(0,a.jsx)("div",{children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600 ",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 w-full sm:w-auto",children:[(0,a.jsx)("button",{onClick:()=>B(e),disabled:S,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>O(e.id),disabled:g,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})})]})]},e.id))]})]}),h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Question"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this question? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{f(!1),j(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:g,children:"Cancel"}),(0,a.jsx)("button",{onClick:L,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:g,children:g?"Deleting...":"Delete"})]})]})})]})}},6795:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var a=s(5155),r=s(2115),i=s(4616),n=s(4416),l=s(5196),c=s(9917),o=s(2525),d=s(9509);function m(){let[e,t]=(0,r.useState)([]),[s,m]=(0,r.useState)(!0),[x,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[p,j]=(0,r.useState)(null),[y,w]=(0,r.useState)(null),[v,N]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1),[E,C]=(0,r.useState)(""),[A,I]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),z=(0,r.useRef)(null),[_,F]=(0,r.useState)(200),O=async()=>{try{m(!0),u(null);let e=localStorage.getItem("token"),s=localStorage.getItem("businessId"),a=await fetch("".concat(d.env.NEXT_API_URL,"/business/getServicesList"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:s})});if(!a.ok)throw Error("Failed to fetch services");let r=await a.json();if(!r.status||200!==r.code)throw Error(r.message||"Failed to fetch services");let i=r.data;if(!Array.isArray(i))throw Error("Invalid response format: expected an array of services");let n=i.map(e=>({id:e._id,name:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(n)}catch(e){u(e instanceof Error?e.message:"An error occurred")}finally{m(!1)}};(0,r.useEffect)(()=>{O()},[]),(0,r.useEffect)(()=>{if(x){let e=setTimeout(()=>u(null),2e3);return()=>clearTimeout(e)}},[x]),(0,r.useEffect)(()=>{y&&z.current&&F(z.current.offsetWidth+24)},[v,y]);let L=e=>{j(e),b(!0)},B=async()=>{if(p)try{f(!0);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e)throw Error("Authentication token not found");let s=await fetch("".concat(d.env.NEXT_API_URL,"/business/deleteService"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({serviceId:p,businessId:t})}),a=await s.json();if(!a.status||200!==a.code)throw Error(a.message||"Failed to delete service");await O(),b(!1),j(null)}catch(e){console.error("Delete error:",e),u(e instanceof Error?e.message:"Failed to delete service")}finally{f(!1)}},R=e=>{w(e.id),N(e.name)},J=async()=>{if(y&&v.trim())try{k(!0);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e)throw Error("Authentication token not found");let s=await fetch("".concat(d.env.NEXT_API_URL,"/business/updateOneService"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.trim())},body:JSON.stringify({businessId:t,service:{_id:y,name:v.trim()}})}),a=await s.json();if(!a.status||200!==a.code)throw Error(a.message||"Failed to update service");await O(),w(null),N("")}catch(e){console.error("Update error:",e),u(e instanceof Error?e.message:"Failed to update service")}finally{k(!1)}},D=()=>{w(null),N("")},M=async()=>{if(E.trim()){if(e.some(e=>e.name.toLowerCase()===E.trim().toLowerCase())){u("Service already exists"),C("");return}try{I(!0),u(null);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t)throw Error("Authentication token or business ID not found");let s=await fetch("".concat(d.env.NEXT_API_URL,"/business/addBusinessServices"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:t,services:[{name:E.trim()}]})}),a=await s.json();if(!a.status||200!==a.code){u(a.message||"Service already exists");return}await O(),C(""),P(!1)}catch(e){u(e instanceof Error?e.message:"Service already exists")}finally{I(!1)}}};return s?(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-8",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[x&&(0,a.jsx)("div",{className:"text-center text-red-600 py-2",children:x}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Services"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Services"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:T?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,a.jsx)("input",{type:"text",value:E,onChange:e=>C(e.target.value),placeholder:"Enter service name",className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8",disabled:A,onKeyDown:e=>{"Enter"===e.key&&!A&&E.trim()&&M()}}),(0,a.jsx)("button",{onClick:()=>{P(!1),C("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(n.A,{size:14})})]}),(0,a.jsx)("button",{onClick:M,disabled:A||!E.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Adding..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add"})]})})]}):(0,a.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white",children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add Service"})]})})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Services"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),y===e.id?(0,a.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{ref:z,className:"invisible absolute whitespace-pre px-2 py-1 border border-transparent text-base font-normal",style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"},"aria-hidden":"true",children:v||e.name}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1]",style:{width:"".concat(Math.max(_,100),"px"),minWidth:"100px",maxWidth:"100%"},disabled:S}),(0,a.jsxs)("div",{className:"flex gap-2 sm:gap-2",children:[(0,a.jsx)("button",{onClick:J,disabled:S,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(l.A,{size:18})}),(0,a.jsx)("button",{onClick:D,disabled:S,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(n.A,{size:18})})]})]}):(0,a.jsx)("div",{className:"flex-1 min-w-0 break-words whitespace-normal",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Last Edited:"}),(0,a.jsx)("div",{className:"w-32 text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"w-20",children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>R(e),disabled:S,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>L(e.id),disabled:h||S,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})})]})]},e.id))]})]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Service"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this service? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{b(!1),j(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:h,children:"Cancel"}),(0,a.jsx)("button",{onClick:B,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:h,children:h?"Deleting...":"Delete"})]})]})})]})}},7612:(e,t,s)=>{Promise.resolve().then(s.bind(s,5435)),Promise.resolve().then(s.bind(s,5558)),Promise.resolve().then(s.bind(s,6795)),Promise.resolve().then(s.bind(s,5233))},8449:(e,t,s)=>{"use strict";s.d(t,{JR:()=>a,Rn:()=>r,hD:()=>i});let a=s(9509).env.NEXT_API_URL,r={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")};class i extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(5155),r=s(2115),i=s(3999);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[4212,3464,4277,1834,8190,8441,1684,7358],()=>t(7612)),_N_E=e.O()}]);