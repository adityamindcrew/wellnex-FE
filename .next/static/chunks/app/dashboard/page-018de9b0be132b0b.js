(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{1865:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var a=s(3464);let r="https://wellnexai.com/api";a.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});let i=async e=>{if(!e.ok)throw Error((await e.json()).message||"Something went wrong");return e.json()},l={signup:async e=>i(await fetch("".concat(r,"/business/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),sendVerificationEmail:async(e,t)=>i(await fetch("".concat(r,"/business/sendVerificationEmail"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:t})})),verifyEmailByLink:async(e,t)=>i(await fetch("".concat(r,"/business/verifyEmailByLink"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({verificationToken:t,_id:e})})),uploadLogo:async(e,t,s)=>{let a=new FormData;a.append("logo",e),a.append("businessId",s);try{let e=await fetch("https://wellnexai.com/api/business/uploadBusinessLogo",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:a});if(413===e.status)throw Error("File size too large. Please use a smaller image (max 5MB).");let s=await e.json();if(!e.ok)throw Error(s.message||"Failed to upload logo");let r=s.logoUrl;return r&&!r.startsWith("https://wellnexai.com")&&(r="https://wellnexai.com".concat(r.startsWith("/")?"":"/").concat(r)),{...s,logoUrl:r}}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw Error("Network error. Please check your connection and try again.");throw e}},setThemeColor:async(e,t,s)=>{try{let a=s?JSON.stringify({themeColor:e,businessId:s}):JSON.stringify({themeColor:e}),r=await fetch("https://wellnexai.com/api/business/setBusinessThemeColor",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:a}),i=await r.json();if(!r.ok)throw Error(i.message||"Failed to set theme color");return i}catch(e){throw e}},addBusinessKeywords:async(e,t,s)=>{try{let a=await fetch("https://wellnexai.com/api/business/addBusinessKeywords",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({keywords:e,businessId:s,replace:!0})}),r=await a.json();if(!a.ok)throw Error(r.message||"Failed to add keywords");return r}catch(e){throw e}},signin:async(e,t)=>{let s=localStorage.getItem("businessId"),a={email:e,password:t};s&&(a.businessId=s);let r=await fetch("https://wellnexai.com/api/business/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),i=await r.json();if(!r.ok||!i.status)throw Error(i.message||"Invalid email or password");return i},setupChatbot:async(e,t,s)=>{let a=await fetch("".concat(r,"/business/add-business-questions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({businessId:e,questions:t})});if(!a.ok)throw Error((await a.json()).message||"Failed to setup chatbot");return a.json()},forgotPassword:async e=>{try{let t=await fetch("".concat(r,"/business/forgotPassword"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to send reset password email");return s}catch(e){throw console.error("Error in forgotPassword API:",e),e}},resetPassword:async(e,t)=>{let s=await fetch("".concat(r,"/business/resetPassword"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})});if(!s.ok)throw Error((await s.json()).message||"Failed to reset password");return s.json()},checkVerificationStatus:async(e,t)=>{try{let s=await fetch("".concat(r,"/business/verify-status"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({businessId:e})}),a=await s.json();if(!s.ok)throw Error(a.message||"Failed to check verification status");return a}catch(e){throw console.error("Error checking verification status:",e),e}}}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(2596),r=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},5233:(e,t,s)=>{"use strict";s.d(t,{default:()=>w});var a=s(5155),r=s(9137),i=s.n(r),l=s(2115),n=s(1865),c=s(8449),o=s(6766),d=s(7213),x=s(7863),m=s(6474),u=s(4416),h=s(9852),f=s(7368),g=s(5855),p=s(5695);let b=(0,f.c)("pk_test_51LuNV2E2Y7YLkjxVuaZ1F13llOwUjsRcrodK7nbLAxmqxcnKqjnWxlc83V53bnFdnWOSW07fvBQjEmKXp2ChPXNo004z40bvvz"),j=e=>new Promise((t,s)=>{let a=document.createElement("canvas"),r=a.getContext("2d"),i=new window.Image;i.onload=()=>{let{width:l,height:n}=i;l>n?l>800&&(n=800*n/l,l=800):n>800&&(l=800*l/n,n=800),a.width=l,a.height=n,r&&r.drawImage(i,0,0,l,n),a.toBlob(a=>{a?t(new File([a],e.name,{type:"image/png",lastModified:Date.now()})):s(Error("Failed to compress image"))},"image/png",.8)},i.onerror=()=>s(Error("Failed to load image")),i.src=URL.createObjectURL(e)});function y(e){let{onPaymentMethodCreated:t,isForChangeCard:s=!1}=e,r=(0,g.useStripe)(),i=(0,g.useElements)(),[n,c]=(0,l.useState)(""),[o,d]=(0,l.useState)(null),[x,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)(""),f=async e=>{e.preventDefault(),d(null),m(!0);try{if(!r||!i)throw Error("Stripe not loaded");let e=i.getElement(g.CardNumberElement);if(!e)throw Error("Card element not found");let{error:s,paymentMethod:a}=await r.createPaymentMethod({type:"card",card:e,billing_details:{name:n}});if(s)throw Error(s.message||"Payment error");if(!(null==a?void 0:a.id))throw Error("Failed to create payment method");t(a.id)}catch(e){d(e instanceof Error?e.message:"Failed to create payment method")}finally{m(!1)}};return(0,a.jsxs)("form",{onSubmit:f,className:"bg-white rounded-2xl px-8 py-6 w-full max-w-[600px] flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"mb-1 font-semibold text-[#181D27] text-lg",children:"Payment"}),(0,a.jsx)("div",{className:"mb-4 text-sm text-[#535862]",children:"Card details."}),(0,a.jsxs)("div",{className:"flex w-full gap-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex-[6]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Name on card"}),(0,a.jsx)("input",{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",value:n,onChange:e=>c(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex-[4]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Expiry"}),(0,a.jsx)(g.CardExpiryElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"1.5","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]}),(0,a.jsxs)("div",{className:"flex w-full gap-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex-[6]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Card number"}),(0,a.jsx)(g.CardNumberElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]}),(0,a.jsxs)("div",{className:"flex-[4]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"CVV"}),(0,a.jsx)(g.CardCvcElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]})]}),o&&(0,a.jsx)("div",{className:"text-red-500 mt-3 text-base w-full text-center",children:o}),(0,a.jsx)("div",{className:"flex w-full mt-6 gap-3",children:(0,a.jsx)("button",{type:"submit",className:"flex-1 py-2.5 rounded-md bg-black text-white font-semibold text-base",disabled:x,children:x?"Processing...":s?"Add New Card":"Pay ".concat(u)})})]})}function w(){let e=(0,p.useRouter)(),[t,s]=(0,l.useState)("#987CF1"),[r,f]=(0,l.useState)(!1),[w,v]=(0,l.useState)(null),[N,S]=(0,l.useState)(null),[k,C]=(0,l.useState)(!1),[E,A]=(0,l.useState)(!1),[I,z]=(0,l.useState)(!1),[T,P]=(0,l.useState)(null),[F,O]=(0,l.useState)(""),[B,J]=(0,l.useState)(""),[M,D]=(0,l.useState)(null),[L,_]=(0,l.useState)(null),[R,q]=(0,l.useState)(null),[U,K]=(0,l.useState)(null),[W,V]=(0,l.useState)(null),[Y,G]=(0,l.useState)(!1),[H,Q]=(0,l.useState)("#987CF1"),X=(0,l.useRef)(null),[$,Z]=(0,l.useState)(!1),[ee,et]=(0,l.useState)(0),[es,ea]=(0,l.useState)(0),[er,ei]=(0,l.useState)(0),el=(0,l.useRef)(null),en=(0,l.useRef)(null),[ec,eo]=(0,l.useState)({x:0,y:0}),[ed,ex]=(0,l.useState)(0),[em,eu]=(0,l.useState)(null),[eh,ef]=(0,l.useState)(!0),[eg,ep]=(0,l.useState)(!1),[eb,ej]=(0,l.useState)(!1),[ey,ew]=(0,l.useState)(!1),[ev,eN]=(0,l.useState)(""),[eS,ek]=(0,l.useState)([]),[eC,eE]=(0,l.useState)(null),[eA,eI]=(0,l.useState)(!1),[ez,eT]=(0,l.useState)(!1),[eP,eF]=(0,l.useState)(""),eO=(0,l.useCallback)(async()=>{try{if(!(await fetch("".concat(c.JR,"/business/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},credentials:"include"})).ok)throw Error("Logout failed");localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie="".concat(t.trim(),"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}),window.location.href="/signin"}catch(e){console.error("Logout error:",e),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie="".concat(t.trim(),"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}),window.location.href="/signin"}},[e]),eB=async()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t)return;let a=await fetch("".concat(c.JR,"/business/getBusinessDetail"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.replace(/['"]/g,""))},body:JSON.stringify({businessId:t})}),r=await a.json();console.log(r),r.data?(r.data.logo&&(q("https://wellnexai.com/uploads/business-logos/".concat(r.data.logo)),localStorage.setItem("businessLogo","https://wellnexai.com/uploads/business-logos/".concat(r.data.logo))),r.data.themeColor&&(s(r.data.themeColor),Q(r.data.themeColor),localStorage.setItem("themeColor",r.data.themeColor)),"paused"===r.data.subscriptionDetail.status?(z(!0),setTimeout(()=>{eO()},1e4)):"canceled"===r.data.subscriptionDetail.status&&A(!0)):("Error getting subscription details: No active subscription found"===r.message||"No active subscription found. Please subscribe to access dashboard features."===r.message)&&A(!0)}catch(e){console.error("Error fetching business details:",e)}},eJ=async()=>{ef(!0);try{let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t){ef(!1);return}let s=await fetch("".concat(c.JR,"/subscription/status?businessId=").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e.replace(/['"]/g,""))}});if(!s.ok)throw Error("Failed to fetch subscription status");let a=await s.json();eu(a||null)}catch(e){eu(null)}finally{ef(!1)}};(0,l.useEffect)(()=>{eB(),eJ()},[]),(0,l.useEffect)(()=>{if(!t)return;let e=(e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:Number.parseInt(t[1],16),g:Number.parseInt(t[2],16),b:Number.parseInt(t[3],16)}:{r:0,g:0,b:0}})(t);et(e.r),ea(e.g),ei(e.b)},[t]);let eM=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(v(null),s){if(!s.type.includes("png")){v("Please upload a PNG file only");return}if(s.size>5242880){v("File size must be less than ".concat(5,"MB. Current size: ").concat((s.size/1048576).toFixed(2),"MB"));return}try{let e=s;s.size>1048576&&(e=await j(s));let t=new FileReader;t.onload=t=>{var s;let a=null===(s=t.target)||void 0===s?void 0:s.result;K(a),localStorage.setItem("logoPreview",a),V(e),G(!0)},t.readAsDataURL(e)}catch(e){console.error("Error processing file:",e),v("Failed to process image. Please try again.")}}},eD=async()=>{let e=null!==W,s=t!==H;if(!e&&!s){D("No changes to save"),setTimeout(()=>D(null),3e3);return}try{f(!0),v(null);let a=localStorage.getItem("token"),r=localStorage.getItem("businessId");if(!a||!r)throw Error("Authentication token or business ID not found");let i=!1;if(e&&W)try{let e=new FormData;e.append("logo",W),e.append("businessId",r);let t=await fetch("".concat(c.JR,"/business/uploadBusinessLogo"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:e});if(413===t.status)throw Error("File size too large. Please use a smaller image (max 5MB).");if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||"Failed to upload logo")}let s=localStorage.getItem("logoPreview");s&&(q(s),localStorage.setItem("businessLogo",s)),i=!0,D("Logo updated successfully")}catch(e){throw console.error("Logo upload error:",e),Error("Failed to upload logo")}if(s)try{await n.d.setThemeColor(t,a,r),localStorage.setItem("themeColor",t),Q(t),i=!0,D("Theme color updated successfully")}catch(e){throw console.error("Color update error:",e),Error("Failed to update theme color")}i&&(G(!1),V(null),Z(!1)),setTimeout(()=>D(null),3e3)}catch(e){v(e instanceof Error?e.message:"Failed to save changes")}finally{f(!1)}},eL=e=>{let t=e.target.value.startsWith("#")?e.target.value:"#".concat(e.target.value);(t.match(/^#([0-9A-F]{3}){1,2}$/i)||"#"===t)&&(s(t),v(null),G(!0))},e_=(e,t)=>{let a=Math.max(0,Math.min(255,Number.parseInt(t)||0));"r"===e&&et(a),"g"===e&&ea(a),"b"===e&&ei(a),s("#".concat(ee.toString(16).padStart(2,"0")).concat(es.toString(16).padStart(2,"0")).concat(er.toString(16).padStart(2,"0"))),v(null),G(!0)},eR=(e,t,a)=>{let r=eq(360*a,100*e,(1-t)*50);et(r.r),ea(r.g),ei(r.b),s("#".concat(r.r.toString(16).padStart(2,"0")).concat(r.g.toString(16).padStart(2,"0")).concat(r.b.toString(16).padStart(2,"0")))},eq=(e,t,s)=>{let a,r,i;if(e/=360,s/=100,0==(t/=100))a=r=i=s;else{let l=(e,t,s)=>(s<0&&(s+=1),s>1&&(s-=1),s<1/6)?e+(t-e)*6*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e,n=s<.5?s*(1+t):s+t-s*t,c=2*s-n;a=l(c,n,e+1/3),r=l(c,n,e),i=l(c,n,e-1/3)}return{r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*i)}},eU=async()=>{try{let e=await fetch("".concat(c.JR,"/subscription/cards"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch saved cards");let t=await e.json();ek(t),ew(!0)}catch(e){console.error("Error fetching saved cards:",e),S("Failed to fetch saved cards"),ej(!0)}},eK=async e=>{try{let t=await fetch("".concat(c.JR,"/subscription/renew-after-special-offer"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})});if(!t.ok)throw Error("Failed to renew subscription");await t.json(),ej(!1),ew(!1),eE(null),_("Your subscription has been renewed successfully!"),setTimeout(()=>_(null),3e3);let s=localStorage.getItem("token"),a=localStorage.getItem("businessId");if(s&&a){let e=await fetch("".concat(c.JR,"/subscription/status?businessId=").concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}});if(e.ok){let t=await e.json();eu(t||null)}}}catch(e){S(e.message),_(null)}},eW=async()=>{try{let e=await fetch("".concat(c.JR,"/subscription/check-special-offer"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to check special offer");let t=await e.json();t.hasSpecialOffer?(P(t.specialOfferPrice),O(t.message),J(t.currentPeriodEnd),eN(t.expiryDate||""),eF(t.reason||""),C(!0)):"already_used"===t.reason&&(O(t.message),eF(t.reason),C(!0))}catch(e){console.error("Error checking special offer:",e),S("Failed to check special offer")}},eV=async()=>{try{let e=await fetch("".concat(c.JR,"/subscription/apply-special-offer"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();if(!e.ok)throw Error(t.message||"Failed to create subscription");ep(!1),C(!1),eE(null),_("Subscription renewed! Offer applied for your next billing period."),setTimeout(()=>_(null),3e3),eJ()}catch(e){console.error("Subscription error:",e),S(e.message||"An error occurred while processing your subscription?. Please try again."),ep(!1),_(null)}C(!1),_("Subscription renewed! Offer applied for your next billing period"),setTimeout(()=>_(null),3e3)},eY=async()=>{try{let e=await fetch("".concat(c.JR,"/subscription/cancel"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to cancel subscription");let t=await e.json();C(!1),_(t.message||"Your subscription has been cancelled"),eJ()}catch(e){v(e.message)}},eG=async e=>{try{let t=await fetch("".concat(c.JR,"/subscription/apply-special-offer"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to create subscription");ep(!1),C(!1),eE(null),_("Your subscription has been renewed successfully!"),setTimeout(()=>_(null),3e3),eJ()}catch(e){console.error("Subscription error:",e),S(e.message||"An error occurred while processing your subscription?. Please try again."),ep(!1),_(null)}},eH=async()=>{try{eT(!0),ep(!0)}catch(e){console.error("Error opening payment form:",e),S("Failed to open payment form")}},eQ=async e=>{try{let t=await fetch("".concat(c.JR,"/subscription/change-card"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})});if(!t.ok)throw Error("Failed to change payment card");await t.json(),eI(!1),ep(!1),eE(null),_("Payment card changed successfully!"),setTimeout(()=>_(null),3e3)}catch(e){console.error("Change card error:",e),S(e.message||"An error occurred while changing your payment card. Please try again."),eI(!1),ep(!1),_(null)}};return(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("h2",{className:"jsx-884d3352fe1274cc mb-4 text-xl font-semibold",children:"Platform Subscription"}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col gap-6 lg:flex-row lg:items-start lg:gap-8",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-full max-w-lg mx-auto lg:mx-0 lg:max-w-md rounded-lg border border-gray-200 bg-white p-4 sm:p-6 lg:p-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[eh?(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-center text-gray-500 py-4",children:"Loading subscription..."}):em?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Subscription Status"}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium",children:[(null==em?void 0:em.status)?(null==em?void 0:em.status)==="active"&&(null==em?void 0:em.cancelAtPeriodEnd)?"Active":(null==em?void 0:em.status[0].toUpperCase())+(null==em?void 0:em.status.slice(1)):"N/A",em.isSpecialOffer&&" (Special Offer)"]})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Start Date"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:(null==em?void 0:em.currentPeriodStart)?null==em?void 0:em.currentPeriodStart.slice(0,10):"N/A"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:(null==em?void 0:em.cancelAtPeriodEnd)||em.isSpecialOffer?"End Date":"Next Renewal Date"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:(null==em?void 0:em.currentPeriodEnd)?null==em?void 0:em.currentPeriodEnd.slice(0,10):"N/A"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Email"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:(null==em?void 0:em.email)||"N/A"})]})]}):(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-center text-red-500 py-4",children:"No subscription data found."}),N&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-red-600 text-center bg-red-50 p-2 rounded-md",children:N}),L&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-green-600 text-center bg-green-50 p-2 rounded-md",children:L}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex gap-2 pt-2",children:[(0,a.jsx)(a.Fragment,{children:(null==em?void 0:em.cancelAtPeriodEnd)===!1?(0,a.jsx)("button",{onClick:eW,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Cancel Subscription"}):null}),(0,a.jsx)("button",{onClick:eH,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Change card details"}),(null==em?void 0:em.status)==="canceled"&&(0,a.jsx)("button",{onClick:eU,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Renew Subscription"})]})]})}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-full max-w-lg mx-auto lg:mx-0 lg:max-w-md rounded-lg border border-gray-200 bg-white p-4 sm:p-6 lg:p-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col sm:flex-row items-center gap-4",children:[(0,a.jsxs)("div",{onClick:()=>{var e;return null===(e=X.current)||void 0===e?void 0:e.click()},className:"jsx-884d3352fe1274cc relative h-12 w-12 rounded-full bg-gray-200 cursor-pointer overflow-hidden ",children:[U||R?(0,a.jsx)(o.default,{src:U||R||"",alt:"Business logo",fill:!0,className:"object-cover",unoptimized:!0,onError:e=>{console.error("Error loading logo:",e),v("Failed to load logo"),q(null),localStorage.removeItem("businessLogo")}}):(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex h-full w-full items-center justify-center",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsx)("input",{type:"file",ref:X,onChange:eM,accept:".png",className:"jsx-884d3352fe1274cc hidden"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium",children:"Change Logo (.png)"}),r&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs text-gray-500",children:"Uploading..."}),U&&!r&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs text-gray-500",children:"Preview"})]})]}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex flex-col sm:flex-row items-center gap-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center gap-2 mt-6",children:[(0,a.jsx)("div",{style:{backgroundColor:t||"#ffffff"},className:"jsx-884d3352fe1274cc h-10 w-10 shrink-0 rounded-md border"}),(0,a.jsx)(h.p,{type:"text",value:t,onChange:eL,className:"flex-1",placeholder:"#000000"}),(0,a.jsx)("button",{type:"button",onClick:()=>Z(!$),className:"jsx-884d3352fe1274cc h-10 w-10 shrink-0 rounded-md border flex items-center justify-center",children:$?(0,a.jsx)(x.A,{className:"h-4 w-4"}):(0,a.jsx)(m.A,{className:"h-4 w-4"})})]}),$&&(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc relative mt-2 rounded-md border p-4",children:[(0,a.jsx)("div",{ref:el,style:{background:"linear-gradient(to bottom, rgba(255,255,255,1) 0%, rgba(0,0,0,1) 100%), \n                                  linear-gradient(to right, rgba(128,128,128,1) 0%, hsl(".concat(360*ed,", 100%, 50%) 100%)"),backgroundBlendMode:"multiply"},onClick:e=>{if(!el.current)return;let t=el.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width,a=(e.clientY-t.top)/t.height;eo({x:Math.max(0,Math.min(1,s)),y:Math.max(0,Math.min(1,a))}),eR(Math.max(0,Math.min(1,s)),Math.max(0,Math.min(1,a)),ed),v(null),G(!0)},className:"jsx-884d3352fe1274cc relative h-32 w-full cursor-pointer rounded-md",children:(0,a.jsx)("div",{style:{left:"".concat(100*ec.x,"%"),top:"".concat(100*ec.y,"%"),backgroundColor:t||"#ffffff"},className:"jsx-884d3352fe1274cc absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white"})}),(0,a.jsx)("div",{ref:en,style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"},onClick:e=>{if(!en.current)return;let t=en.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width;ex(Math.max(0,Math.min(1,s))),eR(ec.x,ec.y,Math.max(0,Math.min(1,s))),v(null),G(!0)},className:"jsx-884d3352fe1274cc relative h-6 mt-2 cursor-pointer rounded-md",children:(0,a.jsx)("div",{style:{left:"".concat(100*ed,"%")},className:"jsx-884d3352fe1274cc absolute top-0 h-full w-1 -translate-x-1/2 border-2 border-white"})}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc mt-2 grid grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"HEX"}),(0,a.jsx)(h.p,{value:t.replace("#",""),onChange:eL,className:"mt-1 text-center h-8",placeholder:"000000"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"R"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:ee,onChange:e=>e_("r",e.target.value),className:"mt-1 text-center h-8"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"G"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:es,onChange:e=>e_("g",e.target.value),className:"mt-1 text-center h-8"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"B"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:er,onChange:e=>e_("b",e.target.value),className:"mt-1 text-center h-8"})]})]})]})]})}),w&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-red-600 text-center",children:w}),M&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-green-600 text-center",children:M}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex gap-2 pt-2 mt-4",children:[(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("logoPreview"),K(null),V(null),G(!0),Z(!1)},disabled:r,className:"jsx-884d3352fe1274cc rounded-md bg-black px-4 py-2 text-sm text-white disabled:opacity-50",children:"Reset"}),(0,a.jsx)("button",{onClick:eD,disabled:r||!Y,className:"jsx-884d3352fe1274cc rounded-md bg-black px-4 py-2 text-sm text-white disabled:opacity-50",children:"Save Changes"})]})]})]}),k&&!eg&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-12 w-full max-w-md sm:max-w-lg mx-4 min-h-[280px] flex flex-col justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center mb-6 relative",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold flex-1",children:"already_used"===eP?"Cancel Subscription":"Special Offer"}),(0,a.jsx)("button",{onClick:()=>C(!1),style:{lineHeight:0},className:"jsx-884d3352fe1274cc absolute right-0 top-1 text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-4",children:F})]}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex justify-end mt-4",children:"already_used"===eP?(0,a.jsx)("button",{onClick:eY,className:"jsx-884d3352fe1274cc w-full px-4 py-2 text-white bg-black rounded-lg hover:bg-gray-800",children:"I want to cancel my subscription"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:eY,className:"jsx-884d3352fe1274cc px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"I want to cancel my subscription"}),(0,a.jsx)("button",{onClick:eV,className:"jsx-884d3352fe1274cc px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"Yes, I accept the offer"})]})})]})}),eg&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 w-full max-w-md sm:max-w-lg mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Payment Details"}),(0,a.jsx)("button",{onClick:()=>{ep(!1),eT(!1)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(g.Elements,{stripe:b,children:(0,a.jsx)(y,{onPaymentMethodCreated:ez?eQ:eG,isForChangeCard:ez})})]})}),eb&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold mb-4",children:"Renew Subscription"}),(0,a.jsx)("button",{onClick:()=>ej(!1),className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(g.Elements,{stripe:b,children:(0,a.jsx)(y,{onPaymentMethodCreated:eK})})]})}),ey&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Select Payment Method"}),(0,a.jsx)("button",{onClick:()=>{ew(!1),eE(null)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[eS.map(e=>(0,a.jsx)("div",{onClick:()=>eE(e.id),className:"jsx-884d3352fe1274cc "+"p-4 border rounded-lg cursor-pointer transition-all ".concat(eC===e.id?"border-black bg-gray-50":"border-gray-200"),children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:["visa"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M22.4 4.4H1.6C.7 4.4 0 5.1 0 6v12c0 .9.7 1.6 1.6 1.6h20.8c.9 0 1.6-.7 1.6-1.6V6c0-.9-.7-1.6-1.6-1.6z",fill:"#1A1F71",className:"jsx-884d3352fe1274cc"})}),"mastercard"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M12 4.4c-4.2 0-7.6 3.4-7.6 7.6s3.4 7.6 7.6 7.6 7.6-3.4 7.6-7.6-3.4-7.6-7.6-7.6z",fill:"#EB001B",className:"jsx-884d3352fe1274cc"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc font-medium",children:e.brand.charAt(0).toUpperCase()+e.brand.slice(1)}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm text-gray-500",children:["**** **** **** ",e.last4]})]})]}),eC===e.id&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-5 h-5 rounded-full border-2 border-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-3 h-3 rounded-full bg-black"})})]})},e.id)),(0,a.jsx)("button",{onClick:()=>{eC&&(ew(!1),eK(eC))},disabled:!eC,className:"jsx-884d3352fe1274cc w-full py-2 bg-black text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue with Selected Card"})]})]})}),E&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold mb-4",children:"No Active Subscription"}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-6",children:"You need an active subscription to access this feature. Please subscribe to continue using our platform."}),(0,a.jsx)("button",{onClick:()=>{localStorage.getItem("token")?(document.cookie="dashboardLock=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",A(!1),window.location.href="/payment/currencySelection"):window.location.href="/signin"},className:"jsx-884d3352fe1274cc px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Subscribe Now"}),(0,a.jsx)("button",{onClick:()=>eO(),className:"jsx-884d3352fe1274cc ml-5 px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Logout"})]})})}),I&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold mb-4",children:"No Active Subscription"}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-6",children:"Your subscription is paused. Please contact admin."})]})})}),eA&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Select Payment Method"}),(0,a.jsx)("button",{onClick:()=>{eI(!1),eE(null)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[eS.map(e=>(0,a.jsx)("div",{onClick:()=>eE(e.id),className:"jsx-884d3352fe1274cc "+"p-4 border rounded-lg cursor-pointer transition-all ".concat(eC===e.id?"border-black bg-gray-50":"border-gray-200"),children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:["visa"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M22.4 4.4H1.6C.7 4.4 0 5.1 0 6v12c0 .9.7 1.6 1.6 1.6h20.8c.9 0 1.6-.7 1.6-1.6V6c0-.9-.7-1.6-1.6-1.6z",fill:"#1A1F71",className:"jsx-884d3352fe1274cc"})}),"mastercard"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M12 4.4c-4.2 0-7.6 3.4-7.6 7.6s3.4 7.6 7.6 7.6 7.6-3.4 7.6-7.6-3.4-7.6-7.6-7.6z",fill:"#EB001B",className:"jsx-884d3352fe1274cc"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc font-medium",children:e.brand.charAt(0).toUpperCase()+e.brand.slice(1)}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm text-gray-500",children:["**** **** **** ",e.last4]})]})]}),eC===e.id&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-5 h-5 rounded-full border-2 border-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-3 h-3 rounded-full bg-black"})})]})},e.id)),(0,a.jsx)("button",{onClick:()=>{eC&&(eI(!1),eG(eC))},disabled:!eC,className:"jsx-884d3352fe1274cc w-full py-2 bg-black text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue with Selected Card"})]})]})}),(0,a.jsx)(i(),{id:"884d3352fe1274cc",children:".cancel-button.jsx-884d3352fe1274cc{margin-top:20px;padding:10px 20px;background-color:#f44336;color:white;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.cancel-button.jsx-884d3352fe1274cc:hover{background-color:#d32f2f}.success-message.jsx-884d3352fe1274cc{color:#2e7d32;padding:10px;margin:10px 0;border:1px solid#2e7d32;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background-color:#f1f8e9}.modal-overlay.jsx-884d3352fe1274cc{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:1000}.modal-content.jsx-884d3352fe1274cc{background:white;padding:24px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;max-width:400px;width:90%}.modal-content.jsx-884d3352fe1274cc h3.jsx-884d3352fe1274cc{margin:0 0 16px 0;color:#333}.modal-content.jsx-884d3352fe1274cc p.jsx-884d3352fe1274cc{margin:0 0 24px 0;color:#666}.modal-actions.jsx-884d3352fe1274cc{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;gap:12px}.modal-button.jsx-884d3352fe1274cc{padding:8px 16px;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;font-size:14px;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.modal-button.cancel.jsx-884d3352fe1274cc{background-color:#e0e0e0;color:#333}.modal-button.confirm.jsx-884d3352fe1274cc{background-color:#2196F3;color:white}.modal-button.jsx-884d3352fe1274cc:hover{opacity:.9}"})]})}},5435:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(5155),r=s(2115),i=s(4616),l=s(4416),n=s(5196),c=s(9917),o=s(2525);function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[j,y]=(0,r.useState)(null),[w,v]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),[E,A]=(0,r.useState)(!1),[I,z]=(0,r.useState)(!1),T=async()=>{try{let e=localStorage.getItem("token"),s=localStorage.getItem("businessId"),a=await fetch("https://wellnexai.com/api/business/getKeywords",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:s})});if(!a.ok)throw Error("Failed to fetch keywords");let r=await a.json();if(!r.status||200!==r.code)throw Error(r.message||"Failed to fetch keywords");let i=r.data;if(!Array.isArray(i))throw Error("Invalid response format: expected an array of keywords");let l=i.map(e=>({id:e._id,name:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(l)}catch(e){m(e instanceof Error?e.message:"An error occurred")}finally{d(!1)}};(0,r.useEffect)(()=>{T()},[]),(0,r.useEffect)(()=>{if(x){let e=setTimeout(()=>m(null),2e3);return()=>clearTimeout(e)}},[x]);let P=e=>{b(e),g(!0)},F=async()=>{if(p)try{let e;h(!0);let t=localStorage.getItem("token"),s=localStorage.getItem("businessId");if(!t)throw Error("Authentication token not found");let a=await fetch("https://wellnexai.com/api/business/deleteKeyword",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.trim())},body:JSON.stringify({keywordId:p,businessId:s})}),r=await a.text();try{e=JSON.parse(r)}catch(e){throw Error("Invalid JSON response: ".concat(r))}if(!e.status||200!==e.code)throw Error(e.message||"Failed to delete keyword");await T(),g(!1),b(null)}catch(e){console.error("Delete error:",e),m(e instanceof Error?e.message:"Failed to delete keyword")}finally{h(!1)}},O=e=>{y(e.id),v(e.name)},B=async()=>{if(j&&w.trim())try{let e;S(!0);let t=localStorage.getItem("token"),s=localStorage.getItem("businessId");if(!t)throw Error("Authentication token not found");let a=await fetch("https://wellnexai.com/api/business/updateOneKeyword",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.trim())},body:JSON.stringify({keywords:{_id:j,name:w.trim()},businessId:s})}),r=await a.text();try{e=JSON.parse(r)}catch(e){throw Error("Invalid JSON response: ".concat(r))}if(!e.status||200!==e.code)throw Error(e.message||"Failed to update keyword");await T(),y(null),v("")}catch(e){console.error("Update error:",e),m(e instanceof Error?e.message:"Failed to update keyword")}finally{S(!1)}},J=()=>{y(null),v("")},M=async()=>{if(k.trim()){if(e.some(e=>e.name.toLowerCase()===k.trim().toLowerCase())){m("Keyword already exists"),C("");return}try{A(!0),m(null);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t)throw Error("Authentication token or business ID not found");let s=await fetch("https://wellnexai.com/api/business/addBusinessKeywords",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.trim())},body:JSON.stringify({keywords:[{name:k.trim()}],businessId:t,replace:!1})}),a=await s.json();if(!a.status||200!==a.code){m(a.message||"Keyword already exists");return}await T(),C(""),z(!1)}catch(e){m(e instanceof Error?e.message:"Keyword already exists")}finally{A(!1)}}};return s?(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-8",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[x&&(0,a.jsx)("div",{className:"text-center text-red-600 py-2",children:x}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Keywords"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Keywords"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.length<10&&(I?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:"Enter keyword",className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8",disabled:E}),(0,a.jsx)("button",{onClick:()=>{z(!1),C("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(l.A,{size:14})})]}),(0,a.jsxs)("button",{onClick:M,disabled:E||!k.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:[(0,a.jsx)(i.A,{size:16}),E?"Adding...":"Add keyword"]})]}):(0,a.jsxs)("button",{onClick:()=>z(!0),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white",children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add Keyword"})]}))})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Keywords"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),j===e.id?(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:w,onChange:e=>v(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1]",style:{width:"".concat(8*w.length,"px"),minWidth:"100px"},disabled:N}),(0,a.jsx)("button",{onClick:B,disabled:N,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(n.A,{size:18})}),(0,a.jsx)("button",{onClick:J,disabled:N,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(l.A,{size:18})})]}):(0,a.jsx)("div",{className:"flex-1",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Last Edited:"}),(0,a.jsx)("div",{className:"w-32 text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"w-20",children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>O(e),disabled:N,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>P(e.id),disabled:u||N,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})})]})]},e.id))]})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Keyword"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this keyword? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{g(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:u,children:"Cancel"}),(0,a.jsx)("button",{onClick:F,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:u,children:u?"Deleting...":"Delete"})]})]})})]})}},5558:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(5155),r=s(2115),i=s(4416),l=s(4616),n=s(5196),c=s(9917),o=s(2525);function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[j,y]=(0,r.useState)(null),[w,v]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),[E,A]=(0,r.useState)(""),[I,z]=(0,r.useState)(!1),T=(0,r.useRef)(null),[P,F]=(0,r.useState)(0);(0,r.useEffect)(()=>{(async()=>{d(!0),m(null);try{let e=localStorage.getItem("businessId"),s=localStorage.getItem("token");if(!e||!s){m("Missing businessId or token"),d(!1);return}let a=await fetch("https://wellnexai.com/api/business/get-questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({businessId:e})});if(a){let e=((await a.json()).data||[]).map(e=>({id:e._id,text:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(e)}else throw Error("Failed to fetch questions")}catch(e){m(e.message||"Failed to fetch questions")}finally{d(!1)}})()},[]),(0,r.useEffect)(()=>{T.current&&j&&F(T.current.offsetWidth)},[w,j]);let O=e=>{b(e),h(!0)},B=async()=>{if(p){g(!0);try{let s=localStorage.getItem("businessId"),a=localStorage.getItem("token");if(!s||!a){m("Missing businessId or token"),g(!1);return}if(!(await fetch("https://wellnexai.com/api/business/delete-question",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.trim())},body:JSON.stringify({businessId:s,questionId:p})})).ok)throw Error("Failed to delete question");t(e.filter(e=>e.id!==p)),h(!1),b(null)}catch(e){m(e.message||"Failed to delete question")}finally{g(!1)}}},J=e=>{y(e.id),v(e.text)},M=async()=>{if(j&&w.trim())try{S(!0);let s=localStorage.getItem("token"),a=localStorage.getItem("businessId");if(!s||!a)throw Error("Missing businessId or token");if(!(await fetch("https://wellnexai.com/api/business/update-one-question",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({businessId:a,questions:{_id:j,name:w.trim()}})})).ok)throw Error("Failed to update question");t(e.map(e=>e.id===j?{...e,text:w.trim()}:e)),y(null),v("")}catch(e){m(e.message||"Failed to update question")}finally{S(!1)}},D=()=>{y(null),v("")},L=async()=>{if(!E.trim()){m("Please enter a question");return}if(e.length>=5){m("Maximum 5 questions allowed");return}C(!0),m(null);try{var s,a;let e=localStorage.getItem("businessId"),r=localStorage.getItem("token");if(!e||!r)throw Error("Missing businessId or token");let i=await fetch("https://wellnexai.com/api/business/add-business-questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({businessId:e,questions:[{name:E.trim()}]})}),l=await i.json();if(!i.ok)throw Error(l.message||"Failed to add question");let n={id:(null===(a=l.data)||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:s._id)||Date.now().toString(),text:E.trim(),createdAt:new Date().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1};t(e=>[...e,n]),A(""),z(!1);let c=await fetch("https://wellnexai.com/api/business/get-questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({businessId:e})}),o=await c.json();if(c.ok){let e=(o.data||[]).map(e=>({id:e._id,text:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(e)}}catch(e){m(e.message||"Failed to add question")}finally{C(!1),z(!1)}};return(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Questions"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Questions"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:I?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:E,onChange:e=>A(e.target.value),placeholder:"Enter new question",className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8"}),(0,a.jsx)("button",{onClick:()=>z(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(i.A,{size:16})})]}),(0,a.jsxs)("button",{onClick:L,disabled:k||!E.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:[(0,a.jsx)(l.A,{size:16}),(0,a.jsx)("span",{children:k?"Adding...":"Add Question"})]})]}):(0,a.jsxs)("button",{onClick:()=>{z(!0),A("")},disabled:e.length>=5,className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50 disabled:cursor-not-allowed",title:e.length>=5?"Maximum 5 questions allowed":"",children:[(0,a.jsx)(l.A,{size:16}),(0,a.jsx)("span",{children:"Add Question"})]})})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[s&&(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading questions..."}),x&&(0,a.jsx)("div",{className:"text-center py-4 text-red-500",children:x}),(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Questions"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),j===e.id?(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("span",{ref:T,className:"invisible absolute whitespace-pre px-2 py-1 border border-transparent text-base font-normal",style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"},"aria-hidden":"true",children:w||e.text}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>v(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1]",disabled:N,style:{width:"".concat(Math.max(P,200),"px"),minWidth:"200px",maxWidth:"100%"}}),(0,a.jsx)("button",{onClick:M,disabled:N,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(n.A,{size:18})}),(0,a.jsx)("button",{onClick:D,disabled:N,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(i.A,{size:18})})]}):(0,a.jsx)("div",{className:"flex-1",children:e.text})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Last Edited:"}),(0,a.jsx)("div",{className:"w-32 text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"w-20",children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600 ",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>J(e),disabled:N,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>O(e.id),disabled:f,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})})]})]},e.id))]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Question"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this question? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{h(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:f,children:"Cancel"}),(0,a.jsx)("button",{onClick:B,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:f,children:f?"Deleting...":"Delete"})]})]})})]})}},6795:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(5155),r=s(2115),i=s(4616),l=s(4416),n=s(5196),c=s(9917),o=s(2525);function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[j,y]=(0,r.useState)(null),[w,v]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),[E,A]=(0,r.useState)(!1),[I,z]=(0,r.useState)(!1),T=async()=>{try{d(!0),m(null);let e=localStorage.getItem("token"),s=localStorage.getItem("businessId"),a=await fetch("https://wellnexai.com/api/business/getServicesList",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:s})});if(!a.ok)throw Error("Failed to fetch services");let r=await a.json();if(!r.status||200!==r.code)throw Error(r.message||"Failed to fetch services");let i=r.data;if(!Array.isArray(i))throw Error("Invalid response format: expected an array of services");let l=i.map(e=>({id:e._id,name:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(l)}catch(e){m(e instanceof Error?e.message:"An error occurred")}finally{d(!1)}};(0,r.useEffect)(()=>{T()},[]),(0,r.useEffect)(()=>{if(x){let e=setTimeout(()=>m(null),2e3);return()=>clearTimeout(e)}},[x]);let P=e=>{b(e),g(!0)},F=async()=>{if(p)try{h(!0);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e)throw Error("Authentication token not found");let s=await fetch("https://wellnexai.com/api/business/deleteService",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({serviceId:p,businessId:t})}),a=await s.json();if(!a.status||200!==a.code)throw Error(a.message||"Failed to delete service");await T(),g(!1),b(null)}catch(e){console.error("Delete error:",e),m(e instanceof Error?e.message:"Failed to delete service")}finally{h(!1)}},O=e=>{y(e.id),v(e.name)},B=async()=>{if(j&&w.trim())try{S(!0);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e)throw Error("Authentication token not found");let s=await fetch("https://wellnexai.com/api/business/updateOneService",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.trim())},body:JSON.stringify({businessId:t,service:{_id:j,name:w.trim()}})}),a=await s.json();if(!a.status||200!==a.code)throw Error(a.message||"Failed to update service");await T(),y(null),v("")}catch(e){console.error("Update error:",e),m(e instanceof Error?e.message:"Failed to update service")}finally{S(!1)}},J=()=>{y(null),v("")},M=async()=>{if(k.trim()){if(e.some(e=>e.name.toLowerCase()===k.trim().toLowerCase())){m("Service already exists"),C("");return}try{A(!0),m(null);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t)throw Error("Authentication token or business ID not found");let s=await fetch("https://wellnexai.com/api/business/addBusinessServices",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:t,services:[{name:k.trim()}]})}),a=await s.json();if(!a.status||200!==a.code){m(a.message||"Service already exists");return}await T(),C(""),z(!1)}catch(e){m(e instanceof Error?e.message:"Service already exists")}finally{A(!1)}}};return s?(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-8",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[x&&(0,a.jsx)("div",{className:"text-center text-red-600 py-2",children:x}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Services"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Services"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:I?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,a.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:"Enter service name",className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8",disabled:E,onKeyDown:e=>{"Enter"===e.key&&!E&&k.trim()&&M()}}),(0,a.jsx)("button",{onClick:()=>{z(!1),C("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(l.A,{size:14})})]}),(0,a.jsx)("button",{onClick:M,disabled:E||!k.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Adding..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add"})]})})]}):(0,a.jsxs)("button",{onClick:()=>z(!0),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white",children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add Service"})]})})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Services"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),j===e.id?(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:w,onChange:e=>v(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1]",style:{width:"".concat(8*w.length,"px"),minWidth:"100px"},disabled:N}),(0,a.jsx)("button",{onClick:B,disabled:N,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(n.A,{size:18})}),(0,a.jsx)("button",{onClick:J,disabled:N,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(l.A,{size:18})})]}):(0,a.jsx)("div",{className:"flex-1",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Last Edited:"}),(0,a.jsx)("div",{className:"w-32 text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"w-20",children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>O(e),disabled:N,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>P(e.id),disabled:u||N,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})})]})]},e.id))]})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Service"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this service? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{g(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:u,children:"Cancel"}),(0,a.jsx)("button",{onClick:F,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:u,children:u?"Deleting...":"Delete"})]})]})})]})}},7612:(e,t,s)=>{Promise.resolve().then(s.bind(s,5435)),Promise.resolve().then(s.bind(s,5558)),Promise.resolve().then(s.bind(s,6795)),Promise.resolve().then(s.bind(s,5233))},8449:(e,t,s)=>{"use strict";s.d(t,{JR:()=>a,Rn:()=>r,hD:()=>i});let a="https://wellnexai.com/api",r={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")};class i extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var a=s(5155),r=s(2115),i=s(3999);let l=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[4212,3464,4277,1834,8190,8441,1684,7358],()=>t(7612)),_N_E=e.O()}]);