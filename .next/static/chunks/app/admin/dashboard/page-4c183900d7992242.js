(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{1888:(e,t,s)=>{"use strict";s.r(t),s.d(t,{DashboardSearchContext:()=>p,default:()=>f,useDashboardSearch:()=>A});var a=s(5155),r=s(7924),l=s(4783);function i(e){let{onHamburgerClick:t}=e,{searchTerm:s,setSearchTerm:i,isLoading:n}=A();return(0,a.jsxs)("header",{className:"flex h-16 items-center justify-between border-b border-gray-200 bg-white pr-4 md:pr-6",children:[(0,a.jsxs)("div",{className:"relative w-full max-w-[450px] ml-0 md:ml-12 ml-0 lg:ml-6",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,a.jsx)(r.A,{className:"h-5 w-5 ".concat(n?"animate-pulse text-gray-500":"text-gray-400")})}),(0,a.jsx)("input",{type:"text",placeholder:"Search businesses...",value:s,onChange:e=>{i(e.target.value)},disabled:n,className:"w-full rounded-full border border-gray-300 py-2 pl-10 pr-4 focus:border-gray-400 focus:outline-none ".concat(n?"bg-gray-50":"")})]}),(0,a.jsx)("button",{className:"md:hidden ml-2 p-2 rounded-md bg-black text-white shadow-lg",onClick:t,"aria-label":"Open sidebar menu",children:(0,a.jsx)(l.A,{size:24})})]})}var n=s(6874),o=s.n(n),c=s(4416),d=s(7340),u=s(5695),m=s(2115),x=s(6766),h=s(2475);function g(e){let{isOpen:t,onClose:s}=e,r=(0,u.useRouter)(),l=(0,m.useCallback)(async()=>{try{if(!(await fetch("https://wellnexai.com/api/business/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},credentials:"include"})).ok)throw Error("Logout failed");localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie="".concat(t.trim(),"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}),window.location.href="/signin"}catch(e){console.error("Logout error:",e),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie="".concat(t.trim(),"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}),window.location.href="/signin"}},[r]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"\n        fixed md:static\n        top-0 right-0\n        h-full\n        w-[250px] md:w-[193px]\n        flex flex-col\n        bg-white\n        transform transition-transform duration-300 ease-in-out\n         z-40\n        ".concat(t?"translate-x-0":"translate-x-full","\n        md:translate-x-0\n      "),children:[(0,a.jsx)("button",{className:"md:hidden absolute top-4 right-4 z-50 p-2 rounded-md bg-black text-white shadow-lg",onClick:s,children:(0,a.jsx)(c.A,{size:24})}),(0,a.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,a.jsx)(o(),{href:"/dashboard",className:"flex items-center",children:(0,a.jsx)(x.default,{src:h.A,alt:"WellnexAI Logo",width:150,height:200})})}),(0,a.jsx)("div",{className:"flex flex-col px-2 py-2",children:(0,a.jsxs)(o(),{href:"/dashboard",className:"flex items-center gap-2 rounded-md bg-black px-3 py-2 text-white hover:bg-gray-800",onClick:s,children:[(0,a.jsx)(d.A,{size:18}),(0,a.jsx)("span",{children:"Dashboard"})]})}),(0,a.jsx)("button",{onClick:()=>{l(),s()},className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Logout"})]}),t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:s})]})}let p=(0,m.createContext)({searchTerm:"",setSearchTerm:e=>{},isLoading:!1,setIsLoading:e=>{}});function A(){return(0,m.useContext)(p)}function f(e){let{children:t}=e,[s,r]=(0,m.useState)(""),[l,n]=(0,m.useState)(!1),[o,c]=(0,m.useState)(!1);return(0,a.jsx)(p.Provider,{value:{searchTerm:s,setSearchTerm:r,isLoading:l,setIsLoading:n},children:(0,a.jsxs)("div",{className:"flex min-h-screen bg-white overflow-x-hidden w-full",children:[(0,a.jsx)(g,{isOpen:o,onClose:()=>c(!1)}),(0,a.jsx)("div",{className:"hidden md:block w-px bg-gray-200 min-h-screen"}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-screen w-full",children:[(0,a.jsx)(i,{onHamburgerClick:()=>c(!0)}),(0,a.jsx)("main",{className:"flex-1 p-4 sm:p-6 overflow-auto bg-white w-full",children:t})]})]})})}},2033:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a={src:"/_next/static/media/login.5559b244.png",height:543,width:720,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAASFBMVEWtop6SnZmanpu2qKKlmJOcpaGyuLWWoJ2ntLG6vrqIjIq2s6+8xL9+hoTJy8fJvbbN0czl4d2GlJKPlJHBrKfkvrfQpqHKw70+ylNgAAAACnRSTlPv+fnv7/n8/f39K1QhfAAAAAlwSFlzAAALEwAACxMBAJqcGAAAADZJREFUeJwFwQcCgDAIALFTaSnQ6fz/T00oltOedKOuOZ7rVGz1+/WslGkRzZyvj1paOAeAiPw3MwHi9krWdwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6}},2475:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a={src:"/_next/static/media/logo.16f37a8f.png",height:50,width:150,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAFVBMVEUQEBAAAAAFBgUEBAQFBQUGBgYCAgI1vtbjAAAAB3RSTlMCClM3G0puwcAKVQAAAAlwSFlzAAALEwAACxMBAJqcGAAAACBJREFUeJwVyMERADAIwzA7ge4/Mlc9RUdFeEm2Kx34cQLDAC6f5ld0AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2596),r=s(9688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},4032:(e,t,s)=>{Promise.resolve().then(s.bind(s,5916))},5916:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var a=s(5155),r=s(2115),l=s(2085),i=s(3999);let n=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:s}),t),...r})}var c=s(8482);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",s),...r})})});d.displayName="Table";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",s),...r})});u.displayName="TableHeader";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",s),...r})});m.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});x.displayName="TableRow";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});h.displayName="TableHead";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});g.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";var p=s(2841);let A=p.bL,f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(p.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});f.displayName=p.B8.displayName;let b=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(p.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});b.displayName=p.l9.displayName;let y=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(p.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});y.displayName=p.UC.displayName;var j=s(9917),v=s(2525),w=s(6766);let N=e=>{let{value:t,label:s,icon:r,imageSrc:l,color:i="blue"}=e;return(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-[#6B7280] mt-1",children:s}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:t})]}),(0,a.jsx)("div",{className:"p-3 rounded-full",children:l?(0,a.jsx)(w.default,{src:l,alt:s,width:40,height:40,className:"object-contain"}):r})]})})})},C={src:"/_next/static/media/leads.1e8a39fe.png",height:45,width:45,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAM1BMVEXd3d3c3NzGxsZ1dXXX19fb29tgYGDT09Pb29tMaXHh4eHt7e0AAAAtLS0yMjI+Pj6lpaXoRASWAAAACnRSTlPxK/n++LD5LLMAtDgl5gAAAAlwSFlzAAALEwAACxMBAJqcGAAAADpJREFUeJxFyjECwCAIA8BoQSBB7f9f27E3H2qkWUYhIFIIuNbeSw7wdB8C4O2+BFLzeaf8zxVu5qM+RSIB4WgciVMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},S={src:"/_next/static/media/intercation.4b670d2d.png",height:45,width:46,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAGFBMVEUcWeE4cf8eWeAhX+YaU9kkYuokYuokYupybYf9AAAACHRSTlMVAxs1EIvErpEFjYYAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicFcu3DQAwEMQwnT7tv7Hhjg1JUBLih4GeqgGouzs/ZncK6NqthihoftROHhRCAJR3yCnwAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},E=()=>{var e,t;let[s,l]=(0,r.useState)(null),[i,n]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{n(!0),c(null);try{var e,t,s,a;let r=localStorage.getItem("token"),i=await fetch("https://wellnexai.com/api/admin/lead-counts",{headers:{Authorization:"Bearer ".concat(r)}});if(!i.ok)throw Error("Failed to fetch stats");let n=await i.json();l({leads:null!==(s=null===(e=n.data)||void 0===e?void 0:e.totalLeads)&&void 0!==s?s:0,userInteraction:null!==(a=null===(t=n.data)||void 0===t?void 0:t.totalBusiness)&&void 0!==a?a:0})}catch(e){c(e.message||"Unknown error")}finally{n(!1)}})()},[]),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6 lg:gap-8 max-w-6xl mx-auto",children:[(0,a.jsx)(N,{value:i?"...":String(null!==(e=null==s?void 0:s.leads)&&void 0!==e?e:0),label:"Number of Leads",imageSrc:C}),(0,a.jsx)(N,{value:i?"...":String(null!==(t=null==s?void 0:s.userInteraction)&&void 0!==t?t:0),label:"Total businesses",imageSrc:S}),o&&(0,a.jsx)("div",{className:"col-span-full text-red-500 text-center",children:o})]})},k=e=>{let{type:t,count:s,label:r,description:l,icon:n,imageSrc:o}=e;return(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{className:"flex flex-row p-2",children:[o?(0,a.jsx)(w.default,{src:o,alt:r,width:28,height:28,className:"object-contain"}):n,(0,a.jsx)(c.ZB,{className:(0,i.cn)("ml-2 text-base font-medium",{active:"text-[#19B100]",pending:"text-[#FF6F00]",canceled:"text-[#DC2626]","canceled at period end":"text-[#DC2626]"}[t]),children:r})]}),(0,a.jsxs)(c.Wu,{className:"pl-2",children:[(0,a.jsxs)("div",{className:"text-xl",children:["Count: ",s]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:l})]})]})};var D=s(7489);let B=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:l=!0,...n}=e;return(0,a.jsx)(D.b,{ref:t,decorative:l,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...n})});B.displayName=D.b.displayName;let R=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[o,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(1),[x,h]=(0,r.useState)(1),[g,p]=(0,r.useState)(0),A=Math.min(2*u,g);(0,r.useEffect)(()=>{(async()=>{try{n(!0),d(null);let e=await fetch("https://wellnexai.com/api/admin/subscriptions/payments?limit=25&skip=0&status=paid",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),t=await e.json();if(!0===t.status){l(t.data.payments);let e=t.data.total||t.data.payments.length;p(e),h(Math.ceil(e/2))}else d("Failed to fetch payments")}catch(e){console.error("Error fetching payments:",e),d("An error occurred while fetching payments")}finally{n(!1)}})()},[]),(0,r.useEffect)(()=>{let e=(u-1)*2;t(s.slice(e,e+2))},[u,s]);let f=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase()}).format(e);return(0,a.jsxs)(c.Zp,{className:"w-full max-w-6xl mx-auto",children:[(0,a.jsx)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(c.ZB,{className:"text-base font-medium",children:"Payments"})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Recent Transactions"})}),(0,a.jsx)("div",{className:"mt-4 space-y-4",children:i?(0,a.jsx)("div",{className:"text-center py-4",children:"Loading..."}):o?(0,a.jsx)("div",{className:"text-center py-4 text-red-500",children:o}):0===e.length?(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No payments found"}):e.map((t,s)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-sm font-medium",children:t.customer.name||"N/A"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:t.customer.email})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:b(t.amount,t.currency)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:f(t.created)})]})]}),s!==e.length-1&&(0,a.jsx)(B,{className:"my-4"})]},t.number))}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:["Showing ",(u-1)*2+1," to ",A," of ",g," payments"]}),(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:(()=>{let e=[],t=Math.max(1,u-Math.floor(2.5)),s=Math.min(x,t+5-1);s-t+1<5&&(t=Math.max(1,s-5+1)),e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:1===u,onClick:()=>m(e=>Math.max(1,e-1)),children:"Previous"},"prev")),t>1&&(e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded border hover:bg-gray-50",onClick:()=>m(1),children:"1"},1)),t>2&&e.push((0,a.jsx)("span",{className:"px-2",children:"..."},"ellipsis1")));for(let r=t;r<=s;r++)e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded ".concat(u===r?"bg-black text-white":"border hover:bg-gray-50"),onClick:()=>m(r),children:r},r));return s<x&&(s<x-1&&e.push((0,a.jsx)("span",{className:"px-2",children:"..."},"ellipsis2")),e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded border hover:bg-gray-50",onClick:()=>m(x),children:x},x))),e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u===x,onClick:()=>m(e=>Math.min(x,e+1)),children:"Next"},"next")),e})()})]})]})]})},F={src:"/_next/static/media/activeSubscription.b65bec82.png",height:34,width:34,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEUXrgAZsQAftwAZtAAZtQAZsQAZsQAbsAAatgAQ6bx4AAAACXRSTlMBgg46VxudKmkjOq/hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nD2KyQnAQBCAdM7tv+KwCcSPIAIRvKTWdRuYNxyoIsBct6RnnDyN+30/DxCBAH+MN4V5AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},U={src:"/_next/static/media/paused.1da65c7d.png",height:34,width:35,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAKlBMVEVMaXH/bgD/cAD/cAD/dAD/cQD/bwD/cgD/bgD/bgD/bwD/bgD/cAD/fQC3FdWYAAAADnRSTlMAKfTLEjid2WhU5ZY9BDvimG8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAzSURBVHicLcvHEQAgDANBOQfov14Ggz63HwEAEWYU8STdcqvsyTrINdgswgbAyr0u/v0AFf8AqzjYmrIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},T={src:"/_next/static/media/cancel.51686449.png",height:34,width:34,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEXcJibfJibbJydMaXH/AADbJibbJibWKCjeKCjdJibHcviiAAAACnRSTlNQPCAAAX16DBiYQI4C2AAAAAlwSFlzAAALEwAACxMBAJqcGAAAADNJREFUeJxFy0EKACAQw8C0dVf9/4fFg3gLDGHE4AxCS0VwaS21QXPvKX64L5UJJTXh7QcdiADRvhezjwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8};var M=s(8449);class z{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseUrl).concat(e);if(t.params){let e=new URLSearchParams;Object.entries(t.params).forEach(t=>{let[s,a]=t;null!=a&&e.append(s,a.toString())});let a=e.toString();a&&(s+="?".concat(a))}let a={...this.headers,...t.headers};try{let e=await fetch(s,{...t,headers:a}),r=await e.json();if(!e.ok)throw new M.hD(e.status,r.message||"An error occurred");return{data:r,status:e.status}}catch(e){if(e instanceof M.hD)throw e;throw new M.hD(500,"Network error occurred")}}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(e,{...t,method:"GET"})}async post(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(e,{...s,method:"POST",body:JSON.stringify(t)})}async put(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(e,{...s,method:"PUT",body:JSON.stringify(t)})}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(e,{...t,method:"DELETE"})}setAuthToken(e){this.headers.Authorization="Bearer ".concat(e)}clearAuthToken(){delete this.headers.Authorization}constructor(e=M.JR,t=M.Rn){this.baseUrl=e,this.headers=t}}let L=new z,I={business:{getBusinessDetails:()=>L.get("/business/getBusinessDetail"),getBusinessList:e=>L.get("/admin/getBusinessList",{params:{limit:e.limit||10,skip:e.skip||0,sort:e.sort||"name",sort_order:e.sort_order||-1,search:e.search||""}})}};var J=s(1888),P=s(2033);let O=()=>{var e,t,s,l;let{searchTerm:i}=(0,J.useDashboardSearch)(),[n,p]=(0,r.useState)([]),[w,N]=(0,r.useState)([]),[C,S]=(0,r.useState)(!0),[D,B]=(0,r.useState)(null),[M,z]=(0,r.useState)(1),[L,O]=(0,r.useState)(0),[V,Q]=(0,r.useState)({active:0,paused:0,cancelled:0,total:0,cancelAtPeriodEndCount:0}),[G,_]=(0,r.useState)(!1),[H,K]=(0,r.useState)(!1),[W,q]=(0,r.useState)(null),[Z,Y]=(0,r.useState)(!1),[X,$]=(0,r.useState)(null),[ee,et]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(!1),[er,el]=(0,r.useState)(""),ei=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return new Promise((a,r)=>{let l=document.createElement("canvas"),i=l.getContext("2d"),n=new Image;n.onload=()=>{let{width:o,height:c}=n;o>t&&(c=c*t/o,o=t),l.width=o,l.height=c,null==i||i.drawImage(n,0,0,o,c),l.toBlob(t=>{t?a(new File([t],e.name,{type:"image/png",lastModified:Date.now()})):r(Error("Failed to compress image"))},"image/png",s)},n.onerror=()=>r(Error("Failed to load image")),n.src=URL.createObjectURL(e)})};(0,r.useEffect)(()=>{en()},[]);let en=async()=>{try{let e=await fetch("https://wellnexai.com/api/admin/subscriptions/counts",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),t=await e.json();!0===t.status&&Q(t.data)}catch(e){console.error("Error fetching subscription counts:",e)}},eo=async()=>{try{var e,t;S(!0);let s=await I.business.getBusinessList({limit:1e3,skip:0,sort:"name",sort_order:-1});if(null==s?void 0:null===(t=s.data)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.businesses){let e=s.data.data.businesses;p(e),O(s.data.data.totalDocs)}else p([]),O(0)}catch(e){B("Failed to fetch business list"),console.error("Error fetching business list:",e),p([]),O(0)}finally{S(!1)}};(0,r.useEffect)(()=>{eo()},[]),(0,r.useEffect)(()=>{let e=n.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())||e.contact_name.toLowerCase().includes(i.toLowerCase()));N(e),O(e.length)},[i,n]);let ec=Math.ceil(L/5),ed=Math.min(5*M,L),eu=e=>{q(e),_(!0)},em=async()=>{if(W)try{K(!0);let e=localStorage.getItem("token");if(!e){alert("Authentication information missing. Please login again.");return}let t=await fetch("https://wellnexai.com/api/admin/business/".concat(W),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({reason:"testing"})}),s=await t.json();t.ok&&s.status?(p(e=>e.filter(e=>e._id!==W)),N(e=>e.filter(e=>e._id!==W)),_(!1),q(null),en()):alert(s.message||"Failed to delete business")}catch(e){console.error("Error deleting business:",e),alert("Failed to delete business. Please try again.")}finally{K(!1)}},ex=e=>{$(e),Y(!0)},eh=async e=>{if(X)try{et(!0);let t=localStorage.getItem("token");if(!t){alert("Authentication information missing. Please login again.");return}let s=await fetch("https://wellnexai.com/api/business/updateBusinessDetail",{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();s.ok&&a.status?(el(a.message||"Business information has been updated successfully."),ea(!0),setTimeout(()=>{ea(!1),el(""),Y(!1),$(null)},3e3),window.location.reload()):alert(a.message||"Failed to update business")}catch(e){console.error("Error updating business:",e),alert("Failed to update business. Please try again.")}finally{et(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,r.useMemo)(()=>(0,a.jsx)(E,{}),[n.length]),(0,a.jsx)(c.Zp,{className:"mt-8",children:(0,a.jsx)("div",{className:"p-4 sm:p-6",children:(0,a.jsxs)(A,{defaultValue:"profiles",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between mb-4 gap-2 w-full max-w-full",children:[(0,a.jsx)(f,{className:"flex-shrink-0",children:(0,a.jsx)(b,{value:"profiles",children:"Business Profiles"})}),(0,a.jsxs)(o,{variant:"outline",className:"flex-shrink-0 whitespace-nowrap bg-gray-100 text-[#000000]",children:[L," Users"]})]}),(0,a.jsxs)(y,{value:"profiles",children:[(0,a.jsx)("div",{className:"overflow-x-auto w-full",children:(0,a.jsxs)(d,{className:"min-w-full",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(h,{children:"Business Name"}),(0,a.jsx)(h,{children:"Email"}),(0,a.jsx)(h,{children:"Subscription Status"}),(0,a.jsx)(h,{children:"Services Offered"}),(0,a.jsx)(h,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(m,{children:C?(0,a.jsx)(x,{children:(0,a.jsx)(g,{colSpan:5,className:"text-center py-4",children:"Loading..."})}):D?(0,a.jsx)(x,{children:(0,a.jsx)(g,{colSpan:5,className:"text-center py-4 text-red-500",children:D})}):0===w.length?(0,a.jsx)(x,{children:(0,a.jsx)(g,{colSpan:5,className:"text-center py-4",children:"No businesses found"})}):(()=>{let e=(M-1)*5;return w.slice(e,e+5)})().map(e=>(0,a.jsxs)(x,{children:[(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.logo?(0,a.jsx)("img",{src:"https://wellnexai.com/uploads/business-logos/".concat(e.logo),alt:"".concat(e.name," logo"),className:"w-8 h-8 rounded-full object-cover"}):(0,a.jsx)("img",{src:P.A.src,alt:"Default logo",className:"w-8 h-8 rounded-full object-cover"}),(0,a.jsx)("span",{children:e.name})]})}),(0,a.jsx)(g,{className:"text-gray-600",children:e.email}),(0,a.jsx)(g,{children:e.subscriptionDetail?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{variant:"outline",className:"".concat("active"===e.subscriptionDetail.status?"bg-green-50 text-green-600 border-green-200":"bg-red-50 text-red-600 border-red-200"),children:"active"===e.subscriptionDetail.status&&e.subscriptionDetail.cancelAtPeriodEnd?"Cancels At Period End":e.subscriptionDetail.status.charAt(0).toUpperCase()+e.subscriptionDetail.status.slice(1)}),e.subscriptionDetail.cancelAtPeriodEnd&&"active"===e.subscriptionDetail.status&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(at ",new Date(e.subscriptionDetail.currentPeriodEnd).toLocaleDateString(),")"]})]}),"applied"===e.subscriptionDetail.specialOfferStatus&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Special Offer Applied)"})]})]}):(0,a.jsx)(o,{variant:"outline",className:"bg-gray-50 text-gray-600 border-gray-200",children:"No Subscription"})}),(0,a.jsx)(g,{children:(0,a.jsx)("div",{className:"flex flex-col gap-1",children:e.services&&e.services.length>0?e.services.map((e,t)=>(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.name},e._id)):(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"No services"})})}),(0,a.jsx)(g,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>ex(e),children:(0,a.jsx)(j.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>eu(e._id),children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]})})]},e._id))})]})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Showing ",(M-1)*5+1," to ",ed," of ",L," businesses"]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(()=>{let e=[],t=Math.max(1,M-Math.floor(2.5)),s=Math.min(ec,t+5-1);s-t+1<5&&(t=Math.max(1,s-5+1)),e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:1===M,onClick:()=>z(M-1),children:"Previous"},"prev")),t>1&&(e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded border hover:bg-gray-50",onClick:()=>z(1),children:"1"},"1")),t>2&&e.push((0,a.jsx)("span",{className:"px-2",children:"..."},"ellipsis1")));for(let r=t;r<=s;r++)e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded ".concat(M===r?"bg-black text-white":"border hover:bg-gray-50"),onClick:()=>z(r),children:r},r));return s<ec&&(s<ec-1&&e.push((0,a.jsx)("span",{className:"px-2",children:"..."},"ellipsis2")),e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded border hover:bg-gray-50",onClick:()=>z(ec),children:ec},ec))),e.push((0,a.jsx)("button",{className:"px-3 py-1 text-sm rounded border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:M===ec,onClick:()=>z(M+1),children:"Next"},"next")),e})()})]})]}),(0,a.jsx)(y,{value:"users",children:(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Users tab content will appear here"})})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-12 mt-8",children:[(0,a.jsx)(k,{type:"active",count:V.active,label:"Active Subscriptions",description:"Businesses currently utilizing services with active billing cycles.",color:"green",imageSrc:F}),(0,a.jsx)(k,{type:"pending",count:V.paused,label:"Paused Subscriptions",description:"Businesses that have temporarily suspended their subscriptions",color:"amber",imageSrc:U}),(0,a.jsx)(k,{type:"canceled",count:V.cancelled,label:"Canceled Subscriptions",description:"Businesses that have terminated their subscriptions.",color:"red",imageSrc:T}),(0,a.jsx)(k,{type:"canceled at period end",count:V.cancelAtPeriodEndCount,label:"Cancels At Period End",description:"Businesses currently utilizing services with active subcriptions and will cancel at the end of their billing cycle.",color:"red",imageSrc:T})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8",children:(0,a.jsx)(R,{})}),G&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Business"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this business? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{_(!1),q(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:H,children:"Cancel"}),(0,a.jsx)("button",{onClick:em,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:H,children:H?"Deleting...":"Delete"})]})]})}),Z&&X&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-xl p-8 max-w-lg w-full",children:es?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-green-600 text-2xl mb-2",children:"âœ“"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Success!"}),(0,a.jsx)("p",{className:"text-gray-600",children:er})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-8 text-gray-900",children:"Update Information"}),(0,a.jsxs)("form",{onSubmit:async e=>{var t,s,a,r;e.preventDefault();let l=new FormData(e.currentTarget),i=X.logo,n=l.get("logo");if(n&&n instanceof File&&n.size>0){if(console.log("File details:",{name:n.name,size:n.size,type:n.type,sizeInMB:(n.size/1048576).toFixed(2)}),!n.type.includes("png")){alert("Please upload a PNG file only");return}try{let e;let t=await ei(n);if(console.log("Compressed file details:",{name:t.name,size:t.size,type:t.type,sizeInMB:(t.size/1048576).toFixed(2),compressionRatio:((1-t.size/n.size)*100).toFixed(1)+"%"}),t.size>1048576){alert("File is still too large after compression (".concat((t.size/1048576).toFixed(2),"MB). Please use a smaller image."));return}let a=new FormData;a.append("logo",t),a.append("businessId",X._id);let r=localStorage.getItem("token");if(!r){alert("Authentication token missing. Please login again.");return}console.log("Uploading file...",{businessId:X._id,fileSize:t.size,formDataEntries:Array.from(a.entries())});try{e=await fetch("https://wellnexai.com/api/business/updateBusinessDetail",{method:"PUT",headers:{Authorization:"Bearer ".concat(r)},body:a})}catch(e){console.error("Fetch error:",e),alert("Upload failed. Please try with a smaller image or contact support.");return}if(console.log("Upload response:",{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())}),413===e.status){alert("File size too large for server. Please try with an even smaller image (max 1MB) or compress your image further.");return}if(!e.ok){let t="Upload failed: ".concat(e.status," ").concat(e.statusText);try{let s=await e.text();console.error("Error response body:",s);try{let e=JSON.parse(s);e.message&&(t=e.message)}catch(e){s&&(t+=" - ".concat(s))}}catch(e){console.error("Could not read error response:",e)}alert(t);return}let l=e.headers.get("content-type");if(!l||!l.includes("application/json")){let t=await e.text();throw console.error("Non-JSON Response:",t),Error("Expected JSON response but got ".concat(l))}let o=await e.json();if(console.log("Upload success data:",o),o.status&&(null===(s=o.data)||void 0===s?void 0:s.logo))i=o.data.logo;else throw Error("Invalid response format from server")}catch(e){console.error("Error uploading logo:",e),e instanceof Error&&e.message.includes("413")?alert("File size too large. Please use a smaller image (max 1MB)."):alert("Failed to upload logo: ".concat(e instanceof Error?e.message:"Unknown error"));return}}let o=[];for(let e=0;e<((null===(t=X.questions)||void 0===t?void 0:t.length)||0);e++){let t=l.get("question_".concat(e));t&&"string"==typeof t&&""!==t.trim()&&o.push({name:t,_id:null===(r=X.questions)||void 0===r?void 0:null===(a=r[e])||void 0===a?void 0:a._id})}let c=(l.get("services")||"").split(",").map(e=>({name:e.trim()})).filter(e=>e.name);eh({businessId:X._id,name:l.get("name"),email:l.get("email"),logo:i,subscriptionStatus:l.get("subscriptionStatus"),services:c,questions:o})},encType:"multipart/form-data",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),(0,a.jsx)("input",{type:"text",name:"name",defaultValue:X.name,className:"block w-full rounded-md border border-gray-200 focus:border-[#987CF1] focus:ring-[#987CF1] focus:ring-1 py-2 px-3 text-base"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"email",defaultValue:X.email,className:"block w-full rounded-md border border-gray-200 focus:border-[#987CF1] focus:ring-[#987CF1] focus:ring-1 py-2 px-3 text-base"})]})]}),(0,a.jsx)("hr",{className:"my-4"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[X.logo&&(0,a.jsx)("img",{src:"https://wellnexai.com/uploads/business-logos/".concat(X.logo),alt:"Current Logo",className:"w-16 h-16 rounded-full object-cover mb-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo"}),(0,a.jsx)("input",{type:"file",name:"logo",accept:".png",className:"block w-full text-sm text-gray-700"})]})]}),(0,a.jsx)("hr",{className:"my-4"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subscription Status"}),(0,a.jsxs)("select",{name:"subscriptionStatus",defaultValue:(null===(e=X.subscriptionDetail)||void 0===e?void 0:e.status)==="canceled"?"canceledImmediately":(null===(t=X.subscriptionDetail)||void 0===t?void 0:t.status)==="active"&&(null===(s=X.subscriptionDetail)||void 0===s?void 0:s.cancelAtPeriodEnd)?"canceled":(null===(l=X.subscriptionDetail)||void 0===l?void 0:l.status)||"active",className:"block w-full rounded-md border border-gray-200 focus:border-[#987CF1] focus:ring-[#987CF1] focus:ring-1 py-2 px-3 text-base",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"paused",children:"Paused"}),(0,a.jsx)("option",{value:"canceled",children:"Cancel At Period End"}),(0,a.jsx)("option",{value:"canceledImmediately",children:"Canceled Immediately"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Services Offered"}),(0,a.jsx)("input",{type:"text",name:"services",defaultValue:X.services.map(e=>e.name).join(", "),className:"block w-full rounded-md border border-gray-200 focus:border-[#987CF1] focus:ring-[#987CF1] focus:ring-1 py-2 px-3 text-base"})]})]}),(0,a.jsx)("hr",{className:"my-4"}),(0,a.jsxs)("details",{className:"mb-2",children:[(0,a.jsx)("summary",{className:"cursor-pointer font-medium text-[#987CF1]",children:"Questions (click to expand)"}),(0,a.jsx)("div",{className:"space-y-2 mt-2",children:(X.questions||[]).map((e,t)=>(0,a.jsx)("input",{type:"text",name:"question_".concat(t),defaultValue:e.name,className:"block w-full rounded-md border border-gray-200 focus:border-[#987CF1] focus:ring-[#987CF1] focus:ring-1 py-2 px-3 text-base"},e._id))})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-end gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{Y(!1),$(null)},className:"px-6 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 font-medium",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-2 rounded-lg bg-black text-white font-medium",disabled:ee,children:ee?"Saving...":"Update"})]})]})]})})})]})}},8449:(e,t,s)=>{"use strict";s.d(t,{JR:()=>a,Rn:()=>r,hD:()=>l});let a="https://wellnexai.com/api",r={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")};class l extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}},8482:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n});var a=s(5155),r=s(2115),l=s(3999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"}},e=>{var t=t=>e(e.s=t);e.O(0,[4212,95,4277,1445,6509,8441,1684,7358],()=>t(4032)),_N_E=e.O()}]);