(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{8415:(e,t,r)=>{Promise.resolve().then(r.bind(r,9260))},9260:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var l=r(5155),a=r(2115),s=r(5695),o=r(7368),c=r(5855),n=r(6766);let i={src:"/_next/static/media/card.92aa621d.png",height:254,width:432,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAATlBMVEX3npa/2fnstbvT5ffnqbL2n5fusbWoSNjwoaDF4vnezNbfv9i7ctbpnanU2unWpM/bmryvYt25W8rThLLjiKi5uPDCgdbQiby2kOfppK0X8SnPAAAACHRSTlP7/////////ZnFPQIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicBcEHAgAQDASwQ9Ham/+/VAIlovbrHsaEelIakOhcu3OhRK2J2CJQZmaLDyaTAZEL1GiwAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},d=(0,o.c)("pk_test_51RWxeYKNtFSSZren07ctBc5KRh4LA2msrroYkJpDR27nEAycVYvPQXEpfeXTxOD5LJFLZ0SiMkz4oELE0XqRqVII00JhHtSzdo");function m(e){let{priceId:t}=e,r=(0,c.useStripe)(),o=(0,c.useElements)(),d=(0,s.useRouter)(),[m,u]=(0,a.useState)(""),[b,x]=(0,a.useState)(""),[f,h]=(0,a.useState)(""),[p,A]=(0,a.useState)(!1),[g,y]=(0,a.useState)(null),[E,w]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=localStorage.getItem("planCurrency"),t=localStorage.getItem("planAmount");w("".concat(e," ").concat(t))},[]);let N=async e=>{e.preventDefault(),y(null),A(!0);try{if(!r||!o)throw Error("Stripe not loaded");let e=localStorage.getItem("token");if(!e)throw Error("Authentication required. Please login first.");let l=o.getElement(c.CardNumberElement);if(!l)throw Error("Card element not found");let{error:a,paymentMethod:s}=await r.createPaymentMethod({type:"card",card:l,billing_details:{name:m}});if(a)throw Error(a.message||"Payment error");if(!(null==s?void 0:s.id))throw Error("Failed to create payment method");let n=await fetch("https://wellnexai.com/api/subscription/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({paymentMethodId:s.id,priceId:t})}),i=await n.json();if(!n.ok)throw Error(i.message||"Payment failed");if(i.error)throw Error(i.error);d.push("/payment/success")}catch(e){console.error("Subscription error:",e),y(e instanceof Error?e.message:"Failed to create subscription")}finally{A(!1)}};return(0,l.jsxs)("form",{onSubmit:N,className:"bg-white rounded-2xl shadow-lg px-8 py-6 w-full max-w-[500px] flex flex-col items-center",children:[(0,l.jsx)(n.default,{src:i,alt:"Card Preview",width:400,height:140,className:"mb-6 rounded-xl shadow-md"}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"mb-1 font-semibold text-[#181D27] text-lg",children:"Payment"}),(0,l.jsx)("div",{className:"mb-4 text-sm text-[#535862]",children:"Card details."}),(0,l.jsxs)("div",{className:"flex w-full gap-4 mb-3",children:[(0,l.jsxs)("div",{className:"flex-[3]",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Name on card"}),(0,l.jsx)("input",{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",value:m,onChange:e=>u(e.target.value),required:!0})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Expiry"}),(0,l.jsx)(c.CardExpiryElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",onChange:e=>h(e.complete?e.value:""),options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"1.5","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]}),(0,l.jsxs)("div",{className:"flex w-full gap-4 mb-1",children:[(0,l.jsxs)("div",{className:"flex-[3]",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Card number"}),(0,l.jsx)(c.CardNumberElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",onChange:e=>x(e.complete?e.value:""),options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"CVV"}),(0,l.jsx)(c.CardCvcElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]})]}),g&&(0,l.jsx)("div",{className:"text-red-500 mt-3 text-base w-full text-center",children:g}),(0,l.jsx)("div",{className:"flex w-full mt-6 gap-3",children:(0,l.jsx)("button",{type:"submit",className:"flex-1 py-2.5 rounded-md bg-black text-white font-semibold text-base",disabled:p,children:p?"Processing...":"Pay ".concat(E)})})]})}function u(e){let{priceId:t}=e;return(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-[#F5F5F5]",children:(0,l.jsx)(c.Elements,{stripe:d,children:(0,l.jsx)(m,{priceId:t})})})}let b=(0,o.c)("pk_test_51RWxeYKNtFSSZren07ctBc5KRh4LA2msrroYkJpDR27nEAycVYvPQXEpfeXTxOD5LJFLZ0SiMkz4oELE0XqRqVII00JhHtSzdo");function x(){let[e,t]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=localStorage.getItem("priceId");e&&t(e)},[]),(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,l.jsx)(c.Elements,{stripe:b,children:(0,l.jsx)(u,{priceId:e})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4212,1834,8441,1684,7358],()=>t(8415)),_N_E=e.O()}]);