(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{8415:(e,t,l)=>{Promise.resolve().then(l.bind(l,9260))},9260:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>x});var r=l(5155),a=l(2115),s=l(5695),n=l(7368),o=l(5855),c=l(6766);let i={src:"/_next/static/media/card.92aa621d.png",height:254,width:432,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAATlBMVEX3npa/2fnstbvT5ffnqbL2n5fusbWoSNjwoaDF4vnezNbfv9i7ctbpnanU2unWpM/bmryvYt25W8rThLLjiKi5uPDCgdbQiby2kOfppK0X8SnPAAAACHRSTlP7/////////ZnFPQIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicBcEHAgAQDASwQ9Ham/+/VAIlovbrHsaEelIakOhcu3OhRK2J2CJQZmaLDyaTAZEL1GiwAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},d=(0,n.c)("pk_test_51LuNV2E2Y7YLkjxVuaZ1F13llOwUjsRcrodK7nbLAxmqxcnKqjnWxlc83V53bnFdnWOSW07fvBQjEmKXp2ChPXNo004z40bvvz");function m(e){let{priceId:t}=e,l=(0,o.useStripe)(),n=(0,o.useElements)(),d=(0,s.useRouter)(),[m,u]=(0,a.useState)(""),[b,x]=(0,a.useState)(""),[f,h]=(0,a.useState)(""),[p,g]=(0,a.useState)(!1),[A,j]=(0,a.useState)(null),[v,w]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=localStorage.getItem("planCurrency"),t=localStorage.getItem("planAmount");w("".concat(e," ").concat(t))},[]);let y=async e=>{e.preventDefault(),j(null),g(!0);try{if(!l||!n)throw Error("Stripe not loaded");let e=localStorage.getItem("token");if(!e)throw Error("Authentication required. Please login first.");let r=n.getElement(o.CardNumberElement);if(!r)throw Error("Card element not found");let{error:a,paymentMethod:s}=await l.createPaymentMethod({type:"card",card:r,billing_details:{name:m}});if(a)throw Error(a.message||"Payment error");if(!(null==s?void 0:s.id))throw Error("Failed to create payment method");let c=await fetch("https://wellnexai.com/api/subscription/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({paymentMethodId:s.id,priceId:t})}),i=await c.json();if(!c.ok)throw Error(i.message||"Payment failed");if(i.error)throw Error(i.error);d.push("/payment/success")}catch(e){console.error("Subscription error:",e),j(e instanceof Error?e.message:"Failed to create subscription")}finally{g(!1)}};return(0,r.jsxs)("form",{onSubmit:y,className:"bg-white rounded-2xl shadow-lg px-8 py-6 w-full max-w-[500px] flex flex-col items-center",children:[(0,r.jsx)(c.default,{src:i,alt:"Card Preview",width:400,height:140,className:"mb-6 rounded-xl shadow-md"}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"mb-1 font-semibold text-[#181D27] text-lg",children:"Payment"}),(0,r.jsx)("div",{className:"mb-4 text-sm text-[#535862]",children:"Card details."}),(0,r.jsxs)("div",{className:"flex w-full gap-4 mb-3",children:[(0,r.jsxs)("div",{className:"flex-[3]",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Name on card"}),(0,r.jsx)("input",{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",value:m,onChange:e=>u(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Expiry"}),(0,r.jsx)(o.CardExpiryElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",onChange:e=>h(e.complete?e.value:""),options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"1.5","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]}),(0,r.jsxs)("div",{className:"flex w-full gap-4 mb-1",children:[(0,r.jsxs)("div",{className:"flex-[3]",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Card number"}),(0,r.jsx)(o.CardNumberElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",onChange:e=>x(e.complete?e.value:""),options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"CVV"}),(0,r.jsx)(o.CardCvcElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]})]}),A&&(0,r.jsx)("div",{className:"text-red-500 mt-3 text-base w-full text-center",children:A}),(0,r.jsx)("div",{className:"flex w-full mt-6 gap-3",children:(0,r.jsx)("button",{type:"submit",className:"flex-1 py-2.5 rounded-md bg-black text-white font-semibold text-base",disabled:p,children:p?"Processing...":"Pay ".concat(v)})})]})}function u(e){let{priceId:t}=e;return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-[#F5F5F5]",children:(0,r.jsx)(o.Elements,{stripe:d,children:(0,r.jsx)(m,{priceId:t})})})}let b=(0,n.c)("pk_test_51LuNV2E2Y7YLkjxVuaZ1F13llOwUjsRcrodK7nbLAxmqxcnKqjnWxlc83V53bnFdnWOSW07fvBQjEmKXp2ChPXNo004z40bvvz");function x(){let[e,t]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=localStorage.getItem("priceId");e&&t(e)},[]),(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,r.jsx)(o.Elements,{stripe:b,children:(0,r.jsx)(u,{priceId:e})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4212,1834,8441,1684,7358],()=>t(8415)),_N_E=e.O()}]);