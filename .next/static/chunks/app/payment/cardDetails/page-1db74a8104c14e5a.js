(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{8415:(e,t,a)=>{Promise.resolve().then(a.bind(a,9260))},9260:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(5155),l=a(2115),s=a(5695),o=a(7368),i=a(5855),n=a(6766);let c={src:"/_next/static/media/card.92aa621d.png",height:254,width:432,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAATlBMVEX3npa/2fnstbvT5ffnqbL2n5fusbWoSNjwoaDF4vnezNbfv9i7ctbpnanU2unWpM/bmryvYt25W8rThLLjiKi5uPDCgdbQiby2kOfppK0X8SnPAAAACHRSTlP7/////////ZnFPQIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicBcEHAgAQDASwQ9Ham/+/VAIlovbrHsaEelIakOhcu3OhRK2J2CJQZmaLDyaTAZEL1GiwAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},d=(0,o.c)("pk_live_51RWxeYKNtFSSZren3RvfWemc9SNJfkCC8VJDGkcMhFZ0zRzL1iMAzVRkkH3qRScQM2AalyEcx7feSx6rFGMlj0sL00ow76aVLu");function m(e){let{priceId:t}=e,a=(0,i.useStripe)(),o=(0,i.useElements)(),d=(0,s.useRouter)(),[m,u]=(0,l.useState)(""),[b,f]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[p,g]=(0,l.useState)(!1),[A,y]=(0,l.useState)(null),[S,v]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=localStorage.getItem("planCurrency"),t=localStorage.getItem("planAmount");v("".concat(e," ").concat(t))},[]);let w=async e=>{e.preventDefault(),y(null),g(!0);try{if(!a||!o)throw Error("Stripe not loaded");let e=localStorage.getItem("token");if(!e)throw Error("Authentication required. Please login first.");let l=o.getElement(i.CardNumberElement);if(!l)throw Error("Card element not found");let{error:s,paymentMethod:n}=await a.createPaymentMethod({type:"card",card:l,billing_details:{name:m}});if(s)throw Error(s.message||"Payment error");if(!(null==n?void 0:n.id))throw Error("Failed to create payment method");let c=await fetch("https://wellnexai.com/api/subscription/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({paymentMethodId:n.id,priceId:t})}),u=await c.json();if(!c.ok)throw Error(u.message||"Payment failed");if(u.error)throw Error(u.error);let{error:b,paymentIntent:f}=await a.confirmCardPayment(u.clientSecret);if(b){var r;console.error("Payment failed:",b.message),y(null!==(r=b.message)&&void 0!==r?r:"Payment failed. Try Again.")}else f&&"succeeded"===f.status?d.push("/payment/success"):f?y("Subscription Status is "+(null==f?void 0:f.status)):y("Payment failed. Try Again.")}catch(e){console.error("Subscription error:",e),y(e instanceof Error?e.message:"Failed to create subscription")}finally{g(!1)}};return(0,r.jsxs)("form",{onSubmit:w,className:"bg-white rounded-2xl shadow-lg px-8 py-6 w-full max-w-[500px] flex flex-col items-center",children:[(0,r.jsx)(n.default,{src:c,alt:"Card Preview",width:400,height:140,className:"mb-6 rounded-xl shadow-md"}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"mb-1 font-semibold text-[#181D27] text-lg",children:"Payment"}),(0,r.jsx)("div",{className:"mb-4 text-sm text-[#535862]",children:"Card details."}),(0,r.jsxs)("div",{className:"flex w-full gap-4 mb-3",children:[(0,r.jsxs)("div",{className:"flex-[3]",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Name on card"}),(0,r.jsx)("input",{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",value:m,onChange:e=>u(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Expiry"}),(0,r.jsx)(i.CardExpiryElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",onChange:e=>h(e.complete?e.value:""),options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"1.5","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]}),(0,r.jsxs)("div",{className:"flex w-full gap-4 mb-1",children:[(0,r.jsxs)("div",{className:"flex-[3]",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Card number"}),(0,r.jsx)(i.CardNumberElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",onChange:e=>f(e.complete?e.value:""),options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"CVV"}),(0,r.jsx)(i.CardCvcElement,{className:"block w-full rounded-md border border-gray-300 px-4 py-2.5 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]})]}),A&&(0,r.jsx)("div",{className:"text-red-500 mt-3 text-base w-full text-center",children:A}),(0,r.jsx)("div",{className:"flex w-full mt-6 gap-3",children:(0,r.jsx)("button",{type:"submit",className:"flex-1 py-2.5 rounded-md bg-black text-white font-semibold text-base",disabled:p,children:p?"Processing...":"Pay ".concat(S)})})]})}function u(e){let{priceId:t}=e;return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-[#F5F5F5]",children:(0,r.jsx)(i.Elements,{stripe:d,children:(0,r.jsx)(m,{priceId:t})})})}let b=(0,o.c)("pk_live_51RWxeYKNtFSSZren3RvfWemc9SNJfkCC8VJDGkcMhFZ0zRzL1iMAzVRkkH3qRScQM2AalyEcx7feSx6rFGMlj0sL00ow76aVLu");function f(){let[e,t]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e=localStorage.getItem("priceId");e&&t(e)},[]),(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,r.jsx)(i.Elements,{stripe:b,children:(0,r.jsx)(u,{priceId:e})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4212,1834,8441,1684,7358],()=>t(8415)),_N_E=e.O()}]);