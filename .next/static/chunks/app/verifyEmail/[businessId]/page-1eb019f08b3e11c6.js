(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5082],{1865:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var o=s(3464);let a="https://wellnexai.com/api";o.A.create({baseURL:a,headers:{"Content-Type":"application/json"}});let i=async e=>{if(!e.ok)throw Error((await e.json()).message||"Something went wrong");return e.json()},r={signup:async e=>i(await fetch("".concat(a,"/business/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),sendVerificationEmail:async(e,t)=>i(await fetch("".concat(a,"/business/sendVerificationEmail"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({businessId:t})})),verifyEmailByLink:async(e,t)=>i(await fetch("".concat(a,"/business/verifyEmailByLink"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({verificationToken:t,_id:e})})),uploadLogo:async(e,t,s)=>{let o=new FormData;o.append("logo",e),o.append("businessId",s);try{let e=await fetch("https://wellnexai.com/api/business/uploadBusinessLogo",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:o}),s=await e.json();if(!e.ok)throw Error(s.message||"Failed to upload logo");let a=s.logoUrl;return a&&!a.startsWith("https://wellnexai.com")&&(a="https://wellnexai.com".concat(a.startsWith("/")?"":"/").concat(a)),{...s,logoUrl:a}}catch(e){throw e}},setThemeColor:async(e,t,s)=>{try{let o=s?JSON.stringify({themeColor:e,businessId:s}):JSON.stringify({themeColor:e}),a=await fetch("https://wellnexai.com/api/business/setBusinessThemeColor",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:o}),i=await a.json();if(!a.ok)throw Error(i.message||"Failed to set theme color");return i}catch(e){throw e}},addBusinessKeywords:async(e,t,s)=>{try{let o=await fetch("https://wellnexai.com/api/business/addBusinessKeywords",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({keywords:e,businessId:s,replace:!0})}),a=await o.json();if(!o.ok)throw Error(a.message||"Failed to add keywords");return a}catch(e){throw e}},signin:async(e,t)=>{let s=localStorage.getItem("businessId"),o={email:e,password:t};s&&(o.businessId=s);let a=await fetch("https://wellnexai.com/api/business/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),i=await a.json();if(!a.ok||!i.status)throw Error(i.message||"Invalid email or password");return i},setupChatbot:async(e,t,s)=>{let o=await fetch("".concat(a,"/business/add-business-questions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({businessId:e,questions:t})});if(!o.ok)throw Error((await o.json()).message||"Failed to setup chatbot");return o.json()},forgotPassword:async e=>{console.log("Making forgot password request for email:",e);try{let t=await fetch("".concat(a,"/business/forgotPassword"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();if(console.log("Forgot password API response:",s),!t.ok)throw Error(s.message||"Failed to send reset password email");return s}catch(e){throw console.error("Error in forgotPassword API:",e),e}},resetPassword:async(e,t)=>{let s=await fetch("".concat(a,"/business/resetPassword"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})});if(!s.ok)throw Error((await s.json()).message||"Failed to reset password");return s.json()},checkVerificationStatus:async(e,t)=>{try{let s=await fetch("".concat(a,"/business/verify-status"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({businessId:e})}),o=await s.json();if(!s.ok)throw Error(o.message||"Failed to check verification status");return o}catch(e){throw console.error("Error checking verification status:",e),e}}}},2475:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});let o={src:"/_next/static/media/logo.16f37a8f.png",height:50,width:150,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAFVBMVEUQEBAAAAAFBgUEBAQGBgYFBQUCAgJg1VDIAAAAB3RSTlMCClM3ShtuDx4ixwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACBJREFUeJwVyMERADAIwzA7ge4/Mlc9RVdFeEmmI134cQLLAC4e3IyrAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3}},4935:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var o=s(5155),a=s(2115),i=s(5695),r=s(6766),n=s(2475),c=s(1865);function l(e){let{params:t}=e,s=(0,i.useRouter)(),l=(0,i.useSearchParams)(),[d,h]=(0,a.useState)("loading"),[u,m]=(0,a.useState)("Verifying your email..."),{businessId:w}=(0,a.use)(t);return(0,a.useEffect)(()=>{(async()=>{try{{let e=window.location.hash,t=l.get("token");if(!t&&e&&(t=new URLSearchParams(e.split("?")[1]).get("token")),!t)throw Error("No verification token found");console.log("Verifying email with token:",t);let o=await c.d.verifyEmailByLink(w,t);if(o.status)h("success"),m("Email verified successfully! Closing window..."),o.token&&(localStorage.setItem("token",o.token),document.cookie="token=".concat(o.token,"; path=/"),document.cookie="authorization=Bearer ".concat(o.token,"; path=/")),setTimeout(()=>{window.close(),s.push("/dashboard")},1e3);else throw Error(o.message||"Verification failed")}}catch(e){h("error"),m(e instanceof Error?e.message:"Verification failed")}})()},[w,l,s]),(0,o.jsx)("div",{className:"min-h-screen w-full bg-[#F5F5F5] flex justify-center items-center",children:(0,o.jsx)("div",{className:"w-full max-w-[500px] bg-white shadow-lg rounded-2xl p-8 mx-4",children:(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsx)(r.default,{src:n.A,alt:"WellnexAI Logo",width:100,height:200})}),(0,o.jsxs)("div",{className:"text-center",children:["loading"===d&&(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#987CF1] mx-auto mb-4"}),"success"===d&&(0,o.jsx)("div",{className:"text-green-500 mb-4",children:(0,o.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),"error"===d&&(0,o.jsx)("div",{className:"text-red-500 mb-4",children:(0,o.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,o.jsxs)("h1",{className:"text-2xl font-bold mb-4",children:["loading"===d&&"Verifying Email","success"===d&&"Email Verified","error"===d&&"Verification Failed"]}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:u}),"error"===d&&(0,o.jsx)("button",{onClick:()=>s.push("/signin"),className:"px-6 py-2 bg-[#987CF1] text-white rounded-lg hover:bg-[#7a63c7] transition-colors",children:"Go to plan selection"})]})]})})})}function d(e){let{params:t}=e;return(0,o.jsx)(a.Suspense,{children:(0,o.jsx)(l,{params:t})})}},7494:(e,t,s)=>{Promise.resolve().then(s.bind(s,4935))}},e=>{var t=t=>e(e.s=t);e.O(0,[4212,3464,8441,1684,7358],()=>t(7494)),_N_E=e.O()}]);