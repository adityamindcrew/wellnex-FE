(()=>{var e={};e.id=105,e.ids=[105],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3589:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},4036:(e,t,s)=>{Promise.resolve().then(s.bind(s,82879)),Promise.resolve().then(s.bind(s,50820)),Promise.resolve().then(s.bind(s,15487)),Promise.resolve().then(s.bind(s,19125))},9005:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11652:(e,t,s)=>{Promise.resolve().then(s.bind(s,84729)),Promise.resolve().then(s.bind(s,42446)),Promise.resolve().then(s.bind(s,23937)),Promise.resolve().then(s.bind(s,25399))},11860:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},12412:e=>{"use strict";e.exports=require("assert")},12941:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},13964:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},15487:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Kajal\\\\wellnex\\\\wellnex-FE\\\\components\\\\dashboard\\\\business-services.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Kajal\\wellnex\\wellnex-FE\\components\\dashboard\\business-services.tsx","default")},17242:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a={src:"/_next/static/media/logo.16f37a8f.png",height:50,width:150,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAFVBMVEUQEBAAAAAFBgUEBAQFBQUGBgYCAgI1vtbjAAAAB3RSTlMCClM3G0puwcAKVQAAAAlwSFlzAAALEwAACxMBAJqcGAAAACBJREFUeJwVyMERADAIwzA7ge4/Mlc9RUdFeEm2Kx34cQLDAC6f5ld0AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19125:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Kajal\\\\wellnex\\\\wellnex-FE\\\\components\\\\dashboard\\\\platform-subscription.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Kajal\\wellnex\\wellnex-FE\\components\\dashboard\\platform-subscription.tsx","default")},23222:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(60687),r=s(43210),i=s(16189),l=s(85814),n=s.n(l),o=s(32192),c=s(30474),d=s(17242);function x(){let e=(0,i.useRouter)(),t=(0,r.useCallback)(async()=>{try{if(!(await fetch("https://dev.wellnexai.com/api/business/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"})).ok)throw Error("Logout failed");localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie=`${t.trim()}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`}),window.location.href="/signin"}catch(e){console.error("Logout error:",e),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie=`${t.trim()}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`}),window.location.href="/signin"}},[e]);return(0,a.jsxs)("div",{className:"flex w-[250px] md:w-[193px] flex-col border-r border-gray-200 bg-white h-full",children:[(0,a.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,a.jsx)(n(),{href:"/dashboard",className:"flex items-center",children:(0,a.jsx)(c.default,{src:d.A,alt:"WellnexAI Logo",width:150,height:200})})}),(0,a.jsx)("div",{className:"flex flex-col px-2 py-2",children:(0,a.jsxs)(n(),{href:"/dashboard",className:"flex items-center gap-2 rounded-md bg-black px-3 py-2 text-white hover:bg-gray-800",children:[(0,a.jsx)(o.A,{size:18}),(0,a.jsx)("span",{children:"Dashboard"})]})}),(0,a.jsx)("button",{onClick:t,className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"Logout"})]})}function m(){let[e,t]=(0,r.useState)(null);return(0,a.jsxs)("header",{className:"flex h-16 items-center justify-between border-b border-gray-200 bg-white px-4 md:px-6",children:[(0,a.jsx)("div",{className:"relative w-full max-w-[450px] ml-12 md:ml-0"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsx)("div",{className:"hidden md:block text-right",children:(0,a.jsx)("div",{className:"text-sm font-medium",children:e?.name})}),(0,a.jsx)("div",{className:"h-8 w-8 md:h-10 md:w-10 overflow-hidden rounded-full bg-gray-200",children:(0,a.jsx)("img",{src:e?.logo?`https://dev.wellnexai.com/uploads/business-logos/${e.logo}`:"/avatar.png",alt:e?.name||"Business Logo",className:"h-full w-full object-cover"})})]})]})}var u=s(12941);function h({children:e}){(0,i.useRouter)();let[t,s]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)("button",{onClick:()=>s(!t),className:"fixed top-4 left-4 z-[60] md:hidden bg-white p-2 rounded-md shadow-md",children:(0,a.jsx)(u.A,{className:"h-6 w-6"})}),(0,a.jsx)("div",{className:`
        fixed md:static inset-y-0 left-0 z-50
        transform transition-transform duration-200 ease-in-out
        ${t?"translate-x-0":"-translate-x-full md:translate-x-0"}
      `,children:(0,a.jsx)(x,{})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,a.jsx)(m,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-4 md:p-6",children:e})]}),t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>s(!1)})]})}},23459:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=s(65239),r=s(48088),i=s(88170),l=s.n(i),n=s(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,64118)),"D:\\Kajal\\wellnex\\wellnex-FE\\app\\dashboard\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,83249)),"D:\\Kajal\\wellnex\\wellnex-FE\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"D:\\Kajal\\wellnex\\wellnex-FE\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["D:\\Kajal\\wellnex\\wellnex-FE\\app\\dashboard\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},23937:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(60687),r=s(43210),i=s(96474),l=s(11860),n=s(13964),o=s(57175),c=s(88233);function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(null),[j,y]=(0,r.useState)(null),[w,v]=(0,r.useState)(""),[N,k]=(0,r.useState)(!1),[S,A]=(0,r.useState)(""),[C,E]=(0,r.useState)(!1),[I,z]=(0,r.useState)(!1),F=(0,r.useRef)(null),[P,T]=(0,r.useState)(200),$=async()=>{try{d(!0),m(null);let e=localStorage.getItem("token"),s=localStorage.getItem("businessId"),a=await fetch("https://dev.wellnexai.com/api/business/getServicesList",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({businessId:s})});if(!a.ok)throw Error("Failed to fetch services");let r=await a.json();if(!r.status||200!==r.code)throw Error(r.message||"Failed to fetch services");let i=r.data;if(!Array.isArray(i))throw Error("Invalid response format: expected an array of services");let l=i.map(e=>({id:e._id,name:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(l)}catch(e){m(e instanceof Error?e.message:"An error occurred")}finally{d(!1)}},B=e=>{b(e),p(!0)},M=async()=>{if(g)try{h(!0);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e)throw Error("Authentication token not found");let s=await fetch("https://dev.wellnexai.com/api/business/deleteService",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({serviceId:g,businessId:t})}),a=await s.json();if(!a.status||200!==a.code)throw Error(a.message||"Failed to delete service");await $(),p(!1),b(null)}catch(e){console.error("Delete error:",e),m(e instanceof Error?e.message:"Failed to delete service")}finally{h(!1)}},O=e=>{y(e.id),v(e.name)},D=async()=>{if(j&&w.trim())try{k(!0);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e)throw Error("Authentication token not found");let s=await fetch("https://dev.wellnexai.com/api/business/updateOneService",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.trim()}`},body:JSON.stringify({businessId:t,service:{_id:j,name:w.trim()}})}),a=await s.json();if(!a.status||200!==a.code)throw Error(a.message||"Failed to update service");await $(),y(null),v("")}catch(e){console.error("Update error:",e),m(e instanceof Error?e.message:"Failed to update service")}finally{k(!1)}},J=()=>{y(null),v("")},L=async()=>{if(S.trim()){if(e.some(e=>e.name.toLowerCase()===S.trim().toLowerCase())){m("Service already exists"),A("");return}try{E(!0),m(null);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t)throw Error("Authentication token or business ID not found");let s=await fetch("https://dev.wellnexai.com/api/business/addBusinessServices",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({businessId:t,services:[{name:S.trim()}]})}),a=await s.json();if(!a.status||200!==a.code){m(a.message||"Service already exists");return}await $(),A(""),z(!1)}catch(e){m(e instanceof Error?e.message:"Service already exists")}finally{E(!1)}}};return s?(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-8",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[x&&(0,a.jsx)("div",{className:"text-center text-red-600 py-2",children:x}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Services"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Services"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:I?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,a.jsx)("input",{type:"text",value:S,onChange:e=>A(e.target.value),placeholder:"Enter service name",className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8",disabled:C,onKeyDown:e=>{"Enter"===e.key&&!C&&S.trim()&&L()}}),(0,a.jsx)("button",{onClick:()=>{z(!1),A("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(l.A,{size:14})})]}),(0,a.jsx)("button",{onClick:L,disabled:C||!S.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Adding..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add"})]})})]}):(0,a.jsxs)("button",{onClick:()=>z(!0),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white",children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add Service"})]})})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Services"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),j===e.id?(0,a.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{ref:F,className:"invisible absolute whitespace-pre px-2 py-1 border border-transparent text-base font-normal",style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"},"aria-hidden":"true",children:w||e.name}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>v(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1]",style:{width:`${Math.max(P,100)}px`,minWidth:"100px",maxWidth:"100%"},disabled:N}),(0,a.jsxs)("div",{className:"flex gap-2 sm:gap-2",children:[(0,a.jsx)("button",{onClick:D,disabled:N,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(n.A,{size:18})}),(0,a.jsx)("button",{onClick:J,disabled:N,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(l.A,{size:18})})]})]}):(0,a.jsx)("div",{className:"flex-1 min-w-0 break-words whitespace-normal",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Last Edited:"}),(0,a.jsx)("div",{className:"w-32 text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"w-20",children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>O(e),disabled:N,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>B(e.id),disabled:u||N,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})})]})]},e.id))]})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Service"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this service? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{p(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:u,children:"Cancel"}),(0,a.jsx)("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:u,children:u?"Deleting...":"Delete"})]})]})})]})}},25399:(e,t,s)=>{"use strict";s.d(t,{default:()=>w});var a=s(60687),r=s(76180),i=s.n(r),l=s(43210),n=s(64129),o=s(76145),c=s(30474),d=s(9005),x=s(3589),m=s(78272),u=s(11860),h=s(68988),f=s(39010),p=s(46299),g=s(16189);let b=(0,f.c)("pk_test_51RWxeYKNtFSSZren07ctBc5KRh4LA2msrroYkJpDR27nEAycVYvPQXEpfeXTxOD5LJFLZ0SiMkz4oELE0XqRqVII00JhHtSzdo"),j=e=>new Promise((t,s)=>{let a=document.createElement("canvas"),r=a.getContext("2d"),i=new window.Image;i.onload=()=>{let{width:l,height:n}=i;l>n?l>800&&(n=800*n/l,l=800):n>800&&(l=800*l/n,n=800),a.width=l,a.height=n,r&&r.drawImage(i,0,0,l,n),a.toBlob(a=>{a?t(new File([a],e.name,{type:"image/png",lastModified:Date.now()})):s(Error("Failed to compress image"))},"image/png",.8)},i.onerror=()=>s(Error("Failed to load image")),i.src=URL.createObjectURL(e)});function y({onPaymentMethodCreated:e,isForChangeCard:t=!1}){let s=(0,p.t2)(),r=(0,p.HH)(),[i,n]=(0,l.useState)(""),[o,c]=(0,l.useState)(null),[d,x]=(0,l.useState)(!1),[m,u]=(0,l.useState)(""),h=async t=>{t.preventDefault(),c(null),x(!0);try{if(!s||!r)throw Error("Stripe not loaded");let t=r.getElement(p._D);if(!t)throw Error("Card element not found");let{error:a,paymentMethod:l}=await s.createPaymentMethod({type:"card",card:t,billing_details:{name:i}});if(a)throw Error(a.message||"Payment error");if(!l?.id)throw Error("Failed to create payment method");e(l.id)}catch(e){c(e instanceof Error?e.message:"Failed to create payment method")}finally{x(!1)}};return(0,a.jsxs)("form",{onSubmit:h,className:"bg-white rounded-2xl px-8 py-6 w-full max-w-[600px] flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"mb-1 font-semibold text-[#181D27] text-lg",children:"Payment"}),(0,a.jsx)("div",{className:"mb-4 text-sm text-[#535862]",children:"Card details."}),(0,a.jsxs)("div",{className:"flex w-full gap-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex-[6]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Name on card"}),(0,a.jsx)("input",{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",value:i,onChange:e=>n(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex-[4]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Expiry"}),(0,a.jsx)(p.qs,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"1.5","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]}),(0,a.jsxs)("div",{className:"flex w-full gap-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex-[6]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"Card number"}),(0,a.jsx)(p._D,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]}),(0,a.jsxs)("div",{className:"flex-[4]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#414651] mb-1",children:"CVV"}),(0,a.jsx)(p.JG,{className:"block w-full rounded-md border border-gray-300 px-4 py-3 text-base focus:border-black focus:ring-0",options:{style:{base:{fontSize:"16px",color:"#424770",lineHeight:"2.2","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})]})]}),o&&(0,a.jsx)("div",{className:"text-red-500 mt-3 text-base w-full text-center",children:o}),(0,a.jsx)("div",{className:"flex w-full mt-6 gap-3",children:(0,a.jsx)("button",{type:"submit",className:"flex-1 py-2.5 rounded-md bg-black text-white font-semibold text-base",disabled:d,children:d?"Processing...":t?"Add New Card":`Pay ${m}`})})]})}function w(){let e=(0,g.useRouter)(),[t,s]=(0,l.useState)("#987CF1"),[r,f]=(0,l.useState)(!1),[w,v]=(0,l.useState)(null),[N,k]=(0,l.useState)(null),[S,A]=(0,l.useState)(!1),[C,E]=(0,l.useState)(!1),[I,z]=(0,l.useState)(!1),[F,P]=(0,l.useState)(null),[T,$]=(0,l.useState)(""),[B,M]=(0,l.useState)(""),[O,D]=(0,l.useState)(null),[J,L]=(0,l.useState)(null),[R,_]=(0,l.useState)(null),[q,K]=(0,l.useState)(null),[U,G]=(0,l.useState)(null),[H,V]=(0,l.useState)(!1),[Q,W]=(0,l.useState)("#987CF1"),Y=(0,l.useRef)(null),[X,Z]=(0,l.useState)(!1),[ee,et]=(0,l.useState)(0),[es,ea]=(0,l.useState)(0),[er,ei]=(0,l.useState)(0),el=(0,l.useRef)(null),en=(0,l.useRef)(null),[eo,ec]=(0,l.useState)({x:0,y:0}),[ed,ex]=(0,l.useState)(0),[em,eu]=(0,l.useState)(null),[eh,ef]=(0,l.useState)(!0),[ep,eg]=(0,l.useState)(!1),[eb,ej]=(0,l.useState)(!1),[ey,ew]=(0,l.useState)(!1),[ev,eN]=(0,l.useState)(""),[ek,eS]=(0,l.useState)([]),[eA,eC]=(0,l.useState)(null),[eE,eI]=(0,l.useState)(!1),[ez,eF]=(0,l.useState)(!1),[eP,eT]=(0,l.useState)(""),e$=(0,l.useCallback)(async()=>{try{if(!(await fetch(`${o.JR}/business/logout`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"})).ok)throw Error("Logout failed");localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie=`${t.trim()}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`}),window.location.href="/signin"}catch(e){console.error("Logout error:",e),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[t]=e.split("=");document.cookie=`${t.trim()}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`}),window.location.href="/signin"}},[e]),eB=async()=>{ef(!0);try{let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t){ef(!1);return}let s=await fetch(`${o.JR}/subscription/status?businessId=${t}`,{method:"GET",headers:{Authorization:`Bearer ${e.replace(/['"]/g,"")}`}});if(!s.ok)throw Error("Failed to fetch subscription status");let a=await s.json();eu(a||null)}catch(e){eu(null)}finally{ef(!1)}},eM=async e=>{let t=e.target.files?.[0];if(v(null),t){if(!t.type.includes("png")){v("Please upload a PNG file only");return}if(t.size>5242880){v(`File size must be less than 5MB. Current size: ${(t.size/1048576).toFixed(2)}MB`);return}try{let e=t;t.size>1048576&&(e=await j(t));let s=new FileReader;s.onload=t=>{let s=t.target?.result;K(s),localStorage.setItem("logoPreview",s),G(e),V(!0)},s.readAsDataURL(e)}catch(e){console.error("Error processing file:",e),v("Failed to process image. Please try again.")}}},eO=async()=>{let e=null!==U,s=t!==Q;if(!e&&!s){D("No changes to save"),setTimeout(()=>D(null),3e3);return}try{f(!0),v(null);let a=localStorage.getItem("token"),r=localStorage.getItem("businessId");if(!a||!r)throw Error("Authentication token or business ID not found");let i=!1;if(e&&U)try{let e=new FormData;e.append("logo",U),e.append("businessId",r);let t=await fetch(`${o.JR}/business/uploadBusinessLogo`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:e});if(413===t.status)throw Error("File size too large. Please use a smaller image (max 5MB).");if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||"Failed to upload logo")}let s=localStorage.getItem("logoPreview");s&&(_(s),localStorage.setItem("businessLogo",s)),i=!0,D("Logo updated successfully")}catch(e){throw console.error("Logo upload error:",e),Error("Failed to upload logo")}if(s)try{await n.d.setThemeColor(t,a,r),localStorage.setItem("themeColor",t),W(t),i=!0,D("Theme color updated successfully")}catch(e){throw console.error("Color update error:",e),Error("Failed to update theme color")}i&&(V(!1),G(null),Z(!1)),setTimeout(()=>D(null),3e3)}catch(e){v(e instanceof Error?e.message:"Failed to save changes")}finally{f(!1)}},eD=e=>{let t=e.target.value.startsWith("#")?e.target.value:`#${e.target.value}`;(t.match(/^#([0-9A-F]{3}){1,2}$/i)||"#"===t)&&(s(t),v(null),V(!0))},eJ=(e,t)=>{let a=Math.max(0,Math.min(255,Number.parseInt(t)||0));"r"===e&&et(a),"g"===e&&ea(a),"b"===e&&ei(a),s(`#${ee.toString(16).padStart(2,"0")}${es.toString(16).padStart(2,"0")}${er.toString(16).padStart(2,"0")}`),v(null),V(!0)},eL=(e,t,a)=>{let r=eR(360*a,100*e,(1-t)*50);et(r.r),ea(r.g),ei(r.b),s(`#${r.r.toString(16).padStart(2,"0")}${r.g.toString(16).padStart(2,"0")}${r.b.toString(16).padStart(2,"0")}`)},eR=(e,t,s)=>{let a,r,i;if(e/=360,s/=100,0==(t/=100))a=r=i=s;else{let l=(e,t,s)=>(s<0&&(s+=1),s>1&&(s-=1),s<1/6)?e+(t-e)*6*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e,n=s<.5?s*(1+t):s+t-s*t,o=2*s-n;a=l(o,n,e+1/3),r=l(o,n,e),i=l(o,n,e-1/3)}return{r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*i)}},e_=async()=>{try{let e=await fetch(`${o.JR}/subscription/cards`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error("Failed to fetch saved cards");let t=await e.json();eS(t),ew(!0)}catch(e){console.error("Error fetching saved cards:",e),k("Failed to fetch saved cards"),ej(!0)}},eq=async e=>{try{let t=await fetch(`${o.JR}/subscription/renew-after-special-offer`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})});if(!t.ok)throw Error("Failed to renew subscription");await t.json(),ej(!1),ew(!1),eC(null),L("Your subscription has been renewed successfully!"),setTimeout(()=>L(null),3e3);let s=localStorage.getItem("token"),a=localStorage.getItem("businessId");if(s&&a){let e=await fetch(`${o.JR}/subscription/status?businessId=${a}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}});if(e.ok){let t=await e.json();eu(t||null)}}}catch(e){k(e.message),L(null)}},eK=async()=>{try{let e=await fetch(`${o.JR}/subscription/check-special-offer`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error("Failed to check special offer");let t=await e.json();t.hasSpecialOffer?(P(t.specialOfferPrice),$(t.message),M(t.currentPeriodEnd),eN(t.expiryDate||""),eT(t.reason||""),A(!0)):"already_used"===t.reason&&($(t.message),eT(t.reason),A(!0))}catch(e){console.error("Error checking special offer:",e),k("Failed to check special offer")}},eU=async()=>{try{let e=await fetch(`${o.JR}/subscription/apply-special-offer`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();if(!e.ok)throw Error(t.message||"Failed to create subscription");eg(!1),A(!1),eC(null),L("Subscription renewed! Offer applied for your next billing period."),setTimeout(()=>L(null),3e3),eB()}catch(e){console.error("Subscription error:",e),k(e.message||"An error occurred while processing your subscription?. Please try again."),eg(!1),L(null)}A(!1),L("Subscription renewed! Offer applied for your next billing period"),setTimeout(()=>L(null),3e3)},eG=async()=>{try{let e=await fetch(`${o.JR}/subscription/cancel`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error("Failed to cancel subscription");let t=await e.json();A(!1),L(t.message||"Your subscription has been cancelled"),eB()}catch(e){v(e.message)}},eH=async e=>{try{let t=await fetch(`${o.JR}/subscription/apply-special-offer`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to create subscription");eg(!1),A(!1),eC(null),L("Your subscription has been renewed successfully!"),setTimeout(()=>L(null),3e3),eB()}catch(e){console.error("Subscription error:",e),k(e.message||"An error occurred while processing your subscription?. Please try again."),eg(!1),L(null)}},eV=async()=>{try{eF(!0),eg(!0)}catch(e){console.error("Error opening payment form:",e),k("Failed to open payment form")}},eQ=async e=>{try{let t=await fetch(`${o.JR}/subscription/change-card`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})});if(!t.ok)throw Error("Failed to change payment card");await t.json(),eI(!1),eg(!1),eC(null),L("Payment card changed successfully!"),setTimeout(()=>L(null),3e3)}catch(e){console.error("Change card error:",e),k(e.message||"An error occurred while changing your payment card. Please try again."),eI(!1),eg(!1),L(null)}};return(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("h2",{className:"jsx-884d3352fe1274cc mb-4 text-xl font-semibold",children:"Platform Subscription"}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col gap-6 lg:flex-row lg:items-start lg:gap-8",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-full max-w-lg mx-auto lg:mx-0 lg:max-w-md rounded-lg border border-gray-200 bg-white p-4 sm:p-6 lg:p-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[eh?(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-center text-gray-500 py-4",children:"Loading subscription..."}):em?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Subscription Status"}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium",children:[em?.status?em?.status==="active"&&em?.cancelAtPeriodEnd?"Active":em?.status[0].toUpperCase()+em?.status.slice(1):"N/A",em.isSpecialOffer&&" (Special Offer)"]})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Start Date"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:em?.currentPeriodStart?em?.currentPeriodStart.slice(0,10):"N/A"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:em?.cancelAtPeriodEnd||em.isSpecialOffer?"End Date":"Next Renewal Date"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:em?.currentPeriodEnd?em?.currentPeriodEnd.slice(0,10):"N/A"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium text-gray-500",children:"Email"}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm",children:em?.email||"N/A"})]})]}):(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-center text-red-500 py-4",children:"No subscription data found."}),N&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-red-600 text-center bg-red-50 p-2 rounded-md",children:N}),J&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-green-600 text-center bg-green-50 p-2 rounded-md",children:J}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex gap-2 pt-2",children:[(0,a.jsx)(a.Fragment,{children:em?.cancelAtPeriodEnd===!1?(0,a.jsx)("button",{onClick:eK,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Cancel Subscription"}):null}),(0,a.jsx)("button",{onClick:eV,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Change card details"}),em?.status==="canceled"&&(0,a.jsx)("button",{onClick:e_,className:"jsx-884d3352fe1274cc rounded-md border border-gray-300 bg-white px-4 py-2 text-sm",children:"Renew Subscription"})]})]})}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-full max-w-lg mx-auto lg:mx-0 lg:max-w-md rounded-lg border border-gray-200 bg-white p-4 sm:p-6 lg:p-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col sm:flex-row items-center gap-4",children:[(0,a.jsxs)("div",{onClick:()=>Y.current?.click(),className:"jsx-884d3352fe1274cc relative h-12 w-12 rounded-full bg-gray-200 cursor-pointer overflow-hidden ",children:[q||R?(0,a.jsx)(c.default,{src:q||R||"",alt:"Business logo",fill:!0,className:"object-cover",unoptimized:!0,onError:e=>{console.error("Error loading logo:",e),v("Failed to load logo"),_(null),localStorage.removeItem("businessLogo")}}):(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex h-full w-full items-center justify-center",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsx)("input",{type:"file",ref:Y,onChange:eM,accept:".png",className:"jsx-884d3352fe1274cc hidden"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm font-medium",children:"Change Logo (.png)"}),r&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs text-gray-500",children:"Uploading..."}),q&&!r&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs text-gray-500",children:"Preview"})]})]}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex flex-col sm:flex-row items-center gap-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center gap-2 mt-6",children:[(0,a.jsx)("div",{style:{backgroundColor:t||"#ffffff"},className:"jsx-884d3352fe1274cc h-10 w-10 shrink-0 rounded-md border"}),(0,a.jsx)(h.p,{type:"text",value:t,onChange:eD,className:"flex-1",placeholder:"#000000"}),(0,a.jsx)("button",{type:"button",onClick:()=>Z(!X),className:"jsx-884d3352fe1274cc h-10 w-10 shrink-0 rounded-md border flex items-center justify-center",children:X?(0,a.jsx)(x.A,{className:"h-4 w-4"}):(0,a.jsx)(m.A,{className:"h-4 w-4"})})]}),X&&(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc relative mt-2 rounded-md border p-4",children:[(0,a.jsx)("div",{ref:el,style:{background:`linear-gradient(to bottom, rgba(255,255,255,1) 0%, rgba(0,0,0,1) 100%), 
                                  linear-gradient(to right, rgba(128,128,128,1) 0%, hsl(${360*ed}, 100%, 50%) 100%)`,backgroundBlendMode:"multiply"},onClick:e=>{if(!el.current)return;let t=el.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width,a=(e.clientY-t.top)/t.height;ec({x:Math.max(0,Math.min(1,s)),y:Math.max(0,Math.min(1,a))}),eL(Math.max(0,Math.min(1,s)),Math.max(0,Math.min(1,a)),ed),v(null),V(!0)},className:"jsx-884d3352fe1274cc relative h-32 w-full cursor-pointer rounded-md",children:(0,a.jsx)("div",{style:{left:`${100*eo.x}%`,top:`${100*eo.y}%`,backgroundColor:t||"#ffffff"},className:"jsx-884d3352fe1274cc absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white"})}),(0,a.jsx)("div",{ref:en,style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"},onClick:e=>{if(!en.current)return;let t=en.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width;ex(Math.max(0,Math.min(1,s))),eL(eo.x,eo.y,Math.max(0,Math.min(1,s))),v(null),V(!0)},className:"jsx-884d3352fe1274cc relative h-6 mt-2 cursor-pointer rounded-md",children:(0,a.jsx)("div",{style:{left:`${100*ed}%`},className:"jsx-884d3352fe1274cc absolute top-0 h-full w-1 -translate-x-1/2 border-2 border-white"})}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc mt-2 grid grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"HEX"}),(0,a.jsx)(h.p,{value:t.replace("#",""),onChange:eD,className:"mt-1 text-center h-8",placeholder:"000000"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"R"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:ee,onChange:e=>eJ("r",e.target.value),className:"mt-1 text-center h-8"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"G"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:es,onChange:e=>eJ("g",e.target.value),className:"mt-1 text-center h-8"})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-xs font-medium",children:"B"}),(0,a.jsx)(h.p,{type:"number",min:"0",max:"255",value:er,onChange:e=>eJ("b",e.target.value),className:"mt-1 text-center h-8"})]})]})]})]})}),w&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-red-600 text-center",children:w}),O&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc text-sm text-green-600 text-center",children:O}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex gap-2 pt-2 mt-4",children:[(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("logoPreview"),K(null),G(null),V(!0),Z(!1)},disabled:r,className:"jsx-884d3352fe1274cc rounded-md bg-black px-4 py-2 text-sm text-white disabled:opacity-50",children:"Reset"}),(0,a.jsx)("button",{onClick:eO,disabled:r||!H,className:"jsx-884d3352fe1274cc rounded-md bg-black px-4 py-2 text-sm text-white disabled:opacity-50",children:"Save Changes"})]})]})]}),S&&!ep&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-12 w-full max-w-md sm:max-w-lg mx-4 min-h-[280px] flex flex-col justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center mb-6 relative",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold flex-1",children:"already_used"===eP?"Cancel Subscription":"Special Offer"}),(0,a.jsx)("button",{onClick:()=>A(!1),style:{lineHeight:0},className:"jsx-884d3352fe1274cc absolute right-0 top-1 text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-4",children:T})]}),(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc flex justify-end mt-4",children:"already_used"===eP?(0,a.jsx)("button",{onClick:eG,className:"jsx-884d3352fe1274cc w-full px-4 py-2 text-white bg-black rounded-lg hover:bg-gray-800",children:"I want to cancel my subscription"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:eG,className:"jsx-884d3352fe1274cc px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"I want to cancel my subscription"}),(0,a.jsx)("button",{onClick:eU,className:"jsx-884d3352fe1274cc px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"Yes, I accept the offer"})]})})]})}),ep&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 w-full max-w-md sm:max-w-lg mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Payment Details"}),(0,a.jsx)("button",{onClick:()=>{eg(!1),eF(!1)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(p.S8,{stripe:b,children:(0,a.jsx)(y,{onPaymentMethodCreated:ez?eQ:eH,isForChangeCard:ez})})]})}),eb&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold mb-4",children:"Renew Subscription"}),(0,a.jsx)("button",{onClick:()=>ej(!1),className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(p.S8,{stripe:b,children:(0,a.jsx)(y,{onPaymentMethodCreated:eq})})]})}),ey&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Select Payment Method"}),(0,a.jsx)("button",{onClick:()=>{ew(!1),eC(null)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[ek.map(e=>(0,a.jsx)("div",{onClick:()=>eC(e.id),className:`jsx-884d3352fe1274cc p-4 border rounded-lg cursor-pointer transition-all ${eA===e.id?"border-black bg-gray-50":"border-gray-200"}`,children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:["visa"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M22.4 4.4H1.6C.7 4.4 0 5.1 0 6v12c0 .9.7 1.6 1.6 1.6h20.8c.9 0 1.6-.7 1.6-1.6V6c0-.9-.7-1.6-1.6-1.6z",fill:"#1A1F71",className:"jsx-884d3352fe1274cc"})}),"mastercard"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M12 4.4c-4.2 0-7.6 3.4-7.6 7.6s3.4 7.6 7.6 7.6 7.6-3.4 7.6-7.6-3.4-7.6-7.6-7.6z",fill:"#EB001B",className:"jsx-884d3352fe1274cc"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc font-medium",children:e.brand.charAt(0).toUpperCase()+e.brand.slice(1)}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm text-gray-500",children:["**** **** **** ",e.last4]})]})]}),eA===e.id&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-5 h-5 rounded-full border-2 border-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-3 h-3 rounded-full bg-black"})})]})},e.id)),(0,a.jsx)("button",{onClick:()=>{eA&&(ew(!1),eq(eA))},disabled:!eA,className:"jsx-884d3352fe1274cc w-full py-2 bg-black text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue with Selected Card"})]})]})}),C&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold mb-4",children:"No Active Subscription"}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-6",children:"You need an active subscription to access this feature. Please subscribe to continue using our platform."}),(0,a.jsx)("button",{onClick:()=>{localStorage.getItem("token")?(document.cookie="dashboardLock=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",E(!1),window.location.href="/payment/currencySelection"):window.location.href="/signin"},className:"jsx-884d3352fe1274cc px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Subscribe Now"}),(0,a.jsx)("button",{onClick:()=>e$(),className:"jsx-884d3352fe1274cc ml-5 px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Logout"})]})})}),I&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-center",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-xl font-semibold mb-4",children:"No Active Subscription"}),(0,a.jsx)("p",{className:"jsx-884d3352fe1274cc text-gray-600 mb-6",children:"Your subscription is paused. Please contact admin."})]})})}),eE&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"jsx-884d3352fe1274cc text-lg font-semibold",children:"Select Payment Method"}),(0,a.jsx)("button",{onClick:()=>{eI(!1),eC(null)},className:"jsx-884d3352fe1274cc text-gray-600 hover:text-gray-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc space-y-4",children:[ek.map(e=>(0,a.jsx)("div",{onClick:()=>eC(e.id),className:`jsx-884d3352fe1274cc p-4 border rounded-lg cursor-pointer transition-all ${eA===e.id?"border-black bg-gray-50":"border-gray-200"}`,children:(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:["visa"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M22.4 4.4H1.6C.7 4.4 0 5.1 0 6v12c0 .9.7 1.6 1.6 1.6h20.8c.9 0 1.6-.7 1.6-1.6V6c0-.9-.7-1.6-1.6-1.6z",fill:"#1A1F71",className:"jsx-884d3352fe1274cc"})}),"mastercard"===e.brand&&(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-884d3352fe1274cc w-6 h-6",children:(0,a.jsx)("path",{d:"M12 4.4c-4.2 0-7.6 3.4-7.6 7.6s3.4 7.6 7.6 7.6 7.6-3.4 7.6-7.6-3.4-7.6-7.6-7.6z",fill:"#EB001B",className:"jsx-884d3352fe1274cc"})})]}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc",children:[(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc font-medium",children:e.brand.charAt(0).toUpperCase()+e.brand.slice(1)}),(0,a.jsxs)("div",{className:"jsx-884d3352fe1274cc text-sm text-gray-500",children:["**** **** **** ",e.last4]})]})]}),eA===e.id&&(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-5 h-5 rounded-full border-2 border-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-884d3352fe1274cc w-3 h-3 rounded-full bg-black"})})]})},e.id)),(0,a.jsx)("button",{onClick:()=>{eA&&(eI(!1),eH(eA))},disabled:!eA,className:"jsx-884d3352fe1274cc w-full py-2 bg-black text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue with Selected Card"})]})]})}),(0,a.jsx)(i(),{id:"884d3352fe1274cc",children:".cancel-button.jsx-884d3352fe1274cc{margin-top:20px;padding:10px 20px;background-color:#f44336;color:white;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.cancel-button.jsx-884d3352fe1274cc:hover{background-color:#d32f2f}.success-message.jsx-884d3352fe1274cc{color:#2e7d32;padding:10px;margin:10px 0;border:1px solid#2e7d32;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background-color:#f1f8e9}.modal-overlay.jsx-884d3352fe1274cc{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:1000}.modal-content.jsx-884d3352fe1274cc{background:white;padding:24px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;max-width:400px;width:90%}.modal-content.jsx-884d3352fe1274cc h3.jsx-884d3352fe1274cc{margin:0 0 16px 0;color:#333}.modal-content.jsx-884d3352fe1274cc p.jsx-884d3352fe1274cc{margin:0 0 24px 0;color:#666}.modal-actions.jsx-884d3352fe1274cc{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;gap:12px}.modal-button.jsx-884d3352fe1274cc{padding:8px 16px;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;font-size:14px;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}.modal-button.cancel.jsx-884d3352fe1274cc{background-color:#e0e0e0;color:#333}.modal-button.confirm.jsx-884d3352fe1274cc{background-color:#2196F3;color:white}.modal-button.jsx-884d3352fe1274cc:hover{opacity:.9}"})]})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32192:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},33873:e=>{"use strict";e.exports=require("path")},36546:(e,t,s)=>{Promise.resolve().then(s.bind(s,83249))},42446:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(60687),r=s(43210),i=s(11860),l=s(96474),n=s(13964),o=s(57175),c=s(88233);function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(null),[j,y]=(0,r.useState)(null),[w,v]=(0,r.useState)(""),[N,k]=(0,r.useState)(!1),[S,A]=(0,r.useState)(!1),[C,E]=(0,r.useState)(""),[I,z]=(0,r.useState)(!1),F=(0,r.useRef)(null),[P,T]=(0,r.useState)(0),$=e=>{b(e),h(!0)},B=async()=>{if(g){p(!0);try{let s=localStorage.getItem("businessId"),a=localStorage.getItem("token");if(!s||!a){m("Missing businessId or token"),p(!1);return}if(!(await fetch("https://dev.wellnexai.com/api/business/delete-question",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.trim()}`},body:JSON.stringify({businessId:s,questionId:g})})).ok)throw Error("Failed to delete question");t(e.filter(e=>e.id!==g)),h(!1),b(null)}catch(e){m(e.message||"Failed to delete question")}finally{p(!1)}}},M=e=>{y(e.id),v(e.text)},O=async()=>{if(j&&w.trim())try{k(!0);let s=localStorage.getItem("token"),a=localStorage.getItem("businessId");if(!s||!a)throw Error("Missing businessId or token");if(!(await fetch("https://dev.wellnexai.com/api/business/update-one-question",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({businessId:a,questions:{_id:j,name:w.trim()}})})).ok)throw Error("Failed to update question");t(e.map(e=>e.id===j?{...e,text:w.trim()}:e)),y(null),v("")}catch(e){m(e.message||"Failed to update question")}finally{k(!1)}},D=()=>{y(null),v("")},J=async()=>{if(!C.trim()){m("Please enter a question");return}if(e.length>=5){m("Maximum 5 questions allowed");return}A(!0),m(null);try{let e=localStorage.getItem("businessId"),s=localStorage.getItem("token");if(!e||!s)throw Error("Missing businessId or token");let a=await fetch("https://dev.wellnexai.com/api/business/add-business-questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({businessId:e,questions:[{name:C.trim()}]})}),r=await a.json();if(!a.ok)throw Error(r.message||"Failed to add question");let i={id:r.data?.[0]?._id||Date.now().toString(),text:C.trim(),createdAt:new Date().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1};t(e=>[...e,i]),E(""),z(!1);let l=await fetch("https://dev.wellnexai.com/api/business/get-questions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({businessId:e})}),n=await l.json();if(l.ok){let e=(n.data||[]).map(e=>({id:e._id,text:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(e)}}catch(e){m(e.message||"Failed to add question")}finally{A(!1),z(!1)}};return(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Questions"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Questions"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:I?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:C,onChange:e=>E(e.target.value),placeholder:"Enter new question",className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8"}),(0,a.jsx)("button",{onClick:()=>z(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(i.A,{size:16})})]}),(0,a.jsxs)("button",{onClick:J,disabled:S||!C.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:[(0,a.jsx)(l.A,{size:16}),(0,a.jsx)("span",{children:S?"Adding...":"Add Question"})]})]}):(0,a.jsxs)("button",{onClick:()=>{z(!0),E("")},disabled:e.length>=5,className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50 disabled:cursor-not-allowed",title:e.length>=5?"Maximum 5 questions allowed":"",children:[(0,a.jsx)(l.A,{size:16}),(0,a.jsx)("span",{children:"Add Question"})]})})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[s&&(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading questions..."}),x&&(0,a.jsx)("div",{className:"text-center py-4 text-red-500",children:x}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Questions"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:grid sm:grid-cols-[1fr_auto_auto_auto] items-start sm:items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),j===e.id?(0,a.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0 w-full",children:[(0,a.jsx)("span",{ref:F,className:"invisible absolute whitespace-pre px-2 py-1 border border-transparent text-base font-normal",style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"},"aria-hidden":"true",children:w||e.text}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>v(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1] w-full min-w-0",disabled:N,style:{width:`${Math.max(P,200)}px`,minWidth:200,maxWidth:"100%"}}),(0,a.jsxs)("div",{className:"flex gap-2 sm:gap-2",children:[(0,a.jsx)("button",{onClick:O,disabled:N,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(n.A,{size:18})}),(0,a.jsx)("button",{onClick:D,disabled:N,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(i.A,{size:18})})]})]}):(0,a.jsx)("div",{className:"flex-1 break-words w-full",children:e.text})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center w-full",children:[(0,a.jsx)("span",{className:"text-gray-500 block sm:hidden",children:"Last Edited:"}),(0,a.jsx)("div",{className:"text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center w-full",children:[(0,a.jsx)("span",{className:"text-gray-500 block sm:hidden",children:"Status:"}),(0,a.jsx)("div",{children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600 ",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 w-full sm:w-auto",children:[(0,a.jsx)("button",{onClick:()=>M(e),disabled:N,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>$(e.id),disabled:f,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})})]})]},e.id))]})]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Question"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this question? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{h(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:f,children:"Cancel"}),(0,a.jsx)("button",{onClick:B,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:f,children:f?"Deleting...":"Delete"})]})]})})]})}},50820:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Kajal\\\\wellnex\\\\wellnex-FE\\\\components\\\\dashboard\\\\business-questions.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Kajal\\wellnex\\wellnex-FE\\components\\dashboard\\business-questions.tsx","default")},54647:()=>{},54698:(e,t,s)=>{Promise.resolve().then(s.bind(s,23222))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57175:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64118:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(37413),r=s(50820),i=s(82879),l=s(19125),n=s(15487);function o(){return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)(r.default,{}),(0,a.jsx)(i.default,{}),(0,a.jsx)(n.default,{}),(0,a.jsx)(l.default,{})]})}},64129:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var a=s(51060);let r="https://dev.wellnexai.com/api";a.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});let i=async e=>{if(!e.ok)throw Error((await e.json()).message||"Something went wrong");return e.json()},l={signup:async e=>i(await fetch("https://dev.wellnexai.com/api/business/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),sendVerificationEmail:async(e,t)=>i(await fetch(`${r}/business/sendVerificationEmail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({businessId:t})})),verifyEmailByLink:async(e,t)=>i(await fetch(`${r}/business/verifyEmailByLink`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({verificationToken:t,_id:e})})),uploadLogo:async(e,t,s)=>{let a=new FormData;a.append("logo",e),a.append("businessId",s);try{let e=await fetch("https://dev.wellnexai.com/api/business/uploadBusinessLogo",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:a});if(413===e.status)throw Error("File size too large. Please use a smaller image (max 5MB).");let s=await e.json();if(!e.ok)throw Error(s.message||"Failed to upload logo");console.log("https://dev.wellnexai.com","process.env.NEXT_PUBLIC_INSTANCE_URL");let r=s.logoUrl;return r&&!r.startsWith("https://dev.wellnexai.com")&&(r=`https://dev.wellnexai.com${r.startsWith("/")?"":"/"}${r}`),{...s,logoUrl:r}}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw Error("Network error. Please check your connection and try again.");throw e}},setThemeColor:async(e,t,s)=>{try{let a=s?JSON.stringify({themeColor:e,businessId:s}):JSON.stringify({themeColor:e}),r=await fetch("https://dev.wellnexai.com/api/business/setBusinessThemeColor",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:a}),i=await r.json();if(!r.ok)throw Error(i.message||"Failed to set theme color");return i}catch(e){throw e}},addBusinessKeywords:async(e,t,s)=>{try{let a=await fetch("https://dev.wellnexai.com/api/business/addBusinessKeywords",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({keywords:e,businessId:s,replace:!0})}),r=await a.json();if(!a.ok)throw Error(r.message||"Failed to add keywords");return r}catch(e){throw e}},signin:async(e,t)=>{let s=void 0,a={email:e,password:t};s&&(a.businessId=s);let r=await fetch("https://dev.wellnexai.com/api/business/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),i=await r.json();if(!r.ok||!i.status)throw Error(i.message||"Invalid email or password");return i},setupChatbot:async(e,t,s)=>{let a=await fetch(`${r}/business/add-business-questions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({businessId:e,questions:t})});if(!a.ok)throw Error((await a.json()).message||"Failed to setup chatbot");return a.json()},forgotPassword:async e=>{try{let t=await fetch(`${r}/business/forgotPassword`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to send reset password email");return s}catch(e){throw console.error("Error in forgotPassword API:",e),e}},resetPassword:async(e,t)=>{let s=await fetch(`${r}/business/resetPassword`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})});if(!s.ok)throw Error((await s.json()).message||"Failed to reset password");return s.json()},checkVerificationStatus:async(e,t)=>{try{let s=await fetch(`${r}/business/verify-status`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({businessId:e})}),a=await s.json();if(!s.ok)throw Error(a.message||"Failed to check verification status");return a}catch(e){throw console.error("Error checking verification status:",e),e}}}},68988:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var a=s(60687),r=s(43210),i=s(96241);let l=r.forwardRef(({className:e,type:t,...s},r)=>(0,a.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));l.displayName="Input"},74075:e=>{"use strict";e.exports=require("zlib")},76145:(e,t,s)=>{"use strict";s.d(t,{JR:()=>a,Rn:()=>r,hD:()=>i});let a="https://dev.wellnexai.com/api",r={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "};class i extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}},78272:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82879:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Kajal\\\\wellnex\\\\wellnex-FE\\\\components\\\\dashboard\\\\business-keywords.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Kajal\\wellnex\\wellnex-FE\\components\\dashboard\\business-keywords.tsx","default")},83249:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Kajal\\\\wellnex\\\\wellnex-FE\\\\app\\\\dashboard\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Kajal\\wellnex\\wellnex-FE\\app\\dashboard\\layout.tsx","default")},84729:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(60687),r=s(43210),i=s(96474),l=s(11860),n=s(13964),o=s(57175),c=s(88233);function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(null),[j,y]=(0,r.useState)(null),[w,v]=(0,r.useState)(""),[N,k]=(0,r.useState)(!1),[S,A]=(0,r.useState)(""),[C,E]=(0,r.useState)(!1),[I,z]=(0,r.useState)(!1),F=(0,r.useRef)(null),[P,T]=(0,r.useState)(200),$=async()=>{try{let e=localStorage.getItem("token"),s=localStorage.getItem("businessId"),a=await fetch("https://dev.wellnexai.com/api/business/getKeywords",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({businessId:s})});if(!a.ok)throw Error("Failed to fetch keywords");let r=await a.json();if(!r.status||200!==r.code)throw Error(r.message||"Failed to fetch keywords");let i=r.data;if(!Array.isArray(i))throw Error("Invalid response format: expected an array of keywords");let l=i.map(e=>({id:e._id,name:e.name,createdAt:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),active:!0,checked:!1}));t(l)}catch(e){m(e instanceof Error?e.message:"An error occurred")}finally{d(!1)}},B=e=>{b(e),p(!0)},M=async()=>{if(g)try{let e;h(!0);let t=localStorage.getItem("token"),s=localStorage.getItem("businessId");if(!t)throw Error("Authentication token not found");let a=await fetch("https://dev.wellnexai.com/api/business/deleteKeyword",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.trim()}`},body:JSON.stringify({keywordId:g,businessId:s})}),r=await a.text();try{e=JSON.parse(r)}catch(e){throw Error(`Invalid JSON response: ${r}`)}if(!e.status||200!==e.code)throw Error(e.message||"Failed to delete keyword");await $(),p(!1),b(null)}catch(e){console.error("Delete error:",e),m(e instanceof Error?e.message:"Failed to delete keyword")}finally{h(!1)}},O=e=>{y(e.id),v(e.name)},D=async()=>{if(j&&w.trim())try{let e;k(!0);let t=localStorage.getItem("token"),s=localStorage.getItem("businessId");if(!t)throw Error("Authentication token not found");let a=await fetch("https://dev.wellnexai.com/api/business/updateOneKeyword",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.trim()}`},body:JSON.stringify({keywords:{_id:j,name:w.trim()},businessId:s})}),r=await a.text();try{e=JSON.parse(r)}catch(e){throw Error(`Invalid JSON response: ${r}`)}if(!e.status||200!==e.code)throw Error(e.message||"Failed to update keyword");await $(),y(null),v("")}catch(e){console.error("Update error:",e),m(e instanceof Error?e.message:"Failed to update keyword")}finally{k(!1)}},J=()=>{y(null),v("")},L=async()=>{if(S.trim()){if(e.some(e=>e.name.toLowerCase()===S.trim().toLowerCase())){m("Keyword already exists"),A("");return}try{E(!0),m(null);let e=localStorage.getItem("token"),t=localStorage.getItem("businessId");if(!e||!t)throw Error("Authentication token or business ID not found");let s=await fetch("https://dev.wellnexai.com/api/business/addBusinessKeywords",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.trim()}`},body:JSON.stringify({keywords:[{name:S.trim()}],businessId:t,replace:!1})}),a=await s.json();if(!a.status||200!==a.code){m(a.message||"Keyword already exists");return}await $(),A(""),z(!1)}catch(e){m(e instanceof Error?e.message:"Keyword already exists")}finally{E(!1)}}};return s?(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-8",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[x&&(0,a.jsx)("div",{className:"text-center text-red-600 py-2",children:x}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b border-gray-200 px-4 sm:px-6 py-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Business Keywords"}),(0,a.jsxs)("div",{className:"rounded-full bg-black px-3 py-1 text-xs text-white w-fit",children:[e.length," Keywords"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.length<10&&(I?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:S,onChange:e=>A(e.target.value),placeholder:"Enter keyword",className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#987CF1] pr-8",disabled:C}),(0,a.jsx)("button",{onClick:()=>{z(!1),A("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(l.A,{size:14})})]}),(0,a.jsxs)("button",{onClick:L,disabled:C||!S.trim(),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white disabled:opacity-50",children:[(0,a.jsx)(i.A,{size:16}),C?"Adding...":"Add keyword"]})]}):(0,a.jsxs)("button",{onClick:()=>z(!0),className:"flex items-center gap-1 rounded-lg bg-black px-3 py-1.5 text-sm text-white",children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Add Keyword"})]}))})]}),(0,a.jsxs)("div",{className:"px-4 sm:px-6 py-2",children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6"}),(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:"Keywords"})]}),(0,a.jsx)("div",{className:"w-32 font-medium text-right sm:text-left",children:"Last Edited"}),(0,a.jsx)("div",{className:"w-20 font-medium text-right sm:text-left",children:"Status"}),(0,a.jsx)("div",{className:"w-24"})]}),e.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_auto_auto_auto] items-center border-b border-gray-100 py-3 text-sm gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center"}),j===e.id?(0,a.jsxs)("div",{className:"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{ref:F,className:"invisible absolute whitespace-pre px-2 py-1 border border-transparent text-base font-normal",style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"},"aria-hidden":"true",children:w||e.name}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>v(e.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#987CF1] overflow-x-auto whitespace-nowrap",style:{width:`${Math.max(P,100)}px`,minWidth:"100px",maxWidth:"100%"},disabled:N}),(0,a.jsxs)("div",{className:"flex gap-2 sm:gap-2",children:[(0,a.jsx)("button",{onClick:D,disabled:N,className:"p-1 text-green-600 hover:bg-green-50 rounded-full",children:(0,a.jsx)(n.A,{size:18})}),(0,a.jsx)("button",{onClick:J,disabled:N,className:"p-1 text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(l.A,{size:18})})]})]}):(0,a.jsx)("div",{className:"flex-1 min-w-0 break-words whitespace-normal",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Last Edited:"}),(0,a.jsx)("div",{className:"w-32 text-gray-500",children:e.createdAt})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-start",children:[(0,a.jsx)("span",{className:"sm:hidden text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"w-20",children:e.active&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-green-600",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>O(e),disabled:N,className:"rounded-full p-1 hover:bg-gray-100",children:(0,a.jsx)(o.A,{size:18,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>B(e.id),disabled:u||N,className:"rounded-full p-1 hover:bg-gray-100 disabled:opacity-50",children:(0,a.jsx)(c.A,{size:18,className:"text-gray-500"})})]})]},e.id))]})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Keyword"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this keyword? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{p(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:u,children:"Cancel"}),(0,a.jsx)("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:u,children:u?"Deleting...":"Delete"})]})]})})]})}},88233:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},94735:e=>{"use strict";e.exports=require("events")},96241:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(49384),r=s(82348);function i(...e){return(0,r.QP)((0,a.$)(e))}},96474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[357,598,60,889,69,580,95],()=>s(23459));module.exports=a})();