"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n// Define public routes that don't require authentication\nconst publicRoutes = [\n    '/landing',\n    '/faqs',\n    '/signin',\n    '/signup',\n    '/onboarding/step-1',\n    '/onboarding/step-2',\n    '/onboarding/step-3',\n    '/onboarding/step-4',\n    '/onboarding/step-5',\n    '/onboarding/step-6',\n    'policy-page',\n    '/about',\n    '/help',\n    '/verifyEmail',\n    '/forgot-password',\n    '/logout',\n    '/careers'\n];\n// Define protected routes that require authentication\nconst protectedRoutes = [\n    '/payment/planSelection',\n    '/payment/cardDetails',\n    '/payment/success',\n    '/payment/methodSlection',\n    '/payment/currencySelection',\n    '/dashboard',\n    '/admin/dashboard'\n];\nfunction middleware(request) {\n    const url = request.nextUrl.clone();\n    const { pathname } = url;\n    // Get the tokens from cookies and headers\n    const authCookie = request.cookies.get('authorization')?.value;\n    const tokenCookie = request.cookies.get('token')?.value;\n    const authHeader = request.headers.get('authorization');\n    const token = tokenCookie || (authHeader?.startsWith('Bearer ') ? authHeader.split(' ')[1] : null) || (authCookie?.startsWith('Bearer ') ? authCookie.split(' ')[1] : null);\n    console.log(token);\n    // Check if the route is public\n    const isPublicRoute = publicRoutes.some((route)=>pathname === route || pathname.startsWith(route + '/'));\n    // If it's a public route, allow access immediately\n    if (isPublicRoute) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // STRICT DASHBOARD LOCK - If dashboard lock is set, ONLY allow dashboard and logout\n    if (request.cookies.get('dashboardLock')?.value === 'true') {\n        if (pathname !== '/dashboard' && pathname !== '/logout') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/dashboard', request.url));\n        }\n    }\n    // Check if the route is protected\n    const isProtectedRoute = protectedRoutes.some((route)=>pathname === route || pathname.startsWith(route + '/'));\n    // If it's a protected route and there's no token, redirect to signin\n    if (isProtectedRoute && !token) {\n        const url = new URL('/signin', request.url);\n        url.searchParams.set('from', pathname);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(url);\n    }\n    // If authenticated and on dashboard, set strict lock\n    if (pathname === '/dashboard' && token) {\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        response.headers.set('Cache-Control', 'no-store, no-cache, must-revalidate, proxy-revalidate');\n        response.headers.set('Pragma', 'no-cache');\n        response.headers.set('Expires', '0');\n        response.cookies.set('dashboardLock', 'true', {\n            path: '/'\n        });\n        return response;\n    }\n    // If authenticated and on admin dashboard, set strict lock\n    if (pathname === '/admin/dashboard' && token) {\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        response.headers.set('Cache-Control', 'no-store, no-cache, must-revalidate, proxy-revalidate');\n        response.headers.set('Pragma', 'no-cache');\n        response.headers.set('Expires', '0');\n        response.cookies.set('adminDashboardLock', 'true', {\n            path: '/'\n        });\n        return response;\n    }\n    // If admin dashboard lock is set, only allow admin dashboard and logout\n    if (request.cookies.get('adminDashboardLock')?.value === 'true') {\n        if (pathname !== '/admin/dashboard' && pathname !== '/logout') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/admin/dashboard', request.url));\n        }\n    }\n    // Handle logout\n    if (pathname === '/logout') {\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/signup', request.url));\n        // Clear all cookies\n        const cookies = request.cookies.getAll();\n        cookies.forEach((cookie)=>{\n            response.cookies.delete(cookie.name);\n        });\n        // Clear specific important cookies\n        response.cookies.delete('onboardingToken');\n        response.cookies.delete('token');\n        response.cookies.delete('authorization');\n        response.cookies.delete('adminDashboardLock');\n        response.cookies.delete('dashboardLock');\n        return response;\n    }\n    // Redirect /lading to /landing (typo fix)\n    if (pathname === '/') {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/landing', request.url));\n    }\n    // Handle verification URL redirect\n    if (pathname === '/signin' && url.hash.includes('verifyEmail')) {\n        // Extract businessId and token from hash\n        const hashParts = url.hash.split('/');\n        const businessId = hashParts[hashParts.length - 1].split('?')[0];\n        const token = url.hash.split('token=')[1];\n        // Redirect to verification page\n        url.pathname = `/verifyEmail/${businessId}`;\n        url.search = `?token=${token}`;\n        url.hash = '';\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(url);\n    }\n    // Store current step in cookie when on onboarding\n    if (pathname.startsWith('/onboarding/step-')) {\n        const currentStep = pathname.split('step-')[1];\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        response.cookies.set('currentStep', currentStep || '1', {\n            path: '/'\n        });\n        response.cookies.set('inOnboarding', 'true', {\n            path: '/'\n        });\n        return response;\n    }\n    // If trying to access dashboard while on onboarding, keep them on current step\n    if (pathname === '/dashboard' && request.cookies.get('inOnboarding')?.value === 'true') {\n        const currentStep = request.cookies.get('currentStep')?.value || '1';\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/onboarding/step-${currentStep}`, request.url));\n    }\n    // Clear onboarding cookies when not in onboarding\n    if (!pathname.startsWith('/onboarding/')) {\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        response.cookies.delete('inOnboarding');\n        response.cookies.delete('currentStep');\n        return response;\n    }\n    // If there's a token, allow access\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n// Configure which routes to run middleware on\n// export const config = {\n//   matcher: [\n//     /*\n//      * Match all request paths except for the ones starting with:\n//      * - api (API routes)\n//      * - _next/static (static files)\n//      * - _next/image (image optimization files)\n//      * - favicon.ico (favicon file)\n//      */\n//     '/((?!api|_next/static|_next/image|favicon.ico|.*\\\\.(png|jpg|jpeg|gif|webp|svg|ico|css|js)).*)',\n//   ],\n// } \nconst config = {\n    matcher: '/((?!api|_next/static|_next/image|favicon.ico|.*\\\\.(?:png|jpg|jpeg|gif|webp|svg|ico|css|js)).*)'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRQyxHQUFHO0lBQ3JGO0lBRUEsa0RBQWtEO0lBQ2xELElBQUksQ0FBQ0csU0FBU1MsVUFBVSxDQUFDLGlCQUFpQjtRQUN4QyxNQUFNYSxXQUFXOUIscURBQVlBLENBQUN3QixJQUFJO1FBQ2xDTSxTQUFTcEIsT0FBTyxDQUFDeUIsTUFBTSxDQUFDO1FBQ3hCTCxTQUFTcEIsT0FBTyxDQUFDeUIsTUFBTSxDQUFDO1FBQ3hCLE9BQU9MO0lBQ1Q7SUFFQSxtQ0FBbUM7SUFDbkMsT0FBTzlCLHFEQUFZQSxDQUFDd0IsSUFBSTtBQUMxQjtBQUVBLDhDQUE4QztBQUM5QywwQkFBMEI7QUFDMUIsZUFBZTtBQUNmLFNBQVM7QUFDVCxvRUFBb0U7QUFDcEUsNEJBQTRCO0FBQzVCLHVDQUF1QztBQUN2QyxrREFBa0Q7QUFDbEQsc0NBQXNDO0FBQ3RDLFVBQVU7QUFDVix1R0FBdUc7QUFFdkcsT0FBTztBQUNQLEtBQUs7QUFFRSxNQUFNb0IsU0FBUztJQUNwQkMsU0FBUztBQUNYLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tdXNrYW4vRG9jdW1lbnRzL3dlbGxuZXgtc2lnbnVwL21pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5cbi8vIERlZmluZSBwdWJsaWMgcm91dGVzIHRoYXQgZG9uJ3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvblxuY29uc3QgcHVibGljUm91dGVzID0gWycvbGFuZGluZycsICcvZmFxcycsICcvc2lnbmluJywgJy9zaWdudXAnLCAnL29uYm9hcmRpbmcvc3RlcC0xJywgJy9vbmJvYXJkaW5nL3N0ZXAtMicsICcvb25ib2FyZGluZy9zdGVwLTMnLCAnL29uYm9hcmRpbmcvc3RlcC00JywgJy9vbmJvYXJkaW5nL3N0ZXAtNScsICcvb25ib2FyZGluZy9zdGVwLTYnLCdwb2xpY3ktcGFnZScsICcvYWJvdXQnLCAnL2hlbHAnLCAnL3ZlcmlmeUVtYWlsJywgJy9mb3Jnb3QtcGFzc3dvcmQnLCAnL2xvZ291dCcsJy9jYXJlZXJzJ11cblxuLy8gRGVmaW5lIHByb3RlY3RlZCByb3V0ZXMgdGhhdCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG5jb25zdCBwcm90ZWN0ZWRSb3V0ZXMgPSBbXG4gICcvcGF5bWVudC9wbGFuU2VsZWN0aW9uJywgXG4gICcvcGF5bWVudC9jYXJkRGV0YWlscycsIFxuICAnL3BheW1lbnQvc3VjY2VzcycsIFxuICAnL3BheW1lbnQvbWV0aG9kU2xlY3Rpb24nLFxuICAnL3BheW1lbnQvY3VycmVuY3lTZWxlY3Rpb24nLFxuICAnL2Rhc2hib2FyZCcsXG4gICcvYWRtaW4vZGFzaGJvYXJkJ1xuXVxuXG5leHBvcnQgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCB1cmwgPSByZXF1ZXN0Lm5leHRVcmwuY2xvbmUoKVxuICBjb25zdCB7IHBhdGhuYW1lIH0gPSB1cmxcblxuICAvLyBHZXQgdGhlIHRva2VucyBmcm9tIGNvb2tpZXMgYW5kIGhlYWRlcnNcbiAgY29uc3QgYXV0aENvb2tpZSA9IHJlcXVlc3QuY29va2llcy5nZXQoJ2F1dGhvcml6YXRpb24nKT8udmFsdWVcbiAgY29uc3QgdG9rZW5Db29raWUgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCd0b2tlbicpPy52YWx1ZVxuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpXG5cbiAgY29uc3QgdG9rZW4gPSB0b2tlbkNvb2tpZSB8fFxuICAgIChhdXRoSGVhZGVyPy5zdGFydHNXaXRoKCdCZWFyZXIgJykgPyBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV0gOiBudWxsKSB8fFxuICAgIChhdXRoQ29va2llPy5zdGFydHNXaXRoKCdCZWFyZXIgJykgPyBhdXRoQ29va2llLnNwbGl0KCcgJylbMV0gOiBudWxsKVxuY29uc29sZS5sb2codG9rZW4pO1xuXG4gIC8vIENoZWNrIGlmIHRoZSByb3V0ZSBpcyBwdWJsaWNcbiAgY29uc3QgaXNQdWJsaWNSb3V0ZSA9IHB1YmxpY1JvdXRlcy5zb21lKHJvdXRlID0+IHBhdGhuYW1lID09PSByb3V0ZSB8fCBwYXRobmFtZS5zdGFydHNXaXRoKHJvdXRlICsgJy8nKSlcblxuICAvLyBJZiBpdCdzIGEgcHVibGljIHJvdXRlLCBhbGxvdyBhY2Nlc3MgaW1tZWRpYXRlbHlcbiAgaWYgKGlzUHVibGljUm91dGUpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKVxuICB9XG5cbiAgLy8gU1RSSUNUIERBU0hCT0FSRCBMT0NLIC0gSWYgZGFzaGJvYXJkIGxvY2sgaXMgc2V0LCBPTkxZIGFsbG93IGRhc2hib2FyZCBhbmQgbG9nb3V0XG4gIGlmIChyZXF1ZXN0LmNvb2tpZXMuZ2V0KCdkYXNoYm9hcmRMb2NrJyk/LnZhbHVlID09PSAndHJ1ZScpIHtcbiAgICBpZiAocGF0aG5hbWUgIT09ICcvZGFzaGJvYXJkJyAmJiBwYXRobmFtZSAhPT0gJy9sb2dvdXQnKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9kYXNoYm9hcmQnLCByZXF1ZXN0LnVybCkpXG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdGhlIHJvdXRlIGlzIHByb3RlY3RlZFxuICBjb25zdCBpc1Byb3RlY3RlZFJvdXRlID0gcHJvdGVjdGVkUm91dGVzLnNvbWUocm91dGUgPT4gcGF0aG5hbWUgPT09IHJvdXRlIHx8IHBhdGhuYW1lLnN0YXJ0c1dpdGgocm91dGUgKyAnLycpKVxuXG4gIC8vIElmIGl0J3MgYSBwcm90ZWN0ZWQgcm91dGUgYW5kIHRoZXJlJ3Mgbm8gdG9rZW4sIHJlZGlyZWN0IHRvIHNpZ25pblxuICBpZiAoaXNQcm90ZWN0ZWRSb3V0ZSAmJiAhdG9rZW4pIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCcvc2lnbmluJywgcmVxdWVzdC51cmwpXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Zyb20nLCBwYXRobmFtZSlcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVybClcbiAgfVxuXG4gIC8vIElmIGF1dGhlbnRpY2F0ZWQgYW5kIG9uIGRhc2hib2FyZCwgc2V0IHN0cmljdCBsb2NrXG4gIGlmIChwYXRobmFtZSA9PT0gJy9kYXNoYm9hcmQnICYmIHRva2VuKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCgpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCAnbm8tc3RvcmUsIG5vLWNhY2hlLCBtdXN0LXJldmFsaWRhdGUsIHByb3h5LXJldmFsaWRhdGUnKVxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdQcmFnbWEnLCAnbm8tY2FjaGUnKVxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdFeHBpcmVzJywgJzAnKVxuICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KCdkYXNoYm9hcmRMb2NrJywgJ3RydWUnLCB7IHBhdGg6ICcvJyB9KVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgLy8gSWYgYXV0aGVudGljYXRlZCBhbmQgb24gYWRtaW4gZGFzaGJvYXJkLCBzZXQgc3RyaWN0IGxvY2tcbiAgaWYgKHBhdGhuYW1lID09PSAnL2FkbWluL2Rhc2hib2FyZCcgJiYgdG9rZW4pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KClcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsICduby1zdG9yZSwgbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZSwgcHJveHktcmV2YWxpZGF0ZScpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1ByYWdtYScsICduby1jYWNoZScpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0V4cGlyZXMnLCAnMCcpXG4gICAgcmVzcG9uc2UuY29va2llcy5zZXQoJ2FkbWluRGFzaGJvYXJkTG9jaycsICd0cnVlJywgeyBwYXRoOiAnLycgfSlcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIC8vIElmIGFkbWluIGRhc2hib2FyZCBsb2NrIGlzIHNldCwgb25seSBhbGxvdyBhZG1pbiBkYXNoYm9hcmQgYW5kIGxvZ291dFxuICBpZiAocmVxdWVzdC5jb29raWVzLmdldCgnYWRtaW5EYXNoYm9hcmRMb2NrJyk/LnZhbHVlID09PSAndHJ1ZScpIHtcbiAgICBpZiAocGF0aG5hbWUgIT09ICcvYWRtaW4vZGFzaGJvYXJkJyAmJiBwYXRobmFtZSAhPT0gJy9sb2dvdXQnKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9hZG1pbi9kYXNoYm9hcmQnLCByZXF1ZXN0LnVybCkpXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGxvZ291dFxuICBpZiAocGF0aG5hbWUgPT09ICcvbG9nb3V0Jykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9zaWdudXAnLCByZXF1ZXN0LnVybCkpXG4gICAgXG4gICAgLy8gQ2xlYXIgYWxsIGNvb2tpZXNcbiAgICBjb25zdCBjb29raWVzID0gcmVxdWVzdC5jb29raWVzLmdldEFsbCgpXG4gICAgY29va2llcy5mb3JFYWNoKGNvb2tpZSA9PiB7XG4gICAgICByZXNwb25zZS5jb29raWVzLmRlbGV0ZShjb29raWUubmFtZSlcbiAgICB9KVxuICAgIFxuICAgIC8vIENsZWFyIHNwZWNpZmljIGltcG9ydGFudCBjb29raWVzXG4gICAgcmVzcG9uc2UuY29va2llcy5kZWxldGUoJ29uYm9hcmRpbmdUb2tlbicpXG4gICAgcmVzcG9uc2UuY29va2llcy5kZWxldGUoJ3Rva2VuJylcbiAgICByZXNwb25zZS5jb29raWVzLmRlbGV0ZSgnYXV0aG9yaXphdGlvbicpXG4gICAgcmVzcG9uc2UuY29va2llcy5kZWxldGUoJ2FkbWluRGFzaGJvYXJkTG9jaycpXG4gICAgcmVzcG9uc2UuY29va2llcy5kZWxldGUoJ2Rhc2hib2FyZExvY2snKVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgLy8gUmVkaXJlY3QgL2xhZGluZyB0byAvbGFuZGluZyAodHlwbyBmaXgpXG4gIGlmIChwYXRobmFtZSA9PT0gJy8nKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvbGFuZGluZycsIHJlcXVlc3QudXJsKSk7XG4gIH1cblxuICAvLyBIYW5kbGUgdmVyaWZpY2F0aW9uIFVSTCByZWRpcmVjdFxuICBpZiAocGF0aG5hbWUgPT09ICcvc2lnbmluJyAmJiB1cmwuaGFzaC5pbmNsdWRlcygndmVyaWZ5RW1haWwnKSkge1xuICAgIC8vIEV4dHJhY3QgYnVzaW5lc3NJZCBhbmQgdG9rZW4gZnJvbSBoYXNoXG4gICAgY29uc3QgaGFzaFBhcnRzID0gdXJsLmhhc2guc3BsaXQoJy8nKVxuICAgIGNvbnN0IGJ1c2luZXNzSWQgPSBoYXNoUGFydHNbaGFzaFBhcnRzLmxlbmd0aCAtIDFdLnNwbGl0KCc/JylbMF1cbiAgICBjb25zdCB0b2tlbiA9IHVybC5oYXNoLnNwbGl0KCd0b2tlbj0nKVsxXVxuXG4gICAgLy8gUmVkaXJlY3QgdG8gdmVyaWZpY2F0aW9uIHBhZ2VcbiAgICB1cmwucGF0aG5hbWUgPSBgL3ZlcmlmeUVtYWlsLyR7YnVzaW5lc3NJZH1gXG4gICAgdXJsLnNlYXJjaCA9IGA/dG9rZW49JHt0b2tlbn1gXG4gICAgdXJsLmhhc2ggPSAnJ1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdCh1cmwpXG4gIH1cblxuICAvLyBTdG9yZSBjdXJyZW50IHN0ZXAgaW4gY29va2llIHdoZW4gb24gb25ib2FyZGluZ1xuICBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aCgnL29uYm9hcmRpbmcvc3RlcC0nKSkge1xuICAgIGNvbnN0IGN1cnJlbnRTdGVwID0gcGF0aG5hbWUuc3BsaXQoJ3N0ZXAtJylbMV1cbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KClcbiAgICByZXNwb25zZS5jb29raWVzLnNldCgnY3VycmVudFN0ZXAnLCBjdXJyZW50U3RlcCB8fCAnMScsIHsgcGF0aDogJy8nIH0pXG4gICAgcmVzcG9uc2UuY29va2llcy5zZXQoJ2luT25ib2FyZGluZycsICd0cnVlJywgeyBwYXRoOiAnLycgfSlcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIC8vIElmIHRyeWluZyB0byBhY2Nlc3MgZGFzaGJvYXJkIHdoaWxlIG9uIG9uYm9hcmRpbmcsIGtlZXAgdGhlbSBvbiBjdXJyZW50IHN0ZXBcbiAgaWYgKHBhdGhuYW1lID09PSAnL2Rhc2hib2FyZCcgJiYgcmVxdWVzdC5jb29raWVzLmdldCgnaW5PbmJvYXJkaW5nJyk/LnZhbHVlID09PSAndHJ1ZScpIHtcbiAgICBjb25zdCBjdXJyZW50U3RlcCA9IHJlcXVlc3QuY29va2llcy5nZXQoJ2N1cnJlbnRTdGVwJyk/LnZhbHVlIHx8ICcxJ1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChgL29uYm9hcmRpbmcvc3RlcC0ke2N1cnJlbnRTdGVwfWAsIHJlcXVlc3QudXJsKSlcbiAgfVxuXG4gIC8vIENsZWFyIG9uYm9hcmRpbmcgY29va2llcyB3aGVuIG5vdCBpbiBvbmJvYXJkaW5nXG4gIGlmICghcGF0aG5hbWUuc3RhcnRzV2l0aCgnL29uYm9hcmRpbmcvJykpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KClcbiAgICByZXNwb25zZS5jb29raWVzLmRlbGV0ZSgnaW5PbmJvYXJkaW5nJylcbiAgICByZXNwb25zZS5jb29raWVzLmRlbGV0ZSgnY3VycmVudFN0ZXAnKVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgLy8gSWYgdGhlcmUncyBhIHRva2VuLCBhbGxvdyBhY2Nlc3NcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbn1cblxuLy8gQ29uZmlndXJlIHdoaWNoIHJvdXRlcyB0byBydW4gbWlkZGxld2FyZSBvblxuLy8gZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbi8vICAgbWF0Y2hlcjogW1xuLy8gICAgIC8qXG4vLyAgICAgICogTWF0Y2ggYWxsIHJlcXVlc3QgcGF0aHMgZXhjZXB0IGZvciB0aGUgb25lcyBzdGFydGluZyB3aXRoOlxuLy8gICAgICAqIC0gYXBpIChBUEkgcm91dGVzKVxuLy8gICAgICAqIC0gX25leHQvc3RhdGljIChzdGF0aWMgZmlsZXMpXG4vLyAgICAgICogLSBfbmV4dC9pbWFnZSAoaW1hZ2Ugb3B0aW1pemF0aW9uIGZpbGVzKVxuLy8gICAgICAqIC0gZmF2aWNvbi5pY28gKGZhdmljb24gZmlsZSlcbi8vICAgICAgKi9cbi8vICAgICAnLygoPyFhcGl8X25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfC4qXFxcXC4ocG5nfGpwZ3xqcGVnfGdpZnx3ZWJwfHN2Z3xpY298Y3NzfGpzKSkuKiknLFxuXG4vLyAgIF0sXG4vLyB9IFxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiAnLygoPyFhcGl8X25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfC4qXFxcXC4oPzpwbmd8anBnfGpwZWd8Z2lmfHdlYnB8c3ZnfGljb3xjc3N8anMpKS4qKScsXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInB1YmxpY1JvdXRlcyIsInByb3RlY3RlZFJvdXRlcyIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwidXJsIiwibmV4dFVybCIsImNsb25lIiwicGF0aG5hbWUiLCJhdXRoQ29va2llIiwiY29va2llcyIsImdldCIsInZhbHVlIiwidG9rZW5Db29raWUiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsInRva2VuIiwic3RhcnRzV2l0aCIsInNwbGl0IiwiY29uc29sZSIsImxvZyIsImlzUHVibGljUm91dGUiLCJzb21lIiwicm91dGUiLCJuZXh0IiwicmVkaXJlY3QiLCJVUkwiLCJpc1Byb3RlY3RlZFJvdXRlIiwic2VhcmNoUGFyYW1zIiwic2V0IiwicmVzcG9uc2UiLCJwYXRoIiwiZ2V0QWxsIiwiZm9yRWFjaCIsImNvb2tpZSIsImRlbGV0ZSIsIm5hbWUiLCJoYXNoIiwiaW5jbHVkZXMiLCJoYXNoUGFydHMiLCJidXNpbmVzc0lkIiwibGVuZ3RoIiwic2VhcmNoIiwiY3VycmVudFN0ZXAiLCJjb25maWciLCJtYXRjaGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});